{"version":3,"file":"index.js","sources":["../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../node_modules/@babel/runtime/helpers/esm/inherits.js","../../node_modules/@babel/runtime/helpers/esm/typeof.js","../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../node_modules/@babel/runtime/helpers/esm/createClass.js","../../node_modules/svelte/internal/index.mjs","../src/context.ts","../../node_modules/style-inject/dist/style-inject.es.js","../src/components/FloatingBtn.svelte","../../node_modules/svelte/store/index.mjs","../src/stores/snapshots.ts","../src/tabs/TabsMenu.svelte","../../node_modules/diff-match-patch/index.js","../../node_modules/jsondiffpatch/dist/jsondiffpatch.esm.js","../src/history-and-diff/diff.ts","../src/history-and-diff/transaction.ts","../src/history-and-diff/createHistoryEntry.ts","../src/stores/stateHistory.ts","../src/tabs/state/getActiveMarks.ts","../src/tabs/state/selection.ts","../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../node_modules/svelte-tree-view/package/tree-utils.js","../../node_modules/svelte-tree-view/package/stores/props.js","../../node_modules/svelte-tree-view/package/stores/root-element.js","../../node_modules/svelte-tree-view/package/stores/tree.js","../../node_modules/svelte-tree-view/package/TreeViewNode.svelte","../../node_modules/svelte-tree-view/package/TreeView.svelte","../src/tabs/SplitView.svelte","../src/components/Button.svelte","../src/tabs/state/StateTab.svelte","../src/tabs/history/mapDeltas.ts","../src/tabs/history/HistoryList.svelte","../src/tabs/history/DiffValue.svelte","../src/tabs/history/HistoryTab.svelte","../src/tabs/List.svelte","../src/tabs/PluginsTab.svelte","../src/tabs/SchemaTab.svelte","../src/tabs/structure/DocNode.svelte","../src/tabs/structure/colors.ts","../src/tabs/structure/DocView.svelte","../src/tabs/structure/StructureTab.svelte","../src/tabs/snapshots/SnapshotsList.svelte","../src/tabs/snapshots/SnapshotsTab.svelte","../src/components/FloatingDock.svelte","../src/components/DevTools.svelte","../src/history-and-diff/subscribeToTransactions.ts","../src/applyDevTools.ts"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = append_empty_stylesheet(node).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.44.1' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","import { EditorView } from 'prosemirror-view'\nimport type { EditorState, Transaction } from 'prosemirror-state'\nimport type { Node as PMNode } from 'prosemirror-model'\nimport { getContext as getCtx, setContext as setCtx } from 'svelte'\n\nimport { buildColors } from './tabs/structure/colors'\n\nexport type Contexts = {\n  'editor-view': {\n    view: EditorView\n    replaceEditorContent: (state: EditorState) => void\n    execCmd: (cmd: (\n      state: EditorState,\n      dispatch?: (tr: Transaction) => void\n    ) => void) => void\n  }\n  'doc-view': {\n    selected: {\n      type: string\n      start: number\n      end: number\n    }\n    colors: ReturnType<typeof buildColors>\n    handleNodeClick: (n: PMNode, startPos: number, scrollInto?: boolean) => void\n  }\n}\n\nexport const setContext = <K extends keyof Contexts & string>(ctx: K, val: Contexts[K]) =>\n  setCtx<Contexts[K]>(ctx, val)\n\nexport const getContext = <K extends keyof Contexts & string>(ctx: K) => getCtx<Contexts[K]>(ctx)\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","<script lang=\"ts\">\n  import type { ButtonPosition } from '../types'\n\n  export let buttonPosition: ButtonPosition\n</script>\n\n<button class={`floating-btn ${buttonPosition}`} on:click>\n  <svg\n    width=\"530\"\n    height=\"530\"\n    viewBox=\"0 0 530 530\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <title>prosemirror</title>\n    <desc>Created using Figma</desc>\n    <use xlink:href=\"#a\" transform=\"matrix(2 0 0 2 118 116)\" fill=\"#FFF\" />\n    <use xlink:href=\"#b\" transform=\"rotate(16 59.054 420.192) scale(2)\" fill=\"#FFF\" />\n    <use xlink:href=\"#c\" transform=\"matrix(2 0 0 2 154.024 141.58)\" fill=\"#363755\" />\n    <use xlink:href=\"#d\" transform=\"matrix(2 0 0 2 220 334.8)\" fill=\"#FFF\" />\n    <use xlink:href=\"#e\" transform=\"matrix(2 0 0 2 218.826 262.052)\" fill=\"#363755\" />\n    <use xlink:href=\"#f\" transform=\"matrix(2 0 0 2 197.108 184.998)\" fill=\"#FFF\" />\n    <use xlink:href=\"#g\" transform=\"matrix(2 0 0 2 221.8 216)\" fill=\"#363755\" />\n    <defs>\n      <path\n        id=\"a\"\n        d=\"M73.5 0C32.859 0 0 32.859 0 73.5S32.859 147 73.5 147 147 114.141 147 73.5 114.069 0 73.5\n        0z\"\n      />\n      <path\n        id=\"b\"\n        d=\"M193.601 107.116c0-13.376 8.238-23.91\n        20.619-31.153-2.244-7.447-5.19-14.6-8.824-21.32-13.886\n        3.633-25.12-1.799-34.568-11.26-9.449-9.437-12.344-20.672-8.709-34.571A111.362 111.362 0 0 0\n        140.799 0c-7.243 12.37-20.339 20.594-33.689 20.594-13.363\n        0-26.446-8.225-33.701-20.594A110.888 110.888 0 0 0 52.1 8.812c3.634 13.9.753 25.134-8.721\n        34.57-9.436 9.462-20.67 14.894-34.569 11.26A112.178 112.178 0 0 0 0 75.963c12.369 7.243\n        20.593 17.777 20.593 31.153 0 13.352-8.224 26.448-20.593 33.704a113.338 113.338 0 0 0 8.811\n        21.321c13.899-3.634 25.133-.752 34.569 8.697 9.448 9.462 12.355 20.696 8.721 34.57a112.653\n        112.653 0 0 0 21.32 8.837c7.243-12.407 20.338-20.619 33.702-20.619 13.35 0 26.446 8.225\n        33.701 20.619a114.22 114.22 0 0 0 21.32-8.837c-3.634-13.874-.752-25.108 8.709-34.57\n        9.449-9.437 20.683-14.869 34.569-11.26a112.343 112.343 0 0 0\n        8.823-21.321c-12.406-7.256-20.644-17.789-20.644-31.141zm-86.491 46.57c-25.732\n        0-46.58-20.849-46.58-46.57 0-25.733 20.86-46.595 46.58-46.595 25.732 0 46.567 20.875 46.567\n        46.595 0 25.734-20.835 46.57-46.567 46.57z\"\n      />\n      <path\n        id=\"c\"\n        d=\"M98.088 49.91c-6.9 83.9 10.8 103.401 10.8 103.401s-55.1\n        5.499-82.7-13.401c-30.5-20.9-26-67.5-25.9-94.6.1-28.4 25.6-45.8 49.9-45.3 29.1.5 50.2 21.6\n        47.9 49.9z\"\n      />\n      <path\n        id=\"d\"\n        d=\"M.1.1c12.2 33.3 22.5 42.7 40 55.2 25.3 18 36.6 17.5 76.3 41C78.1 60.3 30.8 45.7 0 0l.1.1z\"\n      />\n      <path\n        id=\"e\"\n        d=\"M.687 36.474c3 13.3 17.9 29.9 30.4 41.6 24.8 23.2 42 22.4 86\n        54.7-18.2-51.8-18.8-62-43.5-106.1-24.7-44-67.6-20.3-67.6-20.3s-8.4 16.6-5.3 29.9v.2z\"\n      />\n      <path\n        id=\"f\"\n        d=\"M38.346 11.5s-4-11.6-18-11.5c-30 .2-28.8 52.1 16.9 52 39.6-.1 39.2-49.4\n        16.1-49.6-10.2-.2-15 9.1-15 9.1z\"\n      />\n      <path\n        id=\"g\"\n        d=\"M26.5 15c10.8 0 2 14.9-.6 20.9-1.8-8.4-10.2-20.9.6-20.9zM10.2.1C4.6.1 0 4.6 0 10.3c0 5.6\n        4.5 10.2 10.2 10.2 5.6 0 10.2-4.5 10.2-10.2C20.4 4.7 15.9.1 10.2.1zM40.7 0c-4.8 0-8.8\n        4.5-8.8 10.2 0 5.6 3.9 10.2 8.8 10.2 4.8 0 8.8-4.5 8.8-10.2C49.5 4.6 45.6 0 40.7 0z\"\n      />\n    </defs>\n  </svg>\n</button>\n\n<style lang=\"scss\">\n  .floating-btn {\n    background: $color-blue-bg;\n    border: 0;\n    border-radius: 50%;\n    box-shadow: 0 0 30px rgba($color-black, 0.3);\n    cursor: pointer;\n    position: fixed;\n    padding: 6px;\n    transition: opacity 0.3s;\n    -webkit-transition: opacity 0.3s;\n    z-index: 99999;\n  }\n  .floating-btn.bottom-right {\n    bottom: 16px;\n    right: 16px;\n  }\n  .floating-btn.bottom-left {\n    bottom: 16px;\n    left: 16px;\n  }\n  .floating-btn.top-right {\n    top: 16px;\n    right: 16px;\n  }\n  .floating-btn.top-left {\n    top: 16px;\n    left: 16px;\n  }\n  .floating-btn:hover {\n    opacity: 0.7;\n  }\n  .floating-btn > svg {\n    display: block;\n    width: 34px;\n    height: 34px;\n    position: relative;\n  }\n</style>\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import type { EditorView } from 'prosemirror-view'\nimport type { EditorState } from 'prosemirror-state'\nimport type { Node as PMNode } from 'prosemirror-model'\nimport { get, writable } from 'svelte/store'\n\nimport type { Snapshot } from '$typings/snapshots'\nimport { Schema } from 'prosemirror-model'\n\nconst SNAPSHOTS_KEY = '__prosemirror-dev-toolkit__snapshots'\n\nexport const snapshots = writable<Snapshot[]>([])\nexport const selectedSnapshot = writable<Snapshot | undefined>()\nexport const previousEditorState = writable<EditorState | undefined>()\nlet canAccessLocalStorage = true\n\nfunction hydrate() {\n  let persisted = null\n  try {\n    persisted = localStorage.getItem(SNAPSHOTS_KEY)\n  } catch (err) {\n    // Will crash when window is undefined, eg in server-side rendering\n    // but also in a codesandbox where you are denied access to localStorage\n    canAccessLocalStorage = false\n  }\n  if (persisted && persisted.length > 0) {\n    try {\n      const parsed = JSON.parse(persisted)\n      snapshots.set(parsed)\n    } catch (err) {\n      console.error('Corrupted snapshots values in localStorage', err)\n    }\n  }\n}\n\nhydrate()\n\nsnapshots.subscribe(val => {\n  if (canAccessLocalStorage) {\n    localStorage.setItem(SNAPSHOTS_KEY, JSON.stringify(val))\n  }\n})\n\nfunction setEditorDoc(view: EditorView, doc: { [key: string]: any }) {\n  const node: PMNode = view.state.schema.nodeFromJSON(doc)\n  const tr = view.state.tr\n  tr.replaceWith(0, view.state.doc.nodeSize - 2, node.content)\n  view.dispatch(tr)\n}\n\nexport function saveSnapshot(snapshotName: string, doc: { [key: string]: any }) {\n  const snap: Snapshot = {\n    name: snapshotName,\n    timestamp: Date.now(),\n    doc\n  }\n  snapshots.update(val => [snap, ...val])\n}\n\nexport function importSnapshot(\n  snapshotName: string,\n  json: { [key: string]: unknown },\n  schema: Schema\n) {\n  const doc = schema.nodeFromJSON(json)\n  const snap: Snapshot = {\n    name: snapshotName,\n    timestamp: Date.now(),\n    doc: doc.toJSON()\n  }\n  snapshots.update(val => [snap, ...val])\n}\n\nexport function updateSnapshot(snapshot: Snapshot) {\n  snapshots.update(val =>\n    val.map(s => {\n      if (s.timestamp === snapshot.timestamp) {\n        return snapshot\n      }\n      return s\n    })\n  )\n}\n\nexport function toggleViewSnapshot(view: EditorView, snap?: Snapshot) {\n  if (snap) {\n    const prevState = get(previousEditorState)\n    if (!prevState) previousEditorState.set(view.state)\n    setEditorDoc(view, snap.doc)\n  } else {\n    const prevState = get(previousEditorState)\n    if (!prevState) {\n      console.error('No previous state to restore!')\n    } else {\n      view.updateState(prevState)\n    }\n    previousEditorState.set(undefined)\n  }\n  selectedSnapshot.set(snap)\n}\n\nexport function restoreSnapshot(view: EditorView, snap: Snapshot) {\n  setEditorDoc(view, snap.doc)\n  previousEditorState.set(undefined)\n  selectedSnapshot.set(undefined)\n}\n\nexport function exportSnapshot(snapshot: Snapshot) {\n  const a = document.createElement('a')\n  const file = new Blob([JSON.stringify(snapshot.doc)], { type: 'application/json' })\n  a.href = URL.createObjectURL(file)\n  a.download = `${snapshot.name}.json`\n  a.click()\n}\n\nexport function deleteSnapshot(snapshot: Snapshot) {\n  snapshots.update(val => val.filter(s => s.timestamp !== snapshot.timestamp))\n  const selected = get(selectedSnapshot)\n  if (selected?.timestamp === snapshot.timestamp) {\n    selectedSnapshot.set(undefined)\n  }\n}\n","<script lang=\"ts\">\n  export let active: string, onClickTab: (tab: string) => void\n</script>\n\n<ul class=\"tabs-menu\">\n  <li>\n    <button class:active={active === 'state'} on:click={() => onClickTab('state')}>STATE</button>\n  </li>\n  <li>\n    <button class:active={active === 'history'} on:click={() => onClickTab('history')}\n      >HISTORY</button\n    >\n  </li>\n  <li>\n    <button class:active={active === 'plugins'} on:click={() => onClickTab('plugins')}\n      >PLUGINS</button\n    >\n  </li>\n  <li>\n    <button class:active={active === 'schema'} on:click={() => onClickTab('schema')}>SCHEMA</button>\n  </li>\n  <li>\n    <button class:active={active === 'structure'} on:click={() => onClickTab('structure')}\n      >STRUCTURE</button\n    >\n  </li>\n  <li>\n    <button class:active={active === 'snapshots'} on:click={() => onClickTab('snapshots')}\n      >SNAPSHOTS</button\n    >\n  </li>\n</ul>\n\n<style lang=\"scss\">\n  ul {\n    display: flex;\n    list-style: none;\n    margin: 0;\n    overflow-x: scroll;\n    padding: 0;\n  }\n  button {\n    background: transparent;\n    border: 0;\n    border-bottom: 2px solid transparent;\n    color: $color-white;\n    cursor: pointer;\n    height: 100%;\n    padding: 1em;\n    &:hover {\n      background: rgba($color-white, 0.05);\n    }\n    &.active {\n      border-bottom: 2px solid $color-red-light;\n    }\n  }\n</style>\n","/**\n * Diff Match and Patch\n * Copyright 2018 The diff-match-patch Authors.\n * https://github.com/google/diff-match-patch\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n */\n\n/**\n * Class containing the diff, match and patch methods.\n * @constructor\n */\nvar diff_match_patch = function() {\n\n  // Defaults.\n  // Redefine these in your program to override the defaults.\n\n  // Number of seconds to map a diff before giving up (0 for infinity).\n  this.Diff_Timeout = 1.0;\n  // Cost of an empty edit operation in terms of edit characters.\n  this.Diff_EditCost = 4;\n  // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n  this.Match_Threshold = 0.5;\n  // How far to search for a match (0 = exact location, 1000+ = broad match).\n  // A match this many characters away from the expected location will add\n  // 1.0 to the score (0.0 is a perfect match).\n  this.Match_Distance = 1000;\n  // When deleting a large block of text (over ~64 characters), how close do\n  // the contents have to be to match the expected contents. (0.0 = perfection,\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\n  // end points of a delete need to match.\n  this.Patch_DeleteThreshold = 0.5;\n  // Chunk size for context length.\n  this.Patch_Margin = 4;\n\n  // The number of bits in an int.\n  this.Match_MaxBits = 32;\n};\n\n\n//  DIFF FUNCTIONS\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Class representing one diff tuple.\n * ~Attempts to look like a two-element array (which is what this used to be).~\n * Constructor returns an actual two-element array, to allow destructing @JackuB\n * See https://github.com/JackuB/diff-match-patch/issues/14 for details\n * @param {number} op Operation, one of: DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL.\n * @param {string} text Text to be deleted, inserted, or retained.\n * @constructor\n */\ndiff_match_patch.Diff = function(op, text) {\n  return [op, text];\n};\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean=} opt_checklines Optional speedup flag. If present and false,\n *     then don't run a line-level diff first to identify the changed areas.\n *     Defaults to true, which does a faster, slightly less optimal diff.\n * @param {number=} opt_deadline Optional time when the diff should be complete\n *     by.  Used internally for recursive calls.  Users should set DiffTimeout\n *     instead.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_main = function(text1, text2, opt_checklines,\n    opt_deadline) {\n  // Set a deadline by which time the diff must be complete.\n  if (typeof opt_deadline == 'undefined') {\n    if (this.Diff_Timeout <= 0) {\n      opt_deadline = Number.MAX_VALUE;\n    } else {\n      opt_deadline = (new Date).getTime() + this.Diff_Timeout * 1000;\n    }\n  }\n  var deadline = opt_deadline;\n\n  // Check for null inputs.\n  if (text1 == null || text2 == null) {\n    throw new Error('Null input. (diff_main)');\n  }\n\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [new diff_match_patch.Diff(DIFF_EQUAL, text1)];\n    }\n    return [];\n  }\n\n  if (typeof opt_checklines == 'undefined') {\n    opt_checklines = true;\n  }\n  var checklines = opt_checklines;\n\n  // Trim off common prefix (speedup).\n  var commonlength = this.diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = this.diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, commonprefix));\n  }\n  if (commonsuffix) {\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, commonsuffix));\n  }\n  this.diff_cleanupMerge(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_compute_ = function(text1, text2, checklines,\n    deadline) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1)];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(0, i)),\n             new diff_match_patch.Diff(DIFF_EQUAL, shorttext),\n             new diff_match_patch.Diff(DIFF_INSERT,\n                 longtext.substring(i + shorttext.length))];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1),\n            new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = this.diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline);\n    // Merge the results.\n    return diffs_a.concat([new diff_match_patch.Diff(DIFF_EQUAL, mid_common)],\n                          diffs_b);\n  }\n\n  if (checklines && text1.length > 100 && text2.length > 100) {\n    return this.diff_lineMode_(text1, text2, deadline);\n  }\n\n  return this.diff_bisect_(text1, text2, deadline);\n};\n\n\n/**\n * Do a quick line-level diff on both strings, then rediff the parts for\n * greater accuracy.\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_lineMode_ = function(text1, text2, deadline) {\n  // Scan the text on a line-by-line basis first.\n  var a = this.diff_linesToChars_(text1, text2);\n  text1 = a.chars1;\n  text2 = a.chars2;\n  var linearray = a.lineArray;\n\n  var diffs = this.diff_main(text1, text2, false, deadline);\n\n  // Convert the diff back to original text.\n  this.diff_charsToLines_(diffs, linearray);\n  // Eliminate freak matches (e.g. blank lines)\n  this.diff_cleanupSemantic(diffs);\n\n  // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete >= 1 && count_insert >= 1) {\n          // Delete the offending records and add the merged ones.\n          diffs.splice(pointer - count_delete - count_insert,\n                       count_delete + count_insert);\n          pointer = pointer - count_delete - count_insert;\n          var subDiff =\n              this.diff_main(text_delete, text_insert, false, deadline);\n          for (var j = subDiff.length - 1; j >= 0; j--) {\n            diffs.splice(pointer, 0, subDiff[j]);\n          }\n          pointer = pointer + subDiff.length;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n    pointer++;\n  }\n  diffs.pop();  // Remove the dummy entry at the end.\n\n  return diffs;\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_bisect_ = function(text1, text2, deadline) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 != 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Bail out if deadline is reached.\n    if ((new Date()).getTime() > deadline) {\n      break;\n    }\n\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length &&\n             text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length &&\n             text1.charAt(text1_length - x2 - 1) ==\n             text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [new diff_match_patch.Diff(DIFF_DELETE, text1),\n          new diff_match_patch.Diff(DIFF_INSERT, text2)];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_bisectSplit_ = function(text1, text2, x, y,\n    deadline) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\n *     An object containing the encoded text1, the encoded text2 and\n *     the array of unique strings.\n *     The zeroth element of the array of unique strings is intentionally blank.\n * @private\n */\ndiff_match_patch.prototype.diff_linesToChars_ = function(text1, text2) {\n  var lineArray = [];  // e.g. lineArray[4] == 'Hello\\n'\n  var lineHash = {};   // e.g. lineHash['Hello\\n'] == 4\n\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n  lineArray[0] = '';\n\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n  function diff_linesToCharsMunge_(text) {\n    var chars = '';\n    // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n    var lineStart = 0;\n    var lineEnd = -1;\n    // Keeping our own length variable is faster than looking it up.\n    var lineArrayLength = lineArray.length;\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart);\n      if (lineEnd == -1) {\n        lineEnd = text.length - 1;\n      }\n      var line = text.substring(lineStart, lineEnd + 1);\n\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) :\n          (lineHash[line] !== undefined)) {\n        chars += String.fromCharCode(lineHash[line]);\n      } else {\n        if (lineArrayLength == maxLines) {\n          // Bail out at 65535 because\n          // String.fromCharCode(65536) == String.fromCharCode(0)\n          line = text.substring(lineStart);\n          lineEnd = text.length;\n        }\n        chars += String.fromCharCode(lineArrayLength);\n        lineHash[line] = lineArrayLength;\n        lineArray[lineArrayLength++] = line;\n      }\n      lineStart = lineEnd + 1;\n    }\n    return chars;\n  }\n  // Allocate 2/3rds of the space for text1, the rest for text2.\n  var maxLines = 40000;\n  var chars1 = diff_linesToCharsMunge_(text1);\n  maxLines = 65535;\n  var chars2 = diff_linesToCharsMunge_(text2);\n  return {chars1: chars1, chars2: chars2, lineArray: lineArray};\n};\n\n\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of\n * text.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {!Array.<string>} lineArray Array of unique strings.\n * @private\n */\ndiff_match_patch.prototype.diff_charsToLines_ = function(diffs, lineArray) {\n  for (var i = 0; i < diffs.length; i++) {\n    var chars = diffs[i][1];\n    var text = [];\n    for (var j = 0; j < chars.length; j++) {\n      text[j] = lineArray[chars.charCodeAt(j)];\n    }\n    diffs[i][1] = text.join('');\n  }\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\ndiff_match_patch.prototype.diff_commonPrefix = function(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\ndiff_match_patch.prototype.diff_commonSuffix = function(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\ndiff_match_patch.prototype.diff_commonOverlap_ = function(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: https://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (found == 0 || text1.substring(text_length - length) ==\n        text2.substring(0, length)) {\n      best = length;\n      length++;\n    }\n  }\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n * @private\n */\ndiff_match_patch.prototype.diff_halfMatch_ = function(text1, text2) {\n  if (this.Diff_Timeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null;\n  }\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n  var dmp = this;  // 'this' becomes 'window' in a closure.\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i),\n                                               shorttext.substring(j));\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i),\n                                               shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemantic = function(diffs) {\n  var changes = false;\n  var equalities = [];  // Stack of indices where equalities are found.\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastEquality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0;  // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastEquality = diffs[pointer][1];\n    } else {  // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (lastEquality && (lastEquality.length <=\n          Math.max(length_insertions1, length_deletions1)) &&\n          (lastEquality.length <= Math.max(length_insertions2,\n                                           length_deletions2))) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0,\n                     new diff_match_patch.Diff(DIFF_DELETE, lastEquality));\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0;  // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastEquality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n  this.diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] == DIFF_DELETE &&\n        diffs[pointer][0] == DIFF_INSERT) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (overlap_length1 >= deletion.length / 2 ||\n            overlap_length1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL,\n              insertion.substring(0, overlap_length1)));\n          diffs[pointer - 1][1] =\n              deletion.substring(0, deletion.length - overlap_length1);\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (overlap_length2 >= deletion.length / 2 ||\n            overlap_length2 >= insertion.length / 2) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL,\n              deletion.substring(0, overlap_length2)));\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] =\n              insertion.substring(0, insertion.length - overlap_length2);\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] =\n              deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n};\n\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function(diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 &&\n        char1.match(diff_match_patch.whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 &&\n        char2.match(diff_match_patch.whitespaceRegex_);\n    var lineBreak1 = whitespace1 &&\n        char1.match(diff_match_patch.linebreakRegex_);\n    var lineBreak2 = whitespace2 &&\n        char2.match(diff_match_patch.linebreakRegex_);\n    var blankLine1 = lineBreak1 &&\n        one.match(diff_match_patch.blanklineEndRegex_);\n    var blankLine2 = lineBreak2 &&\n        two.match(diff_match_patch.blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) +\n          diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score = diff_cleanupSemanticScore_(equality1, edit) +\n            diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n};\n\n// Define some regex patterns for matching boundaries.\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\ndiff_match_patch.whitespaceRegex_ = /\\s/;\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupEfficiency = function(diffs) {\n  var changes = false;\n  var equalities = [];  // Stack of indices where equalities are found.\n  var equalitiesLength = 0;  // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastEquality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0;  // Index of current position.\n  // Is there an insertion operation before the last equality.\n  var pre_ins = false;\n  // Is there a deletion operation before the last equality.\n  var pre_del = false;\n  // Is there an insertion operation after the last equality.\n  var post_ins = false;\n  // Is there a deletion operation after the last equality.\n  var post_del = false;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {  // Equality found.\n      if (diffs[pointer][1].length < this.Diff_EditCost &&\n          (post_ins || post_del)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer;\n        pre_ins = post_ins;\n        pre_del = post_del;\n        lastEquality = diffs[pointer][1];\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0;\n        lastEquality = null;\n      }\n      post_ins = post_del = false;\n    } else {  // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_DELETE) {\n        post_del = true;\n      } else {\n        post_ins = true;\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n      if (lastEquality && ((pre_ins && pre_del && post_ins && post_del) ||\n                           ((lastEquality.length < this.Diff_EditCost / 2) &&\n                            (pre_ins + pre_del + post_ins + post_del) == 3))) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0,\n                     new diff_match_patch.Diff(DIFF_DELETE, lastEquality));\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        equalitiesLength--;  // Throw away the equality we just deleted;\n        lastEquality = null;\n        if (pre_ins && pre_del) {\n          // No changes made which could affect previous entry, keep going.\n          post_ins = post_del = true;\n          equalitiesLength = 0;\n        } else {\n          equalitiesLength--;  // Throw away the previous equality.\n          pointer = equalitiesLength > 0 ?\n              equalities[equalitiesLength - 1] : -1;\n          post_ins = post_del = false;\n        }\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupMerge = function(diffs) {\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, new diff_match_patch.Diff(DIFF_EQUAL,\n                    text_insert.substring(0, commonlength)));\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          pointer -= count_delete + count_insert;\n          diffs.splice(pointer, count_delete + count_insert);\n          if (text_delete.length) {\n            diffs.splice(pointer, 0,\n                new diff_match_patch.Diff(DIFF_DELETE, text_delete));\n            pointer++;\n          }\n          if (text_insert.length) {\n            diffs.splice(pointer, 0,\n                new diff_match_patch.Diff(DIFF_INSERT, text_insert));\n            pointer++;\n          }\n          pointer++;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n\n/**\n * loc is a location in text1, compute and return the equivalent location in\n * text2.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {number} loc Location within text1.\n * @return {number} Location within text2.\n */\ndiff_match_patch.prototype.diff_xIndex = function(diffs, loc) {\n  var chars1 = 0;\n  var chars2 = 0;\n  var last_chars1 = 0;\n  var last_chars2 = 0;\n  var x;\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {  // Equality or deletion.\n      chars1 += diffs[x][1].length;\n    }\n    if (diffs[x][0] !== DIFF_DELETE) {  // Equality or insertion.\n      chars2 += diffs[x][1].length;\n    }\n    if (chars1 > loc) {  // Overshot the location.\n      break;\n    }\n    last_chars1 = chars1;\n    last_chars2 = chars2;\n  }\n  // Was the location was deleted?\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\n    return last_chars2;\n  }\n  // Add the remaining character length.\n  return last_chars2 + (loc - last_chars1);\n};\n\n\n/**\n * Convert a diff array into a pretty HTML report.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} HTML representation.\n */\ndiff_match_patch.prototype.diff_prettyHtml = function(diffs) {\n  var html = [];\n  var pattern_amp = /&/g;\n  var pattern_lt = /</g;\n  var pattern_gt = />/g;\n  var pattern_para = /\\n/g;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];    // Operation (insert, delete, equal)\n    var data = diffs[x][1];  // Text of change.\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;')\n        .replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\n    switch (op) {\n      case DIFF_INSERT:\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\n        break;\n      case DIFF_DELETE:\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\n        break;\n      case DIFF_EQUAL:\n        html[x] = '<span>' + text + '</span>';\n        break;\n    }\n  }\n  return html.join('');\n};\n\n\n/**\n * Compute and return the source text (all equalities and deletions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Source text.\n */\ndiff_match_patch.prototype.diff_text1 = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n\n/**\n * Compute and return the destination text (all equalities and insertions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Destination text.\n */\ndiff_match_patch.prototype.diff_text2 = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {number} Number of changes.\n */\ndiff_match_patch.prototype.diff_levenshtein = function(diffs) {\n  var levenshtein = 0;\n  var insertions = 0;\n  var deletions = 0;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];\n    var data = diffs[x][1];\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length;\n        break;\n      case DIFF_DELETE:\n        deletions += data.length;\n        break;\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        levenshtein += Math.max(insertions, deletions);\n        insertions = 0;\n        deletions = 0;\n        break;\n    }\n  }\n  levenshtein += Math.max(insertions, deletions);\n  return levenshtein;\n};\n\n\n/**\n * Crush the diff into an encoded string which describes the operations\n * required to transform text1 into text2.\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Delta text.\n */\ndiff_match_patch.prototype.diff_toDelta = function(diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        text[x] = '+' + encodeURI(diffs[x][1]);\n        break;\n      case DIFF_DELETE:\n        text[x] = '-' + diffs[x][1].length;\n        break;\n      case DIFF_EQUAL:\n        text[x] = '=' + diffs[x][1].length;\n        break;\n    }\n  }\n  return text.join('\\t').replace(/%20/g, ' ');\n};\n\n\n/**\n * Given the original text1, and an encoded string which describes the\n * operations required to transform text1 into text2, compute the full diff.\n * @param {string} text1 Source string for the diff.\n * @param {string} delta Delta text.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @throws {!Error} If invalid input.\n */\ndiff_match_patch.prototype.diff_fromDelta = function(text1, delta) {\n  var diffs = [];\n  var diffsLength = 0;  // Keeping our own length var is faster in JS.\n  var pointer = 0;  // Cursor in text1\n  var tokens = delta.split(/\\t/g);\n  for (var x = 0; x < tokens.length; x++) {\n    // Each token begins with a one character parameter which specifies the\n    // operation of this token (delete, insert, equality).\n    var param = tokens[x].substring(1);\n    switch (tokens[x].charAt(0)) {\n      case '+':\n        try {\n          diffs[diffsLength++] =\n              new diff_match_patch.Diff(DIFF_INSERT, decodeURI(param));\n        } catch (ex) {\n          // Malformed URI sequence.\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\n        }\n        break;\n      case '-':\n        // Fall through.\n      case '=':\n        var n = parseInt(param, 10);\n        if (isNaN(n) || n < 0) {\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\n        }\n        var text = text1.substring(pointer, pointer += n);\n        if (tokens[x].charAt(0) == '=') {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_EQUAL, text);\n        } else {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_DELETE, text);\n        }\n        break;\n      default:\n        // Blank tokens are ok (from a trailing \\t).\n        // Anything else is an error.\n        if (tokens[x]) {\n          throw new Error('Invalid diff operation in diff_fromDelta: ' +\n                          tokens[x]);\n        }\n    }\n  }\n  if (pointer != text1.length) {\n    throw new Error('Delta length (' + pointer +\n        ') does not equal source text length (' + text1.length + ').');\n  }\n  return diffs;\n};\n\n\n//  MATCH FUNCTIONS\n\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n */\ndiff_match_patch.prototype.match_main = function(text, pattern, loc) {\n  // Check for null inputs.\n  if (text == null || pattern == null || loc == null) {\n    throw new Error('Null input. (match_main)');\n  }\n\n  loc = Math.max(0, Math.min(loc, text.length));\n  if (text == pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0;\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1;\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc;\n  } else {\n    // Do a fuzzy compare.\n    return this.match_bitap_(text, pattern, loc);\n  }\n};\n\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n * @private\n */\ndiff_match_patch.prototype.match_bitap_ = function(text, pattern, loc) {\n  if (pattern.length > this.Match_MaxBits) {\n    throw new Error('Pattern too long for this browser.');\n  }\n\n  // Initialise the alphabet.\n  var s = this.match_alphabet_(pattern);\n\n  var dmp = this;  // 'this' becomes 'window' in a closure.\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n  function match_bitapScore_(e, x) {\n    var accuracy = e / pattern.length;\n    var proximity = Math.abs(loc - x);\n    if (!dmp.Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy;\n    }\n    return accuracy + (proximity / dmp.Match_Distance);\n  }\n\n  // Highest score beyond which we give up.\n  var score_threshold = this.Match_Threshold;\n  // Is there a nearby exact match? (speedup)\n  var best_loc = text.indexOf(pattern, loc);\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    // What about in the other direction? (speedup)\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n    if (best_loc != -1) {\n      score_threshold =\n          Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    }\n  }\n\n  // Initialise the bit arrays.\n  var matchmask = 1 << (pattern.length - 1);\n  best_loc = -1;\n\n  var bin_min, bin_mid;\n  var bin_max = pattern.length + text.length;\n  var last_rd;\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0;\n    bin_mid = bin_max;\n    while (bin_min < bin_mid) {\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid;\n      } else {\n        bin_max = bin_mid;\n      }\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n    }\n    // Use the result from this iteration as the maximum for the next.\n    bin_max = bin_mid;\n    var start = Math.max(1, loc - bin_mid + 1);\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n\n    var rd = Array(finish + 2);\n    rd[finish + 1] = (1 << d) - 1;\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)];\n      if (d === 0) {  // First pass: exact match.\n        rd[j] = ((rd[j + 1] << 1) | 1) & charMatch;\n      } else {  // Subsequent passes: fuzzy match.\n        rd[j] = (((rd[j + 1] << 1) | 1) & charMatch) |\n                (((last_rd[j + 1] | last_rd[j]) << 1) | 1) |\n                last_rd[j + 1];\n      }\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore_(d, j - 1);\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score;\n          best_loc = j - 1;\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc);\n          } else {\n            // Already passed loc, downhill from here on in.\n            break;\n          }\n        }\n      }\n    }\n    // No hope for a (better) match at greater error levels.\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\n      break;\n    }\n    last_rd = rd;\n  }\n  return best_loc;\n};\n\n\n/**\n * Initialise the alphabet for the Bitap algorithm.\n * @param {string} pattern The text to encode.\n * @return {!Object} Hash of character locations.\n * @private\n */\ndiff_match_patch.prototype.match_alphabet_ = function(pattern) {\n  var s = {};\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0;\n  }\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << (pattern.length - i - 1);\n  }\n  return s;\n};\n\n\n//  PATCH FUNCTIONS\n\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond Match_MaxBits.\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\n * @param {string} text Source text.\n * @private\n */\ndiff_match_patch.prototype.patch_addContext_ = function(patch, text) {\n  if (text.length == 0) {\n    return;\n  }\n  if (patch.start2 === null) {\n    throw Error('patch not initialized');\n  }\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n  var padding = 0;\n\n  // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) &&\n         pattern.length < this.Match_MaxBits - this.Patch_Margin -\n         this.Patch_Margin) {\n    padding += this.Patch_Margin;\n    pattern = text.substring(patch.start2 - padding,\n                             patch.start2 + patch.length1 + padding);\n  }\n  // Add one chunk for good luck.\n  padding += this.Patch_Margin;\n\n  // Add the prefix.\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\n  if (prefix) {\n    patch.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, prefix));\n  }\n  // Add the suffix.\n  var suffix = text.substring(patch.start2 + patch.length1,\n                              patch.start2 + patch.length1 + padding);\n  if (suffix) {\n    patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, suffix));\n  }\n\n  // Roll back the start points.\n  patch.start1 -= prefix.length;\n  patch.start2 -= prefix.length;\n  // Extend the lengths.\n  patch.length1 += prefix.length + suffix.length;\n  patch.length2 += prefix.length + suffix.length;\n};\n\n\n/**\n * Compute a list of patches to turn text1 into text2.\n * Use diffs if provided, otherwise compute it ourselves.\n * There are four ways to call this function, depending on what data is\n * available to the caller:\n * Method 1:\n * a = text1, b = text2\n * Method 2:\n * a = diffs\n * Method 3 (optimal):\n * a = text1, b = diffs\n * Method 4 (deprecated, use method 3):\n * a = text1, b = text2, c = diffs\n *\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\n * Array of diff tuples for text1 to text2 (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_b text2 (methods 1,4) or\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_c Array of diff tuples\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_make = function(a, opt_b, opt_c) {\n  var text1, diffs;\n  if (typeof a == 'string' && typeof opt_b == 'string' &&\n      typeof opt_c == 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 = /** @type {string} */(a);\n    diffs = this.diff_main(text1, /** @type {string} */(opt_b), true);\n    if (diffs.length > 2) {\n      this.diff_cleanupSemantic(diffs);\n      this.diff_cleanupEfficiency(diffs);\n    }\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' &&\n      typeof opt_c == 'undefined') {\n    // Method 2: diffs\n    // Compute text1 from diffs.\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(a);\n    text1 = this.diff_text1(diffs);\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' &&\n      typeof opt_c == 'undefined') {\n    // Method 3: text1, diffs\n    text1 = /** @type {string} */(a);\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_b);\n  } else if (typeof a == 'string' && typeof opt_b == 'string' &&\n      opt_c && typeof opt_c == 'object') {\n    // Method 4: text1, text2, diffs\n    // text2 is not used.\n    text1 = /** @type {string} */(a);\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */(opt_c);\n  } else {\n    throw new Error('Unknown call format to patch_make.');\n  }\n\n  if (diffs.length === 0) {\n    return [];  // Get rid of the null case.\n  }\n  var patches = [];\n  var patch = new diff_match_patch.patch_obj();\n  var patchDiffLength = 0;  // Keeping our own length var is faster in JS.\n  var char_count1 = 0;  // Number of characters into the text1 string.\n  var char_count2 = 0;  // Number of characters into the text2 string.\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\n  // context info.\n  var prepatch_text = text1;\n  var postpatch_text = text1;\n  for (var x = 0; x < diffs.length; x++) {\n    var diff_type = diffs[x][0];\n    var diff_text = diffs[x][1];\n\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = char_count1;\n      patch.start2 = char_count2;\n    }\n\n    switch (diff_type) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = diffs[x];\n        patch.length2 += diff_text.length;\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text +\n                         postpatch_text.substring(char_count2);\n        break;\n      case DIFF_DELETE:\n        patch.length1 += diff_text.length;\n        patch.diffs[patchDiffLength++] = diffs[x];\n        postpatch_text = postpatch_text.substring(0, char_count2) +\n                         postpatch_text.substring(char_count2 +\n                             diff_text.length);\n        break;\n      case DIFF_EQUAL:\n        if (diff_text.length <= 2 * this.Patch_Margin &&\n            patchDiffLength && diffs.length != x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = diffs[x];\n          patch.length1 += diff_text.length;\n          patch.length2 += diff_text.length;\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            this.patch_addContext_(patch, prepatch_text);\n            patches.push(patch);\n            patch = new diff_match_patch.patch_obj();\n            patchDiffLength = 0;\n            // Unlike Unidiff, our patch lists have a rolling context.\n            // https://github.com/google/diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n            prepatch_text = postpatch_text;\n            char_count1 = char_count2;\n          }\n        }\n        break;\n    }\n\n    // Update the current character count.\n    if (diff_type !== DIFF_INSERT) {\n      char_count1 += diff_text.length;\n    }\n    if (diff_type !== DIFF_DELETE) {\n      char_count2 += diff_text.length;\n    }\n  }\n  // Pick up the leftover patch if not empty.\n  if (patchDiffLength) {\n    this.patch_addContext_(patch, prepatch_text);\n    patches.push(patch);\n  }\n\n  return patches;\n};\n\n\n/**\n * Given an array of patches, return another array that is identical.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_deepCopy = function(patches) {\n  // Making deep copies is hard in JavaScript.\n  var patchesCopy = [];\n  for (var x = 0; x < patches.length; x++) {\n    var patch = patches[x];\n    var patchCopy = new diff_match_patch.patch_obj();\n    patchCopy.diffs = [];\n    for (var y = 0; y < patch.diffs.length; y++) {\n      patchCopy.diffs[y] =\n          new diff_match_patch.Diff(patch.diffs[y][0], patch.diffs[y][1]);\n    }\n    patchCopy.start1 = patch.start1;\n    patchCopy.start2 = patch.start2;\n    patchCopy.length1 = patch.length1;\n    patchCopy.length2 = patch.length2;\n    patchesCopy[x] = patchCopy;\n  }\n  return patchesCopy;\n};\n\n\n/**\n * Merge a set of patches onto the text.  Return a patched text, as well\n * as a list of true/false values indicating which patches were applied.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @param {string} text Old text.\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\n *      new text and an array of boolean values.\n */\ndiff_match_patch.prototype.patch_apply = function(patches, text) {\n  if (patches.length == 0) {\n    return [text, []];\n  }\n\n  // Deep copy the patches so that no changes are made to originals.\n  patches = this.patch_deepCopy(patches);\n\n  var nullPadding = this.patch_addPadding(patches);\n  text = nullPadding + text + nullPadding;\n\n  this.patch_splitMax(patches);\n  // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n  var delta = 0;\n  var results = [];\n  for (var x = 0; x < patches.length; x++) {\n    var expected_loc = patches[x].start2 + delta;\n    var text1 = this.diff_text1(patches[x].diffs);\n    var start_loc;\n    var end_loc = -1;\n    if (text1.length > this.Match_MaxBits) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits),\n                                  expected_loc);\n      if (start_loc != -1) {\n        end_loc = this.match_main(text,\n            text1.substring(text1.length - this.Match_MaxBits),\n            expected_loc + text1.length - this.Match_MaxBits);\n        if (end_loc == -1 || start_loc >= end_loc) {\n          // Can't find valid trailing context.  Drop this patch.\n          start_loc = -1;\n        }\n      }\n    } else {\n      start_loc = this.match_main(text, text1, expected_loc);\n    }\n    if (start_loc == -1) {\n      // No match found.  :(\n      results[x] = false;\n      // Subtract the delta for this failed patch from subsequent patches.\n      delta -= patches[x].length2 - patches[x].length1;\n    } else {\n      // Found a match.  :)\n      results[x] = true;\n      delta = start_loc - expected_loc;\n      var text2;\n      if (end_loc == -1) {\n        text2 = text.substring(start_loc, start_loc + text1.length);\n      } else {\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\n      }\n      if (text1 == text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, start_loc) +\n               this.diff_text2(patches[x].diffs) +\n               text.substring(start_loc + text1.length);\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        var diffs = this.diff_main(text1, text2, false);\n        if (text1.length > this.Match_MaxBits &&\n            this.diff_levenshtein(diffs) / text1.length >\n            this.Patch_DeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false;\n        } else {\n          this.diff_cleanupSemanticLossless(diffs);\n          var index1 = 0;\n          var index2;\n          for (var y = 0; y < patches[x].diffs.length; y++) {\n            var mod = patches[x].diffs[y];\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = this.diff_xIndex(diffs, index1);\n            }\n            if (mod[0] === DIFF_INSERT) {  // Insertion\n              text = text.substring(0, start_loc + index2) + mod[1] +\n                     text.substring(start_loc + index2);\n            } else if (mod[0] === DIFF_DELETE) {  // Deletion\n              text = text.substring(0, start_loc + index2) +\n                     text.substring(start_loc + this.diff_xIndex(diffs,\n                         index1 + mod[1].length));\n            }\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length;\n            }\n          }\n        }\n      }\n    }\n  }\n  // Strip the padding off.\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\n  return [text, results];\n};\n\n\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} The padding string added to each side.\n */\ndiff_match_patch.prototype.patch_addPadding = function(patches) {\n  var paddingLength = this.Patch_Margin;\n  var nullPadding = '';\n  for (var x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x);\n  }\n\n  // Bump all the patches forward.\n  for (var x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength;\n    patches[x].start2 += paddingLength;\n  }\n\n  // Add some padding on start of first diff.\n  var patch = patches[0];\n  var diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.start1 -= paddingLength;  // Should be 0.\n    patch.start2 -= paddingLength;  // Should be 0.\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    var extraLength = paddingLength - diffs[0][1].length;\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n    patch.start1 -= extraLength;\n    patch.start2 -= extraLength;\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  // Add some padding on end of last diff.\n  patch = patches[patches.length - 1];\n  diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  return nullPadding;\n};\n\n\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_splitMax = function(patches) {\n  var patch_size = this.Match_MaxBits;\n  for (var x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patch_size) {\n      continue;\n    }\n    var bigpatch = patches[x];\n    // Remove the big old patch.\n    patches.splice(x--, 1);\n    var start1 = bigpatch.start1;\n    var start2 = bigpatch.start2;\n    var precontext = '';\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      var patch = new diff_match_patch.patch_obj();\n      var empty = true;\n      patch.start1 = start1 - precontext.length;\n      patch.start2 = start2 - precontext.length;\n      if (precontext !== '') {\n        patch.length1 = patch.length2 = precontext.length;\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, precontext));\n      }\n      while (bigpatch.diffs.length !== 0 &&\n             patch.length1 < patch_size - this.Patch_Margin) {\n        var diff_type = bigpatch.diffs[0][0];\n        var diff_text = bigpatch.diffs[0][1];\n        if (diff_type === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diff_text.length;\n          start2 += diff_text.length;\n          patch.diffs.push(bigpatch.diffs.shift());\n          empty = false;\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 &&\n                   patch.diffs[0][0] == DIFF_EQUAL &&\n                   diff_text.length > 2 * patch_size) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          empty = false;\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          bigpatch.diffs.shift();\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diff_text = diff_text.substring(0,\n              patch_size - patch.length1 - this.Patch_Margin);\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          if (diff_type === DIFF_EQUAL) {\n            patch.length2 += diff_text.length;\n            start2 += diff_text.length;\n          } else {\n            empty = false;\n          }\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          if (diff_text == bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift();\n          } else {\n            bigpatch.diffs[0][1] =\n                bigpatch.diffs[0][1].substring(diff_text.length);\n          }\n        }\n      }\n      // Compute the head context for the next patch.\n      precontext = this.diff_text2(patch.diffs);\n      precontext =\n          precontext.substring(precontext.length - this.Patch_Margin);\n      // Append the end context for this patch.\n      var postcontext = this.diff_text1(bigpatch.diffs)\n                            .substring(0, this.Patch_Margin);\n      if (postcontext !== '') {\n        patch.length1 += postcontext.length;\n        patch.length2 += postcontext.length;\n        if (patch.diffs.length !== 0 &&\n            patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\n        } else {\n          patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, postcontext));\n        }\n      }\n      if (!empty) {\n        patches.splice(++x, 0, patch);\n      }\n    }\n  }\n};\n\n\n/**\n * Take a list of patches and return a textual representation.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} Text representation of patches.\n */\ndiff_match_patch.prototype.patch_toText = function(patches) {\n  var text = [];\n  for (var x = 0; x < patches.length; x++) {\n    text[x] = patches[x];\n  }\n  return text.join('');\n};\n\n\n/**\n * Parse a textual representation of patches and return a list of Patch objects.\n * @param {string} textline Text representation of patches.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n * @throws {!Error} If invalid input.\n */\ndiff_match_patch.prototype.patch_fromText = function(textline) {\n  var patches = [];\n  if (!textline) {\n    return patches;\n  }\n  var text = textline.split('\\n');\n  var textPointer = 0;\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\n  while (textPointer < text.length) {\n    var m = text[textPointer].match(patchHeader);\n    if (!m) {\n      throw new Error('Invalid patch string: ' + text[textPointer]);\n    }\n    var patch = new diff_match_patch.patch_obj();\n    patches.push(patch);\n    patch.start1 = parseInt(m[1], 10);\n    if (m[2] === '') {\n      patch.start1--;\n      patch.length1 = 1;\n    } else if (m[2] == '0') {\n      patch.length1 = 0;\n    } else {\n      patch.start1--;\n      patch.length1 = parseInt(m[2], 10);\n    }\n\n    patch.start2 = parseInt(m[3], 10);\n    if (m[4] === '') {\n      patch.start2--;\n      patch.length2 = 1;\n    } else if (m[4] == '0') {\n      patch.length2 = 0;\n    } else {\n      patch.start2--;\n      patch.length2 = parseInt(m[4], 10);\n    }\n    textPointer++;\n\n    while (textPointer < text.length) {\n      var sign = text[textPointer].charAt(0);\n      try {\n        var line = decodeURI(text[textPointer].substring(1));\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error('Illegal escape in patch_fromText: ' + line);\n      }\n      if (sign == '-') {\n        // Deletion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_DELETE, line));\n      } else if (sign == '+') {\n        // Insertion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_INSERT, line));\n      } else if (sign == ' ') {\n        // Minor equality.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, line));\n      } else if (sign == '@') {\n        // Start of next patch.\n        break;\n      } else if (sign === '') {\n        // Blank line?  Whatever.\n      } else {\n        // WTF?\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n      }\n      textPointer++;\n    }\n  }\n  return patches;\n};\n\n\n/**\n * Class representing one patch operation.\n * @constructor\n */\ndiff_match_patch.patch_obj = function() {\n  /** @type {!Array.<!diff_match_patch.Diff>} */\n  this.diffs = [];\n  /** @type {?number} */\n  this.start1 = null;\n  /** @type {?number} */\n  this.start2 = null;\n  /** @type {number} */\n  this.length1 = 0;\n  /** @type {number} */\n  this.length2 = 0;\n};\n\n\n/**\n * Emulate GNU diff's format.\n * Header: @@ -382,8 +481,9 @@\n * Indices are printed as 1-based, not 0-based.\n * @return {string} The GNU diff string.\n */\ndiff_match_patch.patch_obj.prototype.toString = function() {\n  var coords1, coords2;\n  if (this.length1 === 0) {\n    coords1 = this.start1 + ',0';\n  } else if (this.length1 == 1) {\n    coords1 = this.start1 + 1;\n  } else {\n    coords1 = (this.start1 + 1) + ',' + this.length1;\n  }\n  if (this.length2 === 0) {\n    coords2 = this.start2 + ',0';\n  } else if (this.length2 == 1) {\n    coords2 = this.start2 + 1;\n  } else {\n    coords2 = (this.start2 + 1) + ',' + this.length2;\n  }\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\n  var op;\n  // Escape the body of the patch with %xx notation.\n  for (var x = 0; x < this.diffs.length; x++) {\n    switch (this.diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+';\n        break;\n      case DIFF_DELETE:\n        op = '-';\n        break;\n      case DIFF_EQUAL:\n        op = ' ';\n        break;\n    }\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\n  }\n  return text.join('').replace(/%20/g, ' ');\n};\n\n\n// The following export code was added by @ForbesLindesay\nmodule.exports = diff_match_patch;\nmodule.exports['diff_match_patch'] = diff_match_patch;\nmodule.exports['DIFF_DELETE'] = DIFF_DELETE;\nmodule.exports['DIFF_INSERT'] = DIFF_INSERT;\nmodule.exports['DIFF_EQUAL'] = DIFF_EQUAL;","import dmp from 'diff-match-patch';\nimport chalk from 'chalk';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n\n\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nvar Processor = function () {\n  function Processor(options) {\n    classCallCheck(this, Processor);\n\n    this.selfOptions = options || {};\n    this.pipes = {};\n  }\n\n  createClass(Processor, [{\n    key: 'options',\n    value: function options(_options) {\n      if (_options) {\n        this.selfOptions = _options;\n      }\n      return this.selfOptions;\n    }\n  }, {\n    key: 'pipe',\n    value: function pipe(name, pipeArg) {\n      var pipe = pipeArg;\n      if (typeof name === 'string') {\n        if (typeof pipe === 'undefined') {\n          return this.pipes[name];\n        } else {\n          this.pipes[name] = pipe;\n        }\n      }\n      if (name && name.name) {\n        pipe = name;\n        if (pipe.processor === this) {\n          return pipe;\n        }\n        this.pipes[pipe.name] = pipe;\n      }\n      pipe.processor = this;\n      return pipe;\n    }\n  }, {\n    key: 'process',\n    value: function process(input, pipe) {\n      var context = input;\n      context.options = this.options();\n      var nextPipe = pipe || input.pipe || 'default';\n      var lastPipe = void 0;\n      var lastContext = void 0;\n      while (nextPipe) {\n        if (typeof context.nextAfterChildren !== 'undefined') {\n          // children processed and coming back to parent\n          context.next = context.nextAfterChildren;\n          context.nextAfterChildren = null;\n        }\n\n        if (typeof nextPipe === 'string') {\n          nextPipe = this.pipe(nextPipe);\n        }\n        nextPipe.process(context);\n        lastContext = context;\n        lastPipe = nextPipe;\n        nextPipe = null;\n        if (context) {\n          if (context.next) {\n            context = context.next;\n            nextPipe = lastContext.nextPipe || context.pipe || lastPipe;\n          }\n        }\n      }\n      return context.hasResult ? context.result : undefined;\n    }\n  }]);\n  return Processor;\n}();\n\nvar Pipe = function () {\n  function Pipe(name) {\n    classCallCheck(this, Pipe);\n\n    this.name = name;\n    this.filters = [];\n  }\n\n  createClass(Pipe, [{\n    key: 'process',\n    value: function process(input) {\n      if (!this.processor) {\n        throw new Error('add this pipe to a processor before using it');\n      }\n      var debug = this.debug;\n      var length = this.filters.length;\n      var context = input;\n      for (var index = 0; index < length; index++) {\n        var filter = this.filters[index];\n        if (debug) {\n          this.log('filter: ' + filter.filterName);\n        }\n        filter(context);\n        if ((typeof context === 'undefined' ? 'undefined' : _typeof(context)) === 'object' && context.exiting) {\n          context.exiting = false;\n          break;\n        }\n      }\n      if (!context.next && this.resultCheck) {\n        this.resultCheck(context);\n      }\n    }\n  }, {\n    key: 'log',\n    value: function log(msg) {\n      console.log('[jsondiffpatch] ' + this.name + ' pipe, ' + msg);\n    }\n  }, {\n    key: 'append',\n    value: function append() {\n      var _filters;\n\n      (_filters = this.filters).push.apply(_filters, arguments);\n      return this;\n    }\n  }, {\n    key: 'prepend',\n    value: function prepend() {\n      var _filters2;\n\n      (_filters2 = this.filters).unshift.apply(_filters2, arguments);\n      return this;\n    }\n  }, {\n    key: 'indexOf',\n    value: function indexOf(filterName) {\n      if (!filterName) {\n        throw new Error('a filter name is required');\n      }\n      for (var index = 0; index < this.filters.length; index++) {\n        var filter = this.filters[index];\n        if (filter.filterName === filterName) {\n          return index;\n        }\n      }\n      throw new Error('filter not found: ' + filterName);\n    }\n  }, {\n    key: 'list',\n    value: function list() {\n      return this.filters.map(function (f) {\n        return f.filterName;\n      });\n    }\n  }, {\n    key: 'after',\n    value: function after(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index + 1, 0);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'before',\n    value: function before(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index, 0);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'replace',\n    value: function replace(filterName) {\n      var index = this.indexOf(filterName);\n      var params = Array.prototype.slice.call(arguments, 1);\n      if (!params.length) {\n        throw new Error('a filter is required');\n      }\n      params.unshift(index, 1);\n      Array.prototype.splice.apply(this.filters, params);\n      return this;\n    }\n  }, {\n    key: 'remove',\n    value: function remove(filterName) {\n      var index = this.indexOf(filterName);\n      this.filters.splice(index, 1);\n      return this;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.filters.length = 0;\n      return this;\n    }\n  }, {\n    key: 'shouldHaveResult',\n    value: function shouldHaveResult(should) {\n      if (should === false) {\n        this.resultCheck = null;\n        return;\n      }\n      if (this.resultCheck) {\n        return;\n      }\n      var pipe = this;\n      this.resultCheck = function (context) {\n        if (!context.hasResult) {\n          console.log(context);\n          var error = new Error(pipe.name + ' failed');\n          error.noResult = true;\n          throw error;\n        }\n      };\n      return this;\n    }\n  }]);\n  return Pipe;\n}();\n\nvar Context = function () {\n  function Context() {\n    classCallCheck(this, Context);\n  }\n\n  createClass(Context, [{\n    key: 'setResult',\n    value: function setResult(result) {\n      this.result = result;\n      this.hasResult = true;\n      return this;\n    }\n  }, {\n    key: 'exit',\n    value: function exit() {\n      this.exiting = true;\n      return this;\n    }\n  }, {\n    key: 'switchTo',\n    value: function switchTo(next, pipe) {\n      if (typeof next === 'string' || next instanceof Pipe) {\n        this.nextPipe = next;\n      } else {\n        this.next = next;\n        if (pipe) {\n          this.nextPipe = pipe;\n        }\n      }\n      return this;\n    }\n  }, {\n    key: 'push',\n    value: function push(child, name) {\n      child.parent = this;\n      if (typeof name !== 'undefined') {\n        child.childName = name;\n      }\n      child.root = this.root || this;\n      child.options = child.options || this.options;\n      if (!this.children) {\n        this.children = [child];\n        this.nextAfterChildren = this.next || null;\n        this.next = child;\n      } else {\n        this.children[this.children.length - 1].next = child;\n        this.children.push(child);\n      }\n      child.next = this;\n      return this;\n    }\n  }]);\n  return Context;\n}();\n\nvar isArray = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nfunction cloneRegExp(re) {\n  var regexMatch = /^\\/(.*)\\/([gimyu]*)$/.exec(re.toString());\n  return new RegExp(regexMatch[1], regexMatch[2]);\n}\n\nfunction clone(arg) {\n  if ((typeof arg === 'undefined' ? 'undefined' : _typeof(arg)) !== 'object') {\n    return arg;\n  }\n  if (arg === null) {\n    return null;\n  }\n  if (isArray(arg)) {\n    return arg.map(clone);\n  }\n  if (arg instanceof Date) {\n    return new Date(arg.getTime());\n  }\n  if (arg instanceof RegExp) {\n    return cloneRegExp(arg);\n  }\n  var cloned = {};\n  for (var name in arg) {\n    if (Object.prototype.hasOwnProperty.call(arg, name)) {\n      cloned[name] = clone(arg[name]);\n    }\n  }\n  return cloned;\n}\n\nvar DiffContext = function (_Context) {\n  inherits(DiffContext, _Context);\n\n  function DiffContext(left, right) {\n    classCallCheck(this, DiffContext);\n\n    var _this = possibleConstructorReturn(this, (DiffContext.__proto__ || Object.getPrototypeOf(DiffContext)).call(this));\n\n    _this.left = left;\n    _this.right = right;\n    _this.pipe = 'diff';\n    return _this;\n  }\n\n  createClass(DiffContext, [{\n    key: 'setResult',\n    value: function setResult(result) {\n      if (this.options.cloneDiffValues && (typeof result === 'undefined' ? 'undefined' : _typeof(result)) === 'object') {\n        var clone$$1 = typeof this.options.cloneDiffValues === 'function' ? this.options.cloneDiffValues : clone;\n        if (_typeof(result[0]) === 'object') {\n          result[0] = clone$$1(result[0]);\n        }\n        if (_typeof(result[1]) === 'object') {\n          result[1] = clone$$1(result[1]);\n        }\n      }\n      return Context.prototype.setResult.apply(this, arguments);\n    }\n  }]);\n  return DiffContext;\n}(Context);\n\nvar PatchContext = function (_Context) {\n  inherits(PatchContext, _Context);\n\n  function PatchContext(left, delta) {\n    classCallCheck(this, PatchContext);\n\n    var _this = possibleConstructorReturn(this, (PatchContext.__proto__ || Object.getPrototypeOf(PatchContext)).call(this));\n\n    _this.left = left;\n    _this.delta = delta;\n    _this.pipe = 'patch';\n    return _this;\n  }\n\n  return PatchContext;\n}(Context);\n\nvar ReverseContext = function (_Context) {\n  inherits(ReverseContext, _Context);\n\n  function ReverseContext(delta) {\n    classCallCheck(this, ReverseContext);\n\n    var _this = possibleConstructorReturn(this, (ReverseContext.__proto__ || Object.getPrototypeOf(ReverseContext)).call(this));\n\n    _this.delta = delta;\n    _this.pipe = 'reverse';\n    return _this;\n  }\n\n  return ReverseContext;\n}(Context);\n\nvar isArray$1 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar diffFilter = function trivialMatchesDiffFilter(context) {\n  if (context.left === context.right) {\n    context.setResult(undefined).exit();\n    return;\n  }\n  if (typeof context.left === 'undefined') {\n    if (typeof context.right === 'function') {\n      throw new Error('functions are not supported');\n    }\n    context.setResult([context.right]).exit();\n    return;\n  }\n  if (typeof context.right === 'undefined') {\n    context.setResult([context.left, 0, 0]).exit();\n    return;\n  }\n  if (typeof context.left === 'function' || typeof context.right === 'function') {\n    throw new Error('functions are not supported');\n  }\n  context.leftType = context.left === null ? 'null' : _typeof(context.left);\n  context.rightType = context.right === null ? 'null' : _typeof(context.right);\n  if (context.leftType !== context.rightType) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  if (context.leftType === 'boolean' || context.leftType === 'number') {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  if (context.leftType === 'object') {\n    context.leftIsArray = isArray$1(context.left);\n  }\n  if (context.rightType === 'object') {\n    context.rightIsArray = isArray$1(context.right);\n  }\n  if (context.leftIsArray !== context.rightIsArray) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n\n  if (context.left instanceof RegExp) {\n    if (context.right instanceof RegExp) {\n      context.setResult([context.left.toString(), context.right.toString()]).exit();\n    } else {\n      context.setResult([context.left, context.right]).exit();\n    }\n  }\n};\ndiffFilter.filterName = 'trivial';\n\nvar patchFilter = function trivialMatchesPatchFilter(context) {\n  if (typeof context.delta === 'undefined') {\n    context.setResult(context.left).exit();\n    return;\n  }\n  context.nested = !isArray$1(context.delta);\n  if (context.nested) {\n    return;\n  }\n  if (context.delta.length === 1) {\n    context.setResult(context.delta[0]).exit();\n    return;\n  }\n  if (context.delta.length === 2) {\n    if (context.left instanceof RegExp) {\n      var regexArgs = /^\\/(.*)\\/([gimyu]+)$/.exec(context.delta[1]);\n      if (regexArgs) {\n        context.setResult(new RegExp(regexArgs[1], regexArgs[2])).exit();\n        return;\n      }\n    }\n    context.setResult(context.delta[1]).exit();\n    return;\n  }\n  if (context.delta.length === 3 && context.delta[2] === 0) {\n    context.setResult(undefined).exit();\n  }\n};\npatchFilter.filterName = 'trivial';\n\nvar reverseFilter = function trivialReferseFilter(context) {\n  if (typeof context.delta === 'undefined') {\n    context.setResult(context.delta).exit();\n    return;\n  }\n  context.nested = !isArray$1(context.delta);\n  if (context.nested) {\n    return;\n  }\n  if (context.delta.length === 1) {\n    context.setResult([context.delta[0], 0, 0]).exit();\n    return;\n  }\n  if (context.delta.length === 2) {\n    context.setResult([context.delta[1], context.delta[0]]).exit();\n    return;\n  }\n  if (context.delta.length === 3 && context.delta[2] === 0) {\n    context.setResult([context.delta[0]]).exit();\n  }\n};\nreverseFilter.filterName = 'trivial';\n\nfunction collectChildrenDiffFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var result = context.result;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (typeof child.result === 'undefined') {\n      continue;\n    }\n    result = result || {};\n    result[child.childName] = child.result;\n  }\n  if (result && context.leftIsArray) {\n    result._t = 'a';\n  }\n  context.setResult(result).exit();\n}\ncollectChildrenDiffFilter.filterName = 'collectChildren';\n\nfunction objectsDiffFilter(context) {\n  if (context.leftIsArray || context.leftType !== 'object') {\n    return;\n  }\n\n  var name = void 0;\n  var child = void 0;\n  var propertyFilter = context.options.propertyFilter;\n  for (name in context.left) {\n    if (!Object.prototype.hasOwnProperty.call(context.left, name)) {\n      continue;\n    }\n    if (propertyFilter && !propertyFilter(name, context)) {\n      continue;\n    }\n    child = new DiffContext(context.left[name], context.right[name]);\n    context.push(child, name);\n  }\n  for (name in context.right) {\n    if (!Object.prototype.hasOwnProperty.call(context.right, name)) {\n      continue;\n    }\n    if (propertyFilter && !propertyFilter(name, context)) {\n      continue;\n    }\n    if (typeof context.left[name] === 'undefined') {\n      child = new DiffContext(undefined, context.right[name]);\n      context.push(child, name);\n    }\n  }\n\n  if (!context.children || context.children.length === 0) {\n    context.setResult(undefined).exit();\n    return;\n  }\n  context.exit();\n}\nobjectsDiffFilter.filterName = 'objects';\n\nvar patchFilter$1 = function nestedPatchFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    child = new PatchContext(context.left[name], context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\npatchFilter$1.filterName = 'objects';\n\nvar collectChildrenPatchFilter = function collectChildrenPatchFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (Object.prototype.hasOwnProperty.call(context.left, child.childName) && child.result === undefined) {\n      delete context.left[child.childName];\n    } else if (context.left[child.childName] !== child.result) {\n      context.left[child.childName] = child.result;\n    }\n  }\n  context.setResult(context.left).exit();\n};\ncollectChildrenPatchFilter.filterName = 'collectChildren';\n\nvar reverseFilter$1 = function nestedReverseFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    child = new ReverseContext(context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\nreverseFilter$1.filterName = 'objects';\n\nfunction collectChildrenReverseFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t) {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var delta = {};\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    if (delta[child.childName] !== child.result) {\n      delta[child.childName] = child.result;\n    }\n  }\n  context.setResult(delta).exit();\n}\ncollectChildrenReverseFilter.filterName = 'collectChildren';\n\n/*\n\nLCS implementation that supports arrays or strings\n\nreference: http://en.wikipedia.org/wiki/Longest_common_subsequence_problem\n\n*/\n\nvar defaultMatch = function defaultMatch(array1, array2, index1, index2) {\n  return array1[index1] === array2[index2];\n};\n\nvar lengthMatrix = function lengthMatrix(array1, array2, match, context) {\n  var len1 = array1.length;\n  var len2 = array2.length;\n  var x = void 0,\n      y = void 0;\n\n  // initialize empty matrix of len1+1 x len2+1\n  var matrix = [len1 + 1];\n  for (x = 0; x < len1 + 1; x++) {\n    matrix[x] = [len2 + 1];\n    for (y = 0; y < len2 + 1; y++) {\n      matrix[x][y] = 0;\n    }\n  }\n  matrix.match = match;\n  // save sequence lengths for each coordinate\n  for (x = 1; x < len1 + 1; x++) {\n    for (y = 1; y < len2 + 1; y++) {\n      if (match(array1, array2, x - 1, y - 1, context)) {\n        matrix[x][y] = matrix[x - 1][y - 1] + 1;\n      } else {\n        matrix[x][y] = Math.max(matrix[x - 1][y], matrix[x][y - 1]);\n      }\n    }\n  }\n  return matrix;\n};\n\nvar backtrack = function backtrack(matrix, array1, array2, context) {\n  var index1 = array1.length;\n  var index2 = array2.length;\n  var subsequence = {\n    sequence: [],\n    indices1: [],\n    indices2: []\n  };\n\n  while (index1 !== 0 && index2 !== 0) {\n    var sameLetter = matrix.match(array1, array2, index1 - 1, index2 - 1, context);\n    if (sameLetter) {\n      subsequence.sequence.unshift(array1[index1 - 1]);\n      subsequence.indices1.unshift(index1 - 1);\n      subsequence.indices2.unshift(index2 - 1);\n      --index1;\n      --index2;\n    } else {\n      var valueAtMatrixAbove = matrix[index1][index2 - 1];\n      var valueAtMatrixLeft = matrix[index1 - 1][index2];\n      if (valueAtMatrixAbove > valueAtMatrixLeft) {\n        --index2;\n      } else {\n        --index1;\n      }\n    }\n  }\n  return subsequence;\n};\n\nvar get$1 = function get(array1, array2, match, context) {\n  var innerContext = context || {};\n  var matrix = lengthMatrix(array1, array2, match || defaultMatch, innerContext);\n  var result = backtrack(matrix, array1, array2, innerContext);\n  if (typeof array1 === 'string' && typeof array2 === 'string') {\n    result.sequence = result.sequence.join('');\n  }\n  return result;\n};\n\nvar lcs = {\n  get: get$1\n};\n\nvar ARRAY_MOVE = 3;\n\nvar isArray$2 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar arrayIndexOf = typeof Array.prototype.indexOf === 'function' ? function (array, item) {\n  return array.indexOf(item);\n} : function (array, item) {\n  var length = array.length;\n  for (var i = 0; i < length; i++) {\n    if (array[i] === item) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nfunction arraysHaveMatchByRef(array1, array2, len1, len2) {\n  for (var index1 = 0; index1 < len1; index1++) {\n    var val1 = array1[index1];\n    for (var index2 = 0; index2 < len2; index2++) {\n      var val2 = array2[index2];\n      if (index1 !== index2 && val1 === val2) {\n        return true;\n      }\n    }\n  }\n}\n\nfunction matchItems(array1, array2, index1, index2, context) {\n  var value1 = array1[index1];\n  var value2 = array2[index2];\n  if (value1 === value2) {\n    return true;\n  }\n  if ((typeof value1 === 'undefined' ? 'undefined' : _typeof(value1)) !== 'object' || (typeof value2 === 'undefined' ? 'undefined' : _typeof(value2)) !== 'object') {\n    return false;\n  }\n  var objectHash = context.objectHash;\n  if (!objectHash) {\n    // no way to match objects was provided, try match by position\n    return context.matchByPosition && index1 === index2;\n  }\n  var hash1 = void 0;\n  var hash2 = void 0;\n  if (typeof index1 === 'number') {\n    context.hashCache1 = context.hashCache1 || [];\n    hash1 = context.hashCache1[index1];\n    if (typeof hash1 === 'undefined') {\n      context.hashCache1[index1] = hash1 = objectHash(value1, index1);\n    }\n  } else {\n    hash1 = objectHash(value1);\n  }\n  if (typeof hash1 === 'undefined') {\n    return false;\n  }\n  if (typeof index2 === 'number') {\n    context.hashCache2 = context.hashCache2 || [];\n    hash2 = context.hashCache2[index2];\n    if (typeof hash2 === 'undefined') {\n      context.hashCache2[index2] = hash2 = objectHash(value2, index2);\n    }\n  } else {\n    hash2 = objectHash(value2);\n  }\n  if (typeof hash2 === 'undefined') {\n    return false;\n  }\n  return hash1 === hash2;\n}\n\nvar diffFilter$1 = function arraysDiffFilter(context) {\n  if (!context.leftIsArray) {\n    return;\n  }\n\n  var matchContext = {\n    objectHash: context.options && context.options.objectHash,\n    matchByPosition: context.options && context.options.matchByPosition\n  };\n  var commonHead = 0;\n  var commonTail = 0;\n  var index = void 0;\n  var index1 = void 0;\n  var index2 = void 0;\n  var array1 = context.left;\n  var array2 = context.right;\n  var len1 = array1.length;\n  var len2 = array2.length;\n\n  var child = void 0;\n\n  if (len1 > 0 && len2 > 0 && !matchContext.objectHash && typeof matchContext.matchByPosition !== 'boolean') {\n    matchContext.matchByPosition = !arraysHaveMatchByRef(array1, array2, len1, len2);\n  }\n\n  // separate common head\n  while (commonHead < len1 && commonHead < len2 && matchItems(array1, array2, commonHead, commonHead, matchContext)) {\n    index = commonHead;\n    child = new DiffContext(context.left[index], context.right[index]);\n    context.push(child, index);\n    commonHead++;\n  }\n  // separate common tail\n  while (commonTail + commonHead < len1 && commonTail + commonHead < len2 && matchItems(array1, array2, len1 - 1 - commonTail, len2 - 1 - commonTail, matchContext)) {\n    index1 = len1 - 1 - commonTail;\n    index2 = len2 - 1 - commonTail;\n    child = new DiffContext(context.left[index1], context.right[index2]);\n    context.push(child, index2);\n    commonTail++;\n  }\n  var result = void 0;\n  if (commonHead + commonTail === len1) {\n    if (len1 === len2) {\n      // arrays are identical\n      context.setResult(undefined).exit();\n      return;\n    }\n    // trivial case, a block (1 or more consecutive items) was added\n    result = result || {\n      _t: 'a'\n    };\n    for (index = commonHead; index < len2 - commonTail; index++) {\n      result[index] = [array2[index]];\n    }\n    context.setResult(result).exit();\n    return;\n  }\n  if (commonHead + commonTail === len2) {\n    // trivial case, a block (1 or more consecutive items) was removed\n    result = result || {\n      _t: 'a'\n    };\n    for (index = commonHead; index < len1 - commonTail; index++) {\n      result['_' + index] = [array1[index], 0, 0];\n    }\n    context.setResult(result).exit();\n    return;\n  }\n  // reset hash cache\n  delete matchContext.hashCache1;\n  delete matchContext.hashCache2;\n\n  // diff is not trivial, find the LCS (Longest Common Subsequence)\n  var trimmed1 = array1.slice(commonHead, len1 - commonTail);\n  var trimmed2 = array2.slice(commonHead, len2 - commonTail);\n  var seq = lcs.get(trimmed1, trimmed2, matchItems, matchContext);\n  var removedItems = [];\n  result = result || {\n    _t: 'a'\n  };\n  for (index = commonHead; index < len1 - commonTail; index++) {\n    if (arrayIndexOf(seq.indices1, index - commonHead) < 0) {\n      // removed\n      result['_' + index] = [array1[index], 0, 0];\n      removedItems.push(index);\n    }\n  }\n\n  var detectMove = true;\n  if (context.options && context.options.arrays && context.options.arrays.detectMove === false) {\n    detectMove = false;\n  }\n  var includeValueOnMove = false;\n  if (context.options && context.options.arrays && context.options.arrays.includeValueOnMove) {\n    includeValueOnMove = true;\n  }\n\n  var removedItemsLength = removedItems.length;\n  for (index = commonHead; index < len2 - commonTail; index++) {\n    var indexOnArray2 = arrayIndexOf(seq.indices2, index - commonHead);\n    if (indexOnArray2 < 0) {\n      // added, try to match with a removed item and register as position move\n      var isMove = false;\n      if (detectMove && removedItemsLength > 0) {\n        for (var removeItemIndex1 = 0; removeItemIndex1 < removedItemsLength; removeItemIndex1++) {\n          index1 = removedItems[removeItemIndex1];\n          if (matchItems(trimmed1, trimmed2, index1 - commonHead, index - commonHead, matchContext)) {\n            // store position move as: [originalValue, newPosition, ARRAY_MOVE]\n            result['_' + index1].splice(1, 2, index, ARRAY_MOVE);\n            if (!includeValueOnMove) {\n              // don't include moved value on diff, to save bytes\n              result['_' + index1][0] = '';\n            }\n\n            index2 = index;\n            child = new DiffContext(context.left[index1], context.right[index2]);\n            context.push(child, index2);\n            removedItems.splice(removeItemIndex1, 1);\n            isMove = true;\n            break;\n          }\n        }\n      }\n      if (!isMove) {\n        // added\n        result[index] = [array2[index]];\n      }\n    } else {\n      // match, do inner diff\n      index1 = seq.indices1[indexOnArray2] + commonHead;\n      index2 = seq.indices2[indexOnArray2] + commonHead;\n      child = new DiffContext(context.left[index1], context.right[index2]);\n      context.push(child, index2);\n    }\n  }\n\n  context.setResult(result).exit();\n};\ndiffFilter$1.filterName = 'arrays';\n\nvar compare = {\n  numerically: function numerically(a, b) {\n    return a - b;\n  },\n  numericallyBy: function numericallyBy(name) {\n    return function (a, b) {\n      return a[name] - b[name];\n    };\n  }\n};\n\nvar patchFilter$2 = function nestedPatchFilter(context) {\n  if (!context.nested) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var index = void 0;\n  var index1 = void 0;\n\n  var delta = context.delta;\n  var array = context.left;\n\n  // first, separate removals, insertions and modifications\n  var toRemove = [];\n  var toInsert = [];\n  var toModify = [];\n  for (index in delta) {\n    if (index !== '_t') {\n      if (index[0] === '_') {\n        // removed item from original array\n        if (delta[index][2] === 0 || delta[index][2] === ARRAY_MOVE) {\n          toRemove.push(parseInt(index.slice(1), 10));\n        } else {\n          throw new Error('only removal or move can be applied at original array indices,' + (' invalid diff type: ' + delta[index][2]));\n        }\n      } else {\n        if (delta[index].length === 1) {\n          // added item at new array\n          toInsert.push({\n            index: parseInt(index, 10),\n            value: delta[index][0]\n          });\n        } else {\n          // modified item at new array\n          toModify.push({\n            index: parseInt(index, 10),\n            delta: delta[index]\n          });\n        }\n      }\n    }\n  }\n\n  // remove items, in reverse order to avoid sawing our own floor\n  toRemove = toRemove.sort(compare.numerically);\n  for (index = toRemove.length - 1; index >= 0; index--) {\n    index1 = toRemove[index];\n    var indexDiff = delta['_' + index1];\n    var removedValue = array.splice(index1, 1)[0];\n    if (indexDiff[2] === ARRAY_MOVE) {\n      // reinsert later\n      toInsert.push({\n        index: indexDiff[1],\n        value: removedValue\n      });\n    }\n  }\n\n  // insert items, in reverse order to avoid moving our own floor\n  toInsert = toInsert.sort(compare.numericallyBy('index'));\n  var toInsertLength = toInsert.length;\n  for (index = 0; index < toInsertLength; index++) {\n    var insertion = toInsert[index];\n    array.splice(insertion.index, 0, insertion.value);\n  }\n\n  // apply modifications\n  var toModifyLength = toModify.length;\n  var child = void 0;\n  if (toModifyLength > 0) {\n    for (index = 0; index < toModifyLength; index++) {\n      var modification = toModify[index];\n      child = new PatchContext(context.left[modification.index], modification.delta);\n      context.push(child, modification.index);\n    }\n  }\n\n  if (!context.children) {\n    context.setResult(context.left).exit();\n    return;\n  }\n  context.exit();\n};\npatchFilter$2.filterName = 'arrays';\n\nvar collectChildrenPatchFilter$1 = function collectChildrenPatchFilter(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    context.left[child.childName] = child.result;\n  }\n  context.setResult(context.left).exit();\n};\ncollectChildrenPatchFilter$1.filterName = 'arraysCollectChildren';\n\nvar reverseFilter$2 = function arraysReverseFilter(context) {\n  if (!context.nested) {\n    if (context.delta[2] === ARRAY_MOVE) {\n      context.newName = '_' + context.delta[1];\n      context.setResult([context.delta[0], parseInt(context.childName.substr(1), 10), ARRAY_MOVE]).exit();\n    }\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var name = void 0;\n  var child = void 0;\n  for (name in context.delta) {\n    if (name === '_t') {\n      continue;\n    }\n    child = new ReverseContext(context.delta[name]);\n    context.push(child, name);\n  }\n  context.exit();\n};\nreverseFilter$2.filterName = 'arrays';\n\nvar reverseArrayDeltaIndex = function reverseArrayDeltaIndex(delta, index, itemDelta) {\n  if (typeof index === 'string' && index[0] === '_') {\n    return parseInt(index.substr(1), 10);\n  } else if (isArray$2(itemDelta) && itemDelta[2] === 0) {\n    return '_' + index;\n  }\n\n  var reverseIndex = +index;\n  for (var deltaIndex in delta) {\n    var deltaItem = delta[deltaIndex];\n    if (isArray$2(deltaItem)) {\n      if (deltaItem[2] === ARRAY_MOVE) {\n        var moveFromIndex = parseInt(deltaIndex.substr(1), 10);\n        var moveToIndex = deltaItem[1];\n        if (moveToIndex === +index) {\n          return moveFromIndex;\n        }\n        if (moveFromIndex <= reverseIndex && moveToIndex > reverseIndex) {\n          reverseIndex++;\n        } else if (moveFromIndex >= reverseIndex && moveToIndex < reverseIndex) {\n          reverseIndex--;\n        }\n      } else if (deltaItem[2] === 0) {\n        var deleteIndex = parseInt(deltaIndex.substr(1), 10);\n        if (deleteIndex <= reverseIndex) {\n          reverseIndex++;\n        }\n      } else if (deltaItem.length === 1 && deltaIndex <= reverseIndex) {\n        reverseIndex--;\n      }\n    }\n  }\n\n  return reverseIndex;\n};\n\nfunction collectChildrenReverseFilter$1(context) {\n  if (!context || !context.children) {\n    return;\n  }\n  if (context.delta._t !== 'a') {\n    return;\n  }\n  var length = context.children.length;\n  var child = void 0;\n  var delta = {\n    _t: 'a'\n  };\n\n  for (var index = 0; index < length; index++) {\n    child = context.children[index];\n    var name = child.newName;\n    if (typeof name === 'undefined') {\n      name = reverseArrayDeltaIndex(context.delta, child.childName, child.result);\n    }\n    if (delta[name] !== child.result) {\n      delta[name] = child.result;\n    }\n  }\n  context.setResult(delta).exit();\n}\ncollectChildrenReverseFilter$1.filterName = 'arraysCollectChildren';\n\nvar diffFilter$2 = function datesDiffFilter(context) {\n  if (context.left instanceof Date) {\n    if (context.right instanceof Date) {\n      if (context.left.getTime() !== context.right.getTime()) {\n        context.setResult([context.left, context.right]);\n      } else {\n        context.setResult(undefined);\n      }\n    } else {\n      context.setResult([context.left, context.right]);\n    }\n    context.exit();\n  } else if (context.right instanceof Date) {\n    context.setResult([context.left, context.right]).exit();\n  }\n};\ndiffFilter$2.filterName = 'dates';\n\n/* global diff_match_patch */\nvar TEXT_DIFF = 2;\nvar DEFAULT_MIN_LENGTH = 60;\nvar cachedDiffPatch = null;\n\nvar getDiffMatchPatch = function getDiffMatchPatch(required) {\n  /* jshint camelcase: false */\n\n  if (!cachedDiffPatch) {\n    var instance = void 0;\n    /* eslint-disable camelcase, new-cap */\n    if (typeof diff_match_patch !== 'undefined') {\n      // already loaded, probably a browser\n      instance = typeof diff_match_patch === 'function' ? new diff_match_patch() : new diff_match_patch.diff_match_patch();\n    } else if (dmp) {\n      try {\n        instance = dmp && new dmp();\n      } catch (err) {\n        instance = null;\n      }\n    }\n    /* eslint-enable camelcase, new-cap */\n    if (!instance) {\n      if (!required) {\n        return null;\n      }\n      var error = new Error('text diff_match_patch library not found');\n      // eslint-disable-next-line camelcase\n      error.diff_match_patch_not_found = true;\n      throw error;\n    }\n    cachedDiffPatch = {\n      diff: function diff(txt1, txt2) {\n        return instance.patch_toText(instance.patch_make(txt1, txt2));\n      },\n      patch: function patch(txt1, _patch) {\n        var results = instance.patch_apply(instance.patch_fromText(_patch), txt1);\n        for (var i = 0; i < results[1].length; i++) {\n          if (!results[1][i]) {\n            var _error = new Error('text patch failed');\n            _error.textPatchFailed = true;\n          }\n        }\n        return results[0];\n      }\n    };\n  }\n  return cachedDiffPatch;\n};\n\nvar diffFilter$3 = function textsDiffFilter(context) {\n  if (context.leftType !== 'string') {\n    return;\n  }\n  var minLength = context.options && context.options.textDiff && context.options.textDiff.minLength || DEFAULT_MIN_LENGTH;\n  if (context.left.length < minLength || context.right.length < minLength) {\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  // large text, try to use a text-diff algorithm\n  var diffMatchPatch = getDiffMatchPatch();\n  if (!diffMatchPatch) {\n    // diff-match-patch library not available,\n    // fallback to regular string replace\n    context.setResult([context.left, context.right]).exit();\n    return;\n  }\n  var diff = diffMatchPatch.diff;\n  context.setResult([diff(context.left, context.right), 0, TEXT_DIFF]).exit();\n};\ndiffFilter$3.filterName = 'texts';\n\nvar patchFilter$3 = function textsPatchFilter(context) {\n  if (context.nested) {\n    return;\n  }\n  if (context.delta[2] !== TEXT_DIFF) {\n    return;\n  }\n\n  // text-diff, use a text-patch algorithm\n  var patch = getDiffMatchPatch(true).patch;\n  context.setResult(patch(context.left, context.delta[0])).exit();\n};\npatchFilter$3.filterName = 'texts';\n\nvar textDeltaReverse = function textDeltaReverse(delta) {\n  var i = void 0;\n  var l = void 0;\n  var lines = void 0;\n  var line = void 0;\n  var lineTmp = void 0;\n  var header = null;\n  var headerRegex = /^@@ +-(\\d+),(\\d+) +\\+(\\d+),(\\d+) +@@$/;\n  var lineHeader = void 0;\n  lines = delta.split('\\n');\n  for (i = 0, l = lines.length; i < l; i++) {\n    line = lines[i];\n    var lineStart = line.slice(0, 1);\n    if (lineStart === '@') {\n      header = headerRegex.exec(line);\n      lineHeader = i;\n\n      // fix header\n      lines[lineHeader] = '@@ -' + header[3] + ',' + header[4] + ' +' + header[1] + ',' + header[2] + ' @@';\n    } else if (lineStart === '+') {\n      lines[i] = '-' + lines[i].slice(1);\n      if (lines[i - 1].slice(0, 1) === '+') {\n        // swap lines to keep default order (-+)\n        lineTmp = lines[i];\n        lines[i] = lines[i - 1];\n        lines[i - 1] = lineTmp;\n      }\n    } else if (lineStart === '-') {\n      lines[i] = '+' + lines[i].slice(1);\n    }\n  }\n  return lines.join('\\n');\n};\n\nvar reverseFilter$3 = function textsReverseFilter(context) {\n  if (context.nested) {\n    return;\n  }\n  if (context.delta[2] !== TEXT_DIFF) {\n    return;\n  }\n\n  // text-diff, use a text-diff algorithm\n  context.setResult([textDeltaReverse(context.delta[0]), 0, TEXT_DIFF]).exit();\n};\nreverseFilter$3.filterName = 'texts';\n\nvar DiffPatcher = function () {\n  function DiffPatcher(options) {\n    classCallCheck(this, DiffPatcher);\n\n    this.processor = new Processor(options);\n    this.processor.pipe(new Pipe('diff').append(collectChildrenDiffFilter, diffFilter, diffFilter$2, diffFilter$3, objectsDiffFilter, diffFilter$1).shouldHaveResult());\n    this.processor.pipe(new Pipe('patch').append(collectChildrenPatchFilter, collectChildrenPatchFilter$1, patchFilter, patchFilter$3, patchFilter$1, patchFilter$2).shouldHaveResult());\n    this.processor.pipe(new Pipe('reverse').append(collectChildrenReverseFilter, collectChildrenReverseFilter$1, reverseFilter, reverseFilter$3, reverseFilter$1, reverseFilter$2).shouldHaveResult());\n  }\n\n  createClass(DiffPatcher, [{\n    key: 'options',\n    value: function options() {\n      var _processor;\n\n      return (_processor = this.processor).options.apply(_processor, arguments);\n    }\n  }, {\n    key: 'diff',\n    value: function diff(left, right) {\n      return this.processor.process(new DiffContext(left, right));\n    }\n  }, {\n    key: 'patch',\n    value: function patch(left, delta) {\n      return this.processor.process(new PatchContext(left, delta));\n    }\n  }, {\n    key: 'reverse',\n    value: function reverse(delta) {\n      return this.processor.process(new ReverseContext(delta));\n    }\n  }, {\n    key: 'unpatch',\n    value: function unpatch(right, delta) {\n      return this.patch(right, this.reverse(delta));\n    }\n  }, {\n    key: 'clone',\n    value: function clone$$1(value) {\n      return clone(value);\n    }\n  }]);\n  return DiffPatcher;\n}();\n\nvar isArray$3 = typeof Array.isArray === 'function' ? Array.isArray : function (a) {\n  return a instanceof Array;\n};\n\nvar getObjectKeys = typeof Object.keys === 'function' ? function (obj) {\n  return Object.keys(obj);\n} : function (obj) {\n  var names = [];\n  for (var property in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, property)) {\n      names.push(property);\n    }\n  }\n  return names;\n};\n\nvar trimUnderscore = function trimUnderscore(str) {\n  if (str.substr(0, 1) === '_') {\n    return str.slice(1);\n  }\n  return str;\n};\n\nvar arrayKeyToSortNumber = function arrayKeyToSortNumber(key) {\n  if (key === '_t') {\n    return -1;\n  } else {\n    if (key.substr(0, 1) === '_') {\n      return parseInt(key.slice(1), 10);\n    } else {\n      return parseInt(key, 10) + 0.1;\n    }\n  }\n};\n\nvar arrayKeyComparer = function arrayKeyComparer(key1, key2) {\n  return arrayKeyToSortNumber(key1) - arrayKeyToSortNumber(key2);\n};\n\nvar BaseFormatter = function () {\n  function BaseFormatter() {\n    classCallCheck(this, BaseFormatter);\n  }\n\n  createClass(BaseFormatter, [{\n    key: 'format',\n    value: function format(delta, left) {\n      var context = {};\n      this.prepareContext(context);\n      this.recurse(context, delta, left);\n      return this.finalize(context);\n    }\n  }, {\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      context.buffer = [];\n      context.out = function () {\n        var _buffer;\n\n        (_buffer = this.buffer).push.apply(_buffer, arguments);\n      };\n    }\n  }, {\n    key: 'typeFormattterNotFound',\n    value: function typeFormattterNotFound(context, deltaType) {\n      throw new Error('cannot format delta type: ' + deltaType);\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      return err.toString();\n    }\n  }, {\n    key: 'finalize',\n    value: function finalize(_ref) {\n      var buffer = _ref.buffer;\n\n      if (isArray$3(buffer)) {\n        return buffer.join('');\n      }\n    }\n  }, {\n    key: 'recurse',\n    value: function recurse(context, delta, left, key, leftKey, movedFrom, isLast) {\n      var useMoveOriginHere = delta && movedFrom;\n      var leftValue = useMoveOriginHere ? movedFrom.value : left;\n\n      if (typeof delta === 'undefined' && typeof key === 'undefined') {\n        return undefined;\n      }\n\n      var type = this.getDeltaType(delta, movedFrom);\n      var nodeType = type === 'node' ? delta._t === 'a' ? 'array' : 'object' : '';\n\n      if (typeof key !== 'undefined') {\n        this.nodeBegin(context, key, leftKey, type, nodeType, isLast);\n      } else {\n        this.rootBegin(context, type, nodeType);\n      }\n\n      var typeFormattter = void 0;\n      try {\n        typeFormattter = this['format_' + type] || this.typeFormattterNotFound(context, type);\n        typeFormattter.call(this, context, delta, leftValue, key, leftKey, movedFrom);\n      } catch (err) {\n        this.typeFormattterErrorFormatter(context, err, delta, leftValue, key, leftKey, movedFrom);\n        if (typeof console !== 'undefined' && console.error) {\n          console.error(err.stack);\n        }\n      }\n\n      if (typeof key !== 'undefined') {\n        this.nodeEnd(context, key, leftKey, type, nodeType, isLast);\n      } else {\n        this.rootEnd(context, type, nodeType);\n      }\n    }\n  }, {\n    key: 'formatDeltaChildren',\n    value: function formatDeltaChildren(context, delta, left) {\n      var self = this;\n      this.forEachDeltaKey(delta, left, function (key, leftKey, movedFrom, isLast) {\n        self.recurse(context, delta[key], left ? left[leftKey] : undefined, key, leftKey, movedFrom, isLast);\n      });\n    }\n  }, {\n    key: 'forEachDeltaKey',\n    value: function forEachDeltaKey(delta, left, fn) {\n      var keys = getObjectKeys(delta);\n      var arrayKeys = delta._t === 'a';\n      var moveDestinations = {};\n      var name = void 0;\n      if (typeof left !== 'undefined') {\n        for (name in left) {\n          if (Object.prototype.hasOwnProperty.call(left, name)) {\n            if (typeof delta[name] === 'undefined' && (!arrayKeys || typeof delta['_' + name] === 'undefined')) {\n              keys.push(name);\n            }\n          }\n        }\n      }\n      // look for move destinations\n      for (name in delta) {\n        if (Object.prototype.hasOwnProperty.call(delta, name)) {\n          var value = delta[name];\n          if (isArray$3(value) && value[2] === 3) {\n            moveDestinations[value[1].toString()] = {\n              key: name,\n              value: left && left[parseInt(name.substr(1))]\n            };\n            if (this.includeMoveDestinations !== false) {\n              if (typeof left === 'undefined' && typeof delta[value[1]] === 'undefined') {\n                keys.push(value[1].toString());\n              }\n            }\n          }\n        }\n      }\n      if (arrayKeys) {\n        keys.sort(arrayKeyComparer);\n      } else {\n        keys.sort();\n      }\n      for (var index = 0, length = keys.length; index < length; index++) {\n        var key = keys[index];\n        if (arrayKeys && key === '_t') {\n          continue;\n        }\n        var leftKey = arrayKeys ? typeof key === 'number' ? key : parseInt(trimUnderscore(key), 10) : key;\n        var isLast = index === length - 1;\n        fn(key, leftKey, moveDestinations[leftKey], isLast);\n      }\n    }\n  }, {\n    key: 'getDeltaType',\n    value: function getDeltaType(delta, movedFrom) {\n      if (typeof delta === 'undefined') {\n        if (typeof movedFrom !== 'undefined') {\n          return 'movedestination';\n        }\n        return 'unchanged';\n      }\n      if (isArray$3(delta)) {\n        if (delta.length === 1) {\n          return 'added';\n        }\n        if (delta.length === 2) {\n          return 'modified';\n        }\n        if (delta.length === 3 && delta[2] === 0) {\n          return 'deleted';\n        }\n        if (delta.length === 3 && delta[2] === 2) {\n          return 'textdiff';\n        }\n        if (delta.length === 3 && delta[2] === 3) {\n          return 'moved';\n        }\n      } else if ((typeof delta === 'undefined' ? 'undefined' : _typeof(delta)) === 'object') {\n        return 'node';\n      }\n      return 'unknown';\n    }\n  }, {\n    key: 'parseTextDiff',\n    value: function parseTextDiff(value) {\n      var output = [];\n      var lines = value.split('\\n@@ ');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        var lineOutput = {\n          pieces: []\n        };\n        var location = /^(?:@@ )?[-+]?(\\d+),(\\d+)/.exec(line).slice(1);\n        lineOutput.location = {\n          line: location[0],\n          chr: location[1]\n        };\n        var pieces = line.split('\\n').slice(1);\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          if (!piece.length) {\n            continue;\n          }\n          var pieceOutput = {\n            type: 'context'\n          };\n          if (piece.substr(0, 1) === '+') {\n            pieceOutput.type = 'added';\n          } else if (piece.substr(0, 1) === '-') {\n            pieceOutput.type = 'deleted';\n          }\n          pieceOutput.text = piece.slice(1);\n          lineOutput.pieces.push(pieceOutput);\n        }\n        output.push(lineOutput);\n      }\n      return output;\n    }\n  }]);\n  return BaseFormatter;\n}();\n\n\n\nvar base = Object.freeze({\n\tdefault: BaseFormatter\n});\n\nvar HtmlFormatter = function (_BaseFormatter) {\n  inherits(HtmlFormatter, _BaseFormatter);\n\n  function HtmlFormatter() {\n    classCallCheck(this, HtmlFormatter);\n    return possibleConstructorReturn(this, (HtmlFormatter.__proto__ || Object.getPrototypeOf(HtmlFormatter)).apply(this, arguments));\n  }\n\n  createClass(HtmlFormatter, [{\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.out('<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n    }\n  }, {\n    key: 'formatValue',\n    value: function formatValue(context, value) {\n      context.out('<pre>' + htmlEscape(JSON.stringify(value, null, 2)) + '</pre>');\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.out('<ul class=\"jsondiffpatch-textdiff\">');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.out('<li><div class=\"jsondiffpatch-textdiff-location\">' + ('<span class=\"jsondiffpatch-textdiff-line-number\">' + line.location.line + '</span><span class=\"jsondiffpatch-textdiff-char\">' + line.location.chr + '</span></div><div class=\"jsondiffpatch-textdiff-line\">'));\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          /* global decodeURI */\n          var piece = pieces[pieceIndex];\n          context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' + htmlEscape(decodeURI(piece.text)) + '</span>');\n        }\n        context.out('</div></li>');\n      }\n      context.out('</ul>');\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      var nodeClass = 'jsondiffpatch-' + type + (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n      context.out('<div class=\"jsondiffpatch-delta ' + nodeClass + '\">');\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context) {\n      context.out('</div>' + (context.hasArrows ? '<script type=\"text/javascript\">setTimeout(' + (adjustArrows.toString() + ',10);</script>') : ''));\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      var nodeClass = 'jsondiffpatch-' + type + (nodeType ? ' jsondiffpatch-child-node-type-' + nodeType : '');\n      context.out('<li class=\"' + nodeClass + '\" data-key=\"' + leftKey + '\">' + ('<div class=\"jsondiffpatch-property-name\">' + leftKey + '</div>'));\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context) {\n      context.out('</li>');\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, left);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, left);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      var nodeType = delta._t === 'a' ? 'array' : 'object';\n      context.out('<ul class=\"jsondiffpatch-node jsondiffpatch-node-type-' + nodeType + '\">');\n      this.formatDeltaChildren(context, delta, left);\n      context.out('</ul>');\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value jsondiffpatch-left-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>' + '<div class=\"jsondiffpatch-value jsondiffpatch-right-value\">');\n      this.formatValue(context, delta[1]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div>');\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatValue(context, delta[0]);\n      context.out('</div><div class=\"jsondiffpatch-moved-destination\">' + delta[1] + '</div>');\n\n      // draw an SVG arrow from here to move destination\n      context.out(\n      /* jshint multistr: true */\n      '<div class=\"jsondiffpatch-arrow\" ' + 'style=\"position: relative; left: -34px;\">\\n          <svg width=\"30\" height=\"60\" ' + 'style=\"position: absolute; display: none;\">\\n          <defs>\\n              <marker id=\"markerArrow\" markerWidth=\"8\" markerHeight=\"8\"\\n                 refx=\"2\" refy=\"4\"\\n                     orient=\"auto\" markerUnits=\"userSpaceOnUse\">\\n                  <path d=\"M1,1 L1,7 L7,4 L1,1\" style=\"fill: #339;\" />\\n              </marker>\\n          </defs>\\n          <path d=\"M30,0 Q-10,25 26,50\"\\n            style=\"stroke: #88f; stroke-width: 2px; fill: none; ' + 'stroke-opacity: 0.5; marker-end: url(#markerArrow);\"\\n          ></path>\\n          </svg>\\n      </div>');\n      context.hasArrows = true;\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff(context, delta) {\n      context.out('<div class=\"jsondiffpatch-value\">');\n      this.formatTextDiffString(context, delta[0]);\n      context.out('</div>');\n    }\n  }]);\n  return HtmlFormatter;\n}(BaseFormatter);\n\nfunction htmlEscape(text) {\n  var html = text;\n  var replacements = [[/&/g, '&amp;'], [/</g, '&lt;'], [/>/g, '&gt;'], [/'/g, '&apos;'], [/\"/g, '&quot;']];\n  for (var i = 0; i < replacements.length; i++) {\n    html = html.replace(replacements[i][0], replacements[i][1]);\n  }\n  return html;\n}\n\nvar adjustArrows = function jsondiffpatchHtmlFormatterAdjustArrows(nodeArg) {\n  var node = nodeArg || document;\n  var getElementText = function getElementText(_ref) {\n    var textContent = _ref.textContent,\n        innerText = _ref.innerText;\n    return textContent || innerText;\n  };\n  var eachByQuery = function eachByQuery(el, query, fn) {\n    var elems = el.querySelectorAll(query);\n    for (var i = 0, l = elems.length; i < l; i++) {\n      fn(elems[i]);\n    }\n  };\n  var eachChildren = function eachChildren(_ref2, fn) {\n    var children = _ref2.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      fn(children[i], i);\n    }\n  };\n  eachByQuery(node, '.jsondiffpatch-arrow', function (_ref3) {\n    var parentNode = _ref3.parentNode,\n        children = _ref3.children,\n        style = _ref3.style;\n\n    var arrowParent = parentNode;\n    var svg = children[0];\n    var path = svg.children[1];\n    svg.style.display = 'none';\n    var destination = getElementText(arrowParent.querySelector('.jsondiffpatch-moved-destination'));\n    var container = arrowParent.parentNode;\n    var destinationElem = void 0;\n    eachChildren(container, function (child) {\n      if (child.getAttribute('data-key') === destination) {\n        destinationElem = child;\n      }\n    });\n    if (!destinationElem) {\n      return;\n    }\n    try {\n      var distance = destinationElem.offsetTop - arrowParent.offsetTop;\n      svg.setAttribute('height', Math.abs(distance) + 6);\n      style.top = -8 + (distance > 0 ? 0 : distance) + 'px';\n      var curve = distance > 0 ? 'M30,0 Q-10,' + Math.round(distance / 2) + ' 26,' + (distance - 4) : 'M30,' + -distance + ' Q-10,' + Math.round(-distance / 2) + ' 26,4';\n      path.setAttribute('d', curve);\n      svg.style.display = '';\n    } catch (err) {}\n  });\n};\n\n/* jshint camelcase: true */\n/* eslint-enable camelcase */\n\nvar showUnchanged = function showUnchanged(show, node, delay) {\n  var el = node || document.body;\n  var prefix = 'jsondiffpatch-unchanged-';\n  var classes = {\n    showing: prefix + 'showing',\n    hiding: prefix + 'hiding',\n    visible: prefix + 'visible',\n    hidden: prefix + 'hidden'\n  };\n  var list = el.classList;\n  if (!list) {\n    return;\n  }\n  if (!delay) {\n    list.remove(classes.showing);\n    list.remove(classes.hiding);\n    list.remove(classes.visible);\n    list.remove(classes.hidden);\n    if (show === false) {\n      list.add(classes.hidden);\n    }\n    return;\n  }\n  if (show === false) {\n    list.remove(classes.showing);\n    list.add(classes.visible);\n    setTimeout(function () {\n      list.add(classes.hiding);\n    }, 10);\n  } else {\n    list.remove(classes.hiding);\n    list.add(classes.showing);\n    list.remove(classes.hidden);\n  }\n  var intervalId = setInterval(function () {\n    adjustArrows(el);\n  }, 100);\n  setTimeout(function () {\n    list.remove(classes.showing);\n    list.remove(classes.hiding);\n    if (show === false) {\n      list.add(classes.hidden);\n      list.remove(classes.visible);\n    } else {\n      list.add(classes.visible);\n      list.remove(classes.hidden);\n    }\n    setTimeout(function () {\n      list.remove(classes.visible);\n      clearInterval(intervalId);\n    }, delay + 400);\n  }, delay);\n};\n\nvar hideUnchanged = function hideUnchanged(node, delay) {\n  return showUnchanged(false, node, delay);\n};\n\nvar defaultInstance = void 0;\n\nfunction format(delta, left) {\n  if (!defaultInstance) {\n    defaultInstance = new HtmlFormatter();\n  }\n  return defaultInstance.format(delta, left);\n}\n\n\n\nvar html = Object.freeze({\n\tshowUnchanged: showUnchanged,\n\thideUnchanged: hideUnchanged,\n\tdefault: HtmlFormatter,\n\tformat: format\n});\n\nvar AnnotatedFormatter = function (_BaseFormatter) {\n  inherits(AnnotatedFormatter, _BaseFormatter);\n\n  function AnnotatedFormatter() {\n    classCallCheck(this, AnnotatedFormatter);\n\n    var _this = possibleConstructorReturn(this, (AnnotatedFormatter.__proto__ || Object.getPrototypeOf(AnnotatedFormatter)).call(this));\n\n    _this.includeMoveDestinations = false;\n    return _this;\n  }\n\n  createClass(AnnotatedFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(AnnotatedFormatter.prototype.__proto__ || Object.getPrototypeOf(AnnotatedFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.indent = function (levels) {\n        this.indentLevel = (this.indentLevel || 0) + (typeof levels === 'undefined' ? 1 : levels);\n        this.indentPad = new Array(this.indentLevel + 1).join('&nbsp;&nbsp;');\n      };\n      context.row = function (json, htmlNote) {\n        context.out('<tr><td style=\"white-space: nowrap;\">' + '<pre class=\"jsondiffpatch-annotated-indent\"' + ' style=\"display: inline-block\">');\n        context.out(context.indentPad);\n        context.out('</pre><pre style=\"display: inline-block\">');\n        context.out(json);\n        context.out('</pre></td><td class=\"jsondiffpatch-delta-note\"><div>');\n        context.out(htmlNote);\n        context.out('</div></td></tr>');\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.row('', '<pre class=\"jsondiffpatch-error\">' + err + '</pre>');\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.out('<ul class=\"jsondiffpatch-textdiff\">');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.out('<li><div class=\"jsondiffpatch-textdiff-location\">' + ('<span class=\"jsondiffpatch-textdiff-line-number\">' + line.location.line + '</span><span class=\"jsondiffpatch-textdiff-char\">' + line.location.chr + '</span></div><div class=\"jsondiffpatch-textdiff-line\">'));\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          context.out('<span class=\"jsondiffpatch-textdiff-' + piece.type + '\">' + piece.text + '</span>');\n        }\n        context.out('</div></li>');\n      }\n      context.out('</ul>');\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      context.out('<table class=\"jsondiffpatch-annotated-delta\">');\n      if (type === 'node') {\n        context.row('{');\n        context.indent();\n      }\n      if (nodeType === 'array') {\n        context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n      }\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context, type) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.row('}');\n      }\n      context.out('</table>');\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      context.row('&quot;' + key + '&quot;: {');\n      if (type === 'node') {\n        context.indent();\n      }\n      if (nodeType === 'array') {\n        context.row('\"_t\": \"a\",', 'Array delta (member names indicate array indices)');\n      }\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context, key, leftKey, type, nodeType, isLast) {\n      if (type === 'node') {\n        context.indent(-1);\n      }\n      context.row('}' + (isLast ? '' : ','));\n    }\n\n    /* jshint camelcase: false */\n\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged() {}\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination() {}\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }]);\n  return AnnotatedFormatter;\n}(BaseFormatter);\n\n/* eslint-enable camelcase */\n\nvar wrapPropertyName = function wrapPropertyName(name) {\n  return '<pre style=\"display:inline-block\">&quot;' + name + '&quot;</pre>';\n};\n\nvar deltaAnnotations = {\n  added: function added(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([newValue])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'new value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'insert at index ' + leftKey + formatLegend;\n    }\n    return 'add property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  modified: function modified(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([previousValue, newValue])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'modify value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'modify at index ' + leftKey + formatLegend;\n    }\n    return 'modify property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  deleted: function deleted(delta, left, key, leftKey) {\n    var formatLegend = ' <pre>([previousValue, 0, 0])</pre>';\n    if (typeof leftKey === 'undefined') {\n      return 'delete value' + formatLegend;\n    }\n    if (typeof leftKey === 'number') {\n      return 'remove index ' + leftKey + formatLegend;\n    }\n    return 'delete property ' + wrapPropertyName(leftKey) + formatLegend;\n  },\n  moved: function moved(delta, left, key, leftKey) {\n    return 'move from <span title=\"(position to remove at original state)\">' + ('index ' + leftKey + '</span> to <span title=\"(position to insert at final') + (' state)\">index ' + delta[1] + '</span>');\n  },\n  textdiff: function textdiff(delta, left, key, leftKey) {\n    var location = typeof leftKey === 'undefined' ? '' : typeof leftKey === 'number' ? ' at index ' + leftKey : ' at property ' + wrapPropertyName(leftKey);\n    return 'text diff' + location + ', format is <a href=\"https://code.google.com/' + 'p/google-diff-match-patch/wiki/Unidiff\">a variation of Unidiff</a>';\n  }\n};\n\nvar formatAnyChange = function formatAnyChange(context, delta) {\n  var deltaType = this.getDeltaType(delta);\n  var annotator = deltaAnnotations[deltaType];\n  var htmlNote = annotator && annotator.apply(annotator, Array.prototype.slice.call(arguments, 1));\n  var json = JSON.stringify(delta, null, 2);\n  if (deltaType === 'textdiff') {\n    // split text diffs lines\n    json = json.split('\\\\n').join('\\\\n\"+\\n   \"');\n  }\n  context.indent();\n  context.row(json, htmlNote);\n  context.indent(-1);\n};\n\n/* eslint-disable camelcase */\nAnnotatedFormatter.prototype.format_added = formatAnyChange;\nAnnotatedFormatter.prototype.format_modified = formatAnyChange;\nAnnotatedFormatter.prototype.format_deleted = formatAnyChange;\nAnnotatedFormatter.prototype.format_moved = formatAnyChange;\nAnnotatedFormatter.prototype.format_textdiff = formatAnyChange;\nvar defaultInstance$1 = void 0;\n\nfunction format$1(delta, left) {\n  if (!defaultInstance$1) {\n    defaultInstance$1 = new AnnotatedFormatter();\n  }\n  return defaultInstance$1.format(delta, left);\n}\n\n\n\nvar annotated = Object.freeze({\n\tdefault: AnnotatedFormatter,\n\tformat: format$1\n});\n\nvar OPERATIONS = {\n  add: 'add',\n  remove: 'remove',\n  replace: 'replace',\n  move: 'move'\n};\n\nvar JSONFormatter = function (_BaseFormatter) {\n  inherits(JSONFormatter, _BaseFormatter);\n\n  function JSONFormatter() {\n    classCallCheck(this, JSONFormatter);\n\n    var _this = possibleConstructorReturn(this, (JSONFormatter.__proto__ || Object.getPrototypeOf(JSONFormatter)).call(this));\n\n    _this.includeMoveDestinations = true;\n    return _this;\n  }\n\n  createClass(JSONFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(JSONFormatter.prototype.__proto__ || Object.getPrototypeOf(JSONFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.result = [];\n      context.path = [];\n      context.pushCurrentOp = function (obj) {\n        var op = obj.op,\n            value = obj.value;\n\n        var val = {\n          op: op,\n          path: this.currentPath()\n        };\n        if (typeof value !== 'undefined') {\n          val.value = value;\n        }\n        this.result.push(val);\n      };\n\n      context.pushMoveOp = function (to) {\n        var from = this.currentPath();\n        this.result.push({\n          op: OPERATIONS.move,\n          from: from,\n          path: this.toPath(to)\n        });\n      };\n\n      context.currentPath = function () {\n        return '/' + this.path.join('/');\n      };\n\n      context.toPath = function (toPath) {\n        var to = this.path.slice();\n        to[to.length - 1] = toPath;\n        return '/' + to.join('/');\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.out('[ERROR] ' + err);\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin() {}\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd() {}\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(_ref, key, leftKey) {\n      var path = _ref.path;\n\n      path.push(leftKey);\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(_ref2) {\n      var path = _ref2.path;\n\n      path.pop();\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged() {}\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination() {}\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      context.pushCurrentOp({ op: OPERATIONS.add, value: delta[0] });\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.pushCurrentOp({ op: OPERATIONS.replace, value: delta[1] });\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context) {\n      context.pushCurrentOp({ op: OPERATIONS.remove });\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      var to = delta[1];\n      context.pushMoveOp(to);\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff() {\n      throw new Error('Not implemented');\n    }\n  }, {\n    key: 'format',\n    value: function format(delta, left) {\n      var context = {};\n      this.prepareContext(context);\n      this.recurse(context, delta, left);\n      return context.result;\n    }\n  }]);\n  return JSONFormatter;\n}(BaseFormatter);\n\nvar last = function last(arr) {\n  return arr[arr.length - 1];\n};\n\nvar sortBy = function sortBy(arr, pred) {\n  arr.sort(pred);\n  return arr;\n};\n\nvar compareByIndexDesc = function compareByIndexDesc(indexA, indexB) {\n  var lastA = parseInt(indexA, 10);\n  var lastB = parseInt(indexB, 10);\n  if (!(isNaN(lastA) || isNaN(lastB))) {\n    return lastB - lastA;\n  } else {\n    return 0;\n  }\n};\n\nvar opsByDescendingOrder = function opsByDescendingOrder(removeOps) {\n  return sortBy(removeOps, function (a, b) {\n    var splitA = a.path.split('/');\n    var splitB = b.path.split('/');\n    if (splitA.length !== splitB.length) {\n      return splitA.length - splitB.length;\n    } else {\n      return compareByIndexDesc(last(splitA), last(splitB));\n    }\n  });\n};\n\nvar partitionOps = function partitionOps(arr, fns) {\n  var initArr = Array(fns.length + 1).fill().map(function () {\n    return [];\n  });\n  return arr.map(function (item) {\n    var position = fns.map(function (fn) {\n      return fn(item);\n    }).indexOf(true);\n    if (position < 0) {\n      position = fns.length;\n    }\n    return { item: item, position: position };\n  }).reduce(function (acc, item) {\n    acc[item.position].push(item.item);\n    return acc;\n  }, initArr);\n};\nvar isMoveOp = function isMoveOp(_ref3) {\n  var op = _ref3.op;\n  return op === 'move';\n};\nvar isRemoveOp = function isRemoveOp(_ref4) {\n  var op = _ref4.op;\n  return op === 'remove';\n};\n\nvar reorderOps = function reorderOps(diff) {\n  var _partitionOps = partitionOps(diff, [isMoveOp, isRemoveOp]),\n      _partitionOps2 = slicedToArray(_partitionOps, 3),\n      moveOps = _partitionOps2[0],\n      removedOps = _partitionOps2[1],\n      restOps = _partitionOps2[2];\n\n  var removeOpsReverse = opsByDescendingOrder(removedOps);\n  return [].concat(toConsumableArray(removeOpsReverse), toConsumableArray(moveOps), toConsumableArray(restOps));\n};\n\nvar defaultInstance$2 = void 0;\n\nvar format$2 = function format(delta, left) {\n  if (!defaultInstance$2) {\n    defaultInstance$2 = new JSONFormatter();\n  }\n  return reorderOps(defaultInstance$2.format(delta, left));\n};\n\nvar log = function log(delta, left) {\n  console.log(format$2(delta, left));\n};\n\n\n\nvar jsonpatch = Object.freeze({\n\tdefault: JSONFormatter,\n\tpartitionOps: partitionOps,\n\tformat: format$2,\n\tlog: log\n});\n\nfunction chalkColor(name) {\n  return chalk && chalk[name] || function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return args;\n  };\n}\n\nvar colors = {\n  added: chalkColor('green'),\n  deleted: chalkColor('red'),\n  movedestination: chalkColor('gray'),\n  moved: chalkColor('yellow'),\n  unchanged: chalkColor('gray'),\n  error: chalkColor('white.bgRed'),\n  textDiffLine: chalkColor('gray')\n};\n\nvar ConsoleFormatter = function (_BaseFormatter) {\n  inherits(ConsoleFormatter, _BaseFormatter);\n\n  function ConsoleFormatter() {\n    classCallCheck(this, ConsoleFormatter);\n\n    var _this = possibleConstructorReturn(this, (ConsoleFormatter.__proto__ || Object.getPrototypeOf(ConsoleFormatter)).call(this));\n\n    _this.includeMoveDestinations = false;\n    return _this;\n  }\n\n  createClass(ConsoleFormatter, [{\n    key: 'prepareContext',\n    value: function prepareContext(context) {\n      get(ConsoleFormatter.prototype.__proto__ || Object.getPrototypeOf(ConsoleFormatter.prototype), 'prepareContext', this).call(this, context);\n      context.indent = function (levels) {\n        this.indentLevel = (this.indentLevel || 0) + (typeof levels === 'undefined' ? 1 : levels);\n        this.indentPad = new Array(this.indentLevel + 1).join('  ');\n        this.outLine();\n      };\n      context.outLine = function () {\n        this.buffer.push('\\n' + (this.indentPad || ''));\n      };\n      context.out = function () {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        for (var i = 0, l = args.length; i < l; i++) {\n          var lines = args[i].split('\\n');\n          var text = lines.join('\\n' + (this.indentPad || ''));\n          if (this.color && this.color[0]) {\n            text = this.color[0](text);\n          }\n          this.buffer.push(text);\n        }\n      };\n      context.pushColor = function (color) {\n        this.color = this.color || [];\n        this.color.unshift(color);\n      };\n      context.popColor = function () {\n        this.color = this.color || [];\n        this.color.shift();\n      };\n    }\n  }, {\n    key: 'typeFormattterErrorFormatter',\n    value: function typeFormattterErrorFormatter(context, err) {\n      context.pushColor(colors.error);\n      context.out('[ERROR]' + err);\n      context.popColor();\n    }\n  }, {\n    key: 'formatValue',\n    value: function formatValue(context, value) {\n      context.out(JSON.stringify(value, null, 2));\n    }\n  }, {\n    key: 'formatTextDiffString',\n    value: function formatTextDiffString(context, value) {\n      var lines = this.parseTextDiff(value);\n      context.indent();\n      for (var i = 0, l = lines.length; i < l; i++) {\n        var line = lines[i];\n        context.pushColor(colors.textDiffLine);\n        context.out(line.location.line + ',' + line.location.chr + ' ');\n        context.popColor();\n        var pieces = line.pieces;\n        for (var pieceIndex = 0, piecesLength = pieces.length; pieceIndex < piecesLength; pieceIndex++) {\n          var piece = pieces[pieceIndex];\n          context.pushColor(colors[piece.type]);\n          context.out(piece.text);\n          context.popColor();\n        }\n        if (i < l - 1) {\n          context.outLine();\n        }\n      }\n      context.indent(-1);\n    }\n  }, {\n    key: 'rootBegin',\n    value: function rootBegin(context, type, nodeType) {\n      context.pushColor(colors[type]);\n      if (type === 'node') {\n        context.out(nodeType === 'array' ? '[' : '{');\n        context.indent();\n      }\n    }\n  }, {\n    key: 'rootEnd',\n    value: function rootEnd(context, type, nodeType) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.out(nodeType === 'array' ? ']' : '}');\n      }\n      context.popColor();\n    }\n  }, {\n    key: 'nodeBegin',\n    value: function nodeBegin(context, key, leftKey, type, nodeType) {\n      context.pushColor(colors[type]);\n      context.out(leftKey + ': ');\n      if (type === 'node') {\n        context.out(nodeType === 'array' ? '[' : '{');\n        context.indent();\n      }\n    }\n  }, {\n    key: 'nodeEnd',\n    value: function nodeEnd(context, key, leftKey, type, nodeType, isLast) {\n      if (type === 'node') {\n        context.indent(-1);\n        context.out(nodeType === 'array' ? ']' : '}' + (isLast ? '' : ','));\n      }\n      if (!isLast) {\n        context.outLine();\n      }\n      context.popColor();\n    }\n\n    /* jshint camelcase: false */\n    /* eslint-disable camelcase */\n\n  }, {\n    key: 'format_unchanged',\n    value: function format_unchanged(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      this.formatValue(context, left);\n    }\n  }, {\n    key: 'format_movedestination',\n    value: function format_movedestination(context, delta, left) {\n      if (typeof left === 'undefined') {\n        return;\n      }\n      this.formatValue(context, left);\n    }\n  }, {\n    key: 'format_node',\n    value: function format_node(context, delta, left) {\n      // recurse\n      this.formatDeltaChildren(context, delta, left);\n    }\n  }, {\n    key: 'format_added',\n    value: function format_added(context, delta) {\n      this.formatValue(context, delta[0]);\n    }\n  }, {\n    key: 'format_modified',\n    value: function format_modified(context, delta) {\n      context.pushColor(colors.deleted);\n      this.formatValue(context, delta[0]);\n      context.popColor();\n      context.out(' => ');\n      context.pushColor(colors.added);\n      this.formatValue(context, delta[1]);\n      context.popColor();\n    }\n  }, {\n    key: 'format_deleted',\n    value: function format_deleted(context, delta) {\n      this.formatValue(context, delta[0]);\n    }\n  }, {\n    key: 'format_moved',\n    value: function format_moved(context, delta) {\n      context.out('==> ' + delta[1]);\n    }\n  }, {\n    key: 'format_textdiff',\n    value: function format_textdiff(context, delta) {\n      this.formatTextDiffString(context, delta[0]);\n    }\n  }]);\n  return ConsoleFormatter;\n}(BaseFormatter);\n\nvar defaultInstance$3 = void 0;\n\nvar format$3 = function format(delta, left) {\n  if (!defaultInstance$3) {\n    defaultInstance$3 = new ConsoleFormatter();\n  }\n  return defaultInstance$3.format(delta, left);\n};\n\nfunction log$1(delta, left) {\n  console.log(format$3(delta, left));\n}\n\n\n\nvar console$1 = Object.freeze({\n\tdefault: ConsoleFormatter,\n\tformat: format$3,\n\tlog: log$1\n});\n\n\n\nvar index = Object.freeze({\n\tbase: base,\n\thtml: html,\n\tannotated: annotated,\n\tjsonpatch: jsonpatch,\n\tconsole: console$1\n});\n\n// use as 2nd parameter for JSON.parse to revive Date instances\nfunction dateReviver(key, value) {\n  var parts = void 0;\n  if (typeof value === 'string') {\n    // eslint-disable-next-line max-len\n    parts = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d*))?(Z|([+-])(\\d{2}):(\\d{2}))$/.exec(value);\n    if (parts) {\n      return new Date(Date.UTC(+parts[1], +parts[2] - 1, +parts[3], +parts[4], +parts[5], +parts[6], +(parts[7] || 0)));\n    }\n  }\n  return value;\n}\n\nfunction create(options) {\n  return new DiffPatcher(options);\n}\n\nvar defaultInstance$4 = void 0;\n\nfunction diff() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.diff.apply(defaultInstance$4, arguments);\n}\n\nfunction patch() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.patch.apply(defaultInstance$4, arguments);\n}\n\nfunction unpatch() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.unpatch.apply(defaultInstance$4, arguments);\n}\n\nfunction reverse() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.reverse.apply(defaultInstance$4, arguments);\n}\n\nfunction clone$1() {\n  if (!defaultInstance$4) {\n    defaultInstance$4 = new DiffPatcher();\n  }\n  return defaultInstance$4.clone.apply(defaultInstance$4, arguments);\n}\n\nexport { DiffPatcher, index as formatters, console$1 as console, create, dateReviver, diff, patch, unpatch, reverse, clone$1 as clone };\n//# sourceMappingURL=jsondiffpatch.esm.js.map\n","import { DiffPatcher } from 'jsondiffpatch'\n\nconst diffPatcher = new DiffPatcher({\n  arrays: { detectMove: false, includeValueOnMove: false },\n  textDiff: { minLength: 1 }\n})\n\nexport function diff(inputA: any, inputB: any) {\n  return diffPatcher.diff(inputA, inputB)\n}\n","import type { Transaction } from 'prosemirror-state'\n\nconst addedProperties = [\n  'docChanged',\n  'isGeneric',\n  'scrolledIntoView',\n  'selectionSet',\n  'storedMarksSet'\n]\n\nexport function addPropertiesToTransaction(tr: Transaction) {\n  return Object.keys(tr)\n    .concat(addedProperties)\n    .reduce((acc, key) => {\n      // @ts-ignore\n      acc[key] = tr[key]\n      return acc\n    }, {} as Transaction)\n}\n","import type { EditorState, Selection, Transaction } from 'prosemirror-state'\nimport { DOMSerializer } from 'prosemirror-model'\nimport { prettyPrint } from 'html'\n\nimport { diff } from './diff'\nimport { addPropertiesToTransaction } from './transaction'\nimport type { HistoryEntry } from '$typings/history'\n\nfunction buildSelection(selection: Selection) {\n  return {\n    // @ts-ignore\n    type: selection.type,\n    empty: selection.empty,\n    anchor: selection.anchor,\n    head: selection.head,\n    from: selection.from,\n    to: selection.to\n  }\n}\n\nfunction pad(num: number) {\n  return ('00' + num).slice(-2)\n}\n\nfunction pad3(num: number) {\n  return ('000' + num).slice(-3)\n}\n\nconst formatTimestamp = (timestamp: number) => {\n  const date = new Date(timestamp)\n  return [\n    pad(date.getHours()),\n    pad(date.getMinutes()),\n    pad(date.getSeconds()),\n    pad3(date.getMilliseconds())\n  ].join(':')\n}\n\nconst regexp = /(&lt;\\/?[\\w\\d\\s=\"']+&gt;)/gim\nconst highlightHtmlString = (html: string) =>\n  html\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(regexp, \"<span style='color: cadetblue;'>$&</span>\")\n\nexport function createHistoryEntry(\n  trs: Transaction[],\n  state: EditorState,\n  stateBeforeDispatch: EditorState,\n  oldEntry?: HistoryEntry\n): HistoryEntry {\n  const serializer = DOMSerializer.fromSchema(state.schema)\n  const selection = state.selection\n  const domFragment = serializer.serializeFragment(selection.content().content)\n\n  const selectedElementsAsHtml = []\n  if (domFragment) {\n    let child = domFragment.firstChild as HTMLElement | null\n    while (child) {\n      selectedElementsAsHtml.push(child.outerHTML)\n      child = child.nextSibling as HTMLElement | null\n    }\n  }\n\n  // As described in stateHistory.ts the first entry is a special exception\n  const prevState = oldEntry ? oldEntry.state : stateBeforeDispatch\n  const contentDiff = diff(prevState.doc.toJSON(), state.doc.toJSON())\n  const selectionDiff = diff(buildSelection(prevState.selection), buildSelection(state.selection))\n\n  return {\n    id: Math.random().toString() + Math.random().toString(),\n    state,\n    trs: trs.map(tr => addPropertiesToTransaction(tr)),\n    timestamp: trs[0].time,\n    timeStr: formatTimestamp(trs[0].time),\n    contentDiff,\n    selectionDiff,\n    selectionHtml: highlightHtmlString(\n      prettyPrint(selectedElementsAsHtml.join('\\n'), {\n        max_char: 60,\n        indent_size: 2\n      })\n    )\n  }\n}\n","import { get, writable } from 'svelte/store'\nimport { EditorState, Transaction } from 'prosemirror-state'\n\nimport { createHistoryEntry } from '../history-and-diff/createHistoryEntry'\n\nimport type { HistoryEntry, HistoryGroup } from '$typings/history'\n\nexport const stateHistory = writable<Map<string, HistoryEntry>>(new Map())\nexport const shownHistoryGroups = writable<HistoryGroup[]>([])\nexport const latestEntry = writable<HistoryEntry | undefined>(undefined)\n\nexport function appendNewHistoryEntry(\n  trs: Transaction[],\n  state: EditorState,\n  stateBeforeDispatch: EditorState\n) {\n  const entryMap = get(stateHistory)\n  const prevGroup = get(shownHistoryGroups)[0]\n  const oldEntry = entryMap.get(prevGroup?.topEntryId || '')\n  // In the case of first entry there aren't oldEntries to diff against, therefore we have to use the state\n  // before the transaction. We can't use it for the next entries because it will always be one state behind,\n  // as the current state is the one _after_ the dispatch. You can observe this in the old dev-tools.\n  const newEntry = createHistoryEntry(trs, state, stateBeforeDispatch, oldEntry)\n\n  stateHistory.update(val => new Map(val.set(newEntry.id, newEntry)))\n  latestEntry.set(newEntry)\n\n  // Groups are subsequent transactions where the doc hasn't changed (eg selection was set) OR the diff was equal\n  // Haven't seen necessary to differentiate between selection-only vs equal diffs\n  const isGroup = !newEntry.contentDiff\n  if (prevGroup?.isGroup && isGroup) {\n    const newGroup = {\n      isGroup,\n      entryIds: [newEntry.id, ...prevGroup.entryIds],\n      topEntryId: newEntry.id,\n      expanded: prevGroup.expanded\n    }\n    shownHistoryGroups.update(val => [newGroup, ...val.slice(1)])\n  } else {\n    const newGroup = {\n      isGroup,\n      entryIds: [newEntry.id],\n      topEntryId: newEntry.id,\n      expanded: false\n    }\n    shownHistoryGroups.update(val => [newGroup, ...val])\n  }\n}\n\nexport function resetHistory() {\n  stateHistory.set(new Map())\n  shownHistoryGroups.set([])\n  latestEntry.set(undefined)\n}\n","import { EditorState } from 'prosemirror-state'\n\n// From https://github.com/PierBover/prosemirror-cookbook\nexport function getActiveMarks(state: EditorState): string[] {\n  if (state.selection.empty) {\n    const $from = state.selection.$from\n    const storedMarks = state.storedMarks\n\n    // Return either the stored marks, or the marks at the cursor position.\n    // Stored marks are the marks that are going to be applied to the next input\n    // if you dispatched a mark toggle with an empty cursor.\n    if (storedMarks) {\n      return storedMarks.map(mark => mark.type.name)\n    } else {\n      return $from.marks().map(mark => mark.type.name)\n    }\n  } else {\n    const $head = state.selection.$head\n    const $anchor = state.selection.$anchor\n\n    // We're using a Set to not get duplicate values\n    const activeMarks = new Set<string>()\n\n    // Here we're getting the marks at the head and anchor of the selection\n    $head.marks().forEach(mark => activeMarks.add(mark.type.name))\n    $anchor.marks().forEach(mark => activeMarks.add(mark.type.name))\n\n    return Array.from(activeMarks)\n  }\n}\n","import { Selection } from 'prosemirror-state'\n\nconst defaultProperties = ['jsonID', 'empty', 'anchor', 'from', 'head', 'to']\nconst resolvedPosProperties = ['$anchor', '$head', '$cursor', '$to', '$from']\nconst resolvedPosSubProperties = ['nodeAfter', 'nodeBefore', 'textOffset']\n\nexport function createSelection(selection: Selection) {\n  return defaultProperties.reduce((acc, key) => {\n    // @ts-ignore\n    acc[key] = selection[key]\n    return acc\n  }, {} as { [key: string]: any })\n}\n\nexport function createFullSelection(selection: Selection) {\n  return defaultProperties.concat(resolvedPosProperties).reduce((acc, key) => {\n    // @ts-ignore\n    let val = selection[key]\n    if (val && resolvedPosProperties.includes(key)) {\n      const additionalProperties = {}\n      resolvedPosSubProperties.forEach(subKey => {\n        // @ts-ignore\n        additionalProperties[subKey] = val[subKey]\n      })\n      val = { ...val, ...additionalProperties }\n    }\n    acc[key] = val\n    return acc\n  }, {} as { [key: string]: any })\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export function createNode(index, key, value, depth, parent) {\n    const path = parent ? [...parent.path, index] : [];\n    return {\n        id: `[${path.join(',')}]`,\n        index,\n        key,\n        value,\n        depth,\n        collapsed: true,\n        type: getValueType(value),\n        path,\n        parentId: parent ? parent.id : null,\n        circularOfId: null,\n        children: []\n    };\n}\nexport function getValueType(value) {\n    if (Array.isArray(value)) {\n        return 'array';\n    }\n    else if (value instanceof Map) {\n        return 'map';\n    }\n    else if (value instanceof Set) {\n        return 'set';\n    }\n    else if (value instanceof Date) {\n        return 'date';\n    }\n    else if (value === null) {\n        return 'null';\n    }\n    else {\n        return typeof value;\n    }\n}\n// From redux-dev-tools\n// case 'Object':\n//   case 'Error':\n//   case 'Array':\n//   case 'Iterable':\n//   case 'Map':\n//   case 'Set':\n//   case 'MapEntry':\n//   case 'Number':\n//     return undefined;\n//   case 'String':\n//     return raw => `\"${raw}\"`;\n//   case 'Boolean':\n//     return raw => (raw ? 'true' : 'false');\n//   case 'Date':\n//     return raw => raw.toISOString();\n//   case 'Null':\n//     return () => 'null';\n//   case 'Undefined':\n//     return () => 'undefined';\n//   case 'Function':\n//   case 'Symbol':\n// export function objType(obj: any) {\n//   const type = Object.prototype.toString.call(obj).slice(8, -1)\n//   if (type === 'Object') {\n//     if (typeof obj[Symbol.iterator] === 'function') {\n//       return 'Iterable'\n//     }\n//     return obj.constructor.name\n//   }\n//   return type\n// }\nfunction getChildren(value, type) {\n    switch (type) {\n        case 'array':\n            return value.map((v, i) => [i.toString(), v]);\n        case 'map':\n            // eslint-disable-next-line no-case-declarations\n            const entries = Array.from(value.entries());\n            return entries.map(([key, value], i) => [\n                `[map entry ${i}]`,\n                {\n                    '[key]': key,\n                    '[value]': value\n                }\n            ]);\n        case 'set':\n            return Array.from(value.values()).map((v, i) => [`[set entry ${i}]`, v]);\n        case 'object':\n            return Object.entries(value);\n        default:\n            return [];\n    }\n}\nfunction shouldRecurseChildren(node, parent, iteratedValues, opts) {\n    if (!parent) {\n        // The root node's children should always be recursed\n        return true;\n    }\n    else if (node.collapsed && (parent === null || parent === void 0 ? void 0 : parent.collapsed)) {\n        // If the node's parent is uncollapsed the node's children should still be recursed\n        // in order to compute its value properly eg \"{} 4 keys\" and to place clickable arrow caret.\n        // Only when the node is completely hidden it should not be recursed\n        return false;\n    }\n    else if (!opts.stopCircularRecursion) {\n        return true;\n    }\n    else if (opts.isCircularNode) {\n        return opts.isCircularNode(node, iteratedValues);\n    }\n    else if (node.type === 'object' || node.type === 'array') {\n        const existingNodeWithValue = iteratedValues.get(node.value);\n        if (existingNodeWithValue && node.id !== existingNodeWithValue.id) {\n            node.circularOfId = existingNodeWithValue.id;\n            return false;\n        }\n        iteratedValues.set(node.value, node);\n    }\n    return true;\n}\nexport function recurseObjectProperties(index, key, value, depth, ensureNotCollapsed, parent, treeMap, oldTreeMap, iteratedValues, recomputeExpandNode, opts) {\n    var _a;\n    if (((_a = opts.omitKeys) === null || _a === void 0 ? void 0 : _a.includes(key)) || (opts.maxDepth && depth > opts.maxDepth)) {\n        return null;\n    }\n    const node = createNode(index, key, value, depth, parent);\n    const oldNode = oldTreeMap.get(node.id);\n    if (ensureNotCollapsed) {\n        // Used to ensure that either root node is always uncollapsed or when uncollapsing new nodes\n        // with expandNodeChildren the node children are recursed (if applicable) with mapChildren\n        node.collapsed = false;\n    }\n    else if (oldNode && !recomputeExpandNode) {\n        // Maintain the same expanded/collapsed toggle for a node in this path/id\n        // EXCEPT when the shouldExpandNode prop is changed...\n        node.collapsed = oldNode.collapsed;\n    }\n    else if (opts.shouldExpandNode) {\n        node.collapsed = !opts.shouldExpandNode(node);\n    }\n    treeMap.set(node.id, node);\n    if (shouldRecurseChildren(node, parent, iteratedValues, opts)) {\n        const mappedChildren = opts.mapChildren && opts.mapChildren(value, getValueType(value), node);\n        const children = mappedChildren !== null && mappedChildren !== void 0 ? mappedChildren : getChildren(value, getValueType(value));\n        node.children = children\n            .map(([key, val], idx) => recurseObjectProperties(idx, key, val, depth + 1, false, node, treeMap, oldTreeMap, iteratedValues, recomputeExpandNode, opts))\n            .filter(n => n !== null);\n    }\n    return node;\n}\nexport function recomputeTree(data, oldTreeMap, recursionOpts, recomputeExpandNode) {\n    const treeMap = new Map();\n    const iteratedValues = new Map();\n    const newTree = recurseObjectProperties(-1, 'root', data, 0, true, null, treeMap, oldTreeMap, iteratedValues, recomputeExpandNode, recursionOpts);\n    return { treeMap, tree: newTree, iteratedValues };\n}\n","import { derived, get, writable } from 'svelte/store';\nexport const createPropsStore = (initialProps) => {\n    const props = writable(initialProps);\n    const recursionOpts = derived(props, p => p.recursionOpts);\n    return {\n        props,\n        recursionOpts,\n        setProps(newProps) {\n            props.set(newProps);\n        },\n        formatValue(val, node) {\n            const { valueFormatter } = get(props);\n            const customFormat = valueFormatter ? valueFormatter(val, node) : undefined;\n            if (customFormat) {\n                return customFormat;\n            }\n            switch (node.type) {\n                case 'array':\n                    return `${node.circularOfId ? 'circular' : ''} [] ${val.length} items`;\n                case 'object':\n                    return `${node.circularOfId ? 'circular' : ''} {} ${Object.keys(val).length} keys`;\n                case 'map':\n                case 'set':\n                    return `${node.circularOfId ? 'circular' : ''} () ${val.size} entries`;\n                case 'date':\n                    return `${val.toISOString()}`;\n                case 'string':\n                    return `\"${val}\"`;\n                case 'boolean':\n                    return val ? 'true' : 'false';\n                case 'symbol':\n                    return String(val);\n                default:\n                    return val;\n            }\n        }\n    };\n};\n","import { writable } from 'svelte/store';\nexport const createRootElementStore = () => {\n    const rootElementStore = writable(null);\n    return {\n        set: rootElementStore.set,\n        subscribe: rootElementStore.subscribe\n    };\n};\n","import { get, writable } from 'svelte/store';\nimport { createNode, recurseObjectProperties } from '../tree-utils';\nexport const createTreeStore = (propsStore) => {\n    const defaultRootNode = createNode(0, 'root', [], 0, null);\n    const tree = writable(defaultRootNode);\n    const treeMap = writable(new Map());\n    const iteratedValues = writable(new Map());\n    return {\n        tree,\n        treeMap,\n        defaultRootNode,\n        init(newTree, newTreeMap, iterated) {\n            if (newTree) {\n                tree.set(newTree);\n            }\n            else {\n                tree.set(defaultRootNode);\n            }\n            treeMap.set(newTreeMap);\n            iteratedValues.set(iterated);\n        },\n        getNode(id) {\n            return get(treeMap).get(id);\n        },\n        toggleCollapse(id) {\n            const node = get(treeMap).get(id);\n            if (!node) {\n                console.warn(`Attempted to collapse non-existent node: ${id}`);\n                return;\n            }\n            const updatedNode = { ...node, collapsed: !node.collapsed };\n            treeMap.update(m => new Map(m.set(node.id, updatedNode)));\n            const recursionOpts = get(propsStore.recursionOpts);\n            if (recursionOpts) {\n                this.expandNodeChildren(updatedNode, recursionOpts);\n            }\n        },\n        expandNodeChildren(node, recursionOpts) {\n            const parent = this.getNode((node === null || node === void 0 ? void 0 : node.parentId) || '') || null;\n            if (!parent) {\n                // Only root node has no parent and it should not be expandable\n                throw Error('No parent in expandNodeChildren for node: ' + node);\n            }\n            const newTreeMap = new Map(get(treeMap));\n            const oldTreeMap = get(treeMap);\n            const previouslyIterated = get(iteratedValues);\n            const nodeWithUpdatedChildren = recurseObjectProperties(node.index, node.key, node.value, node.depth, !node.collapsed, // Ensure that when uncollapsed the node's children are always recursed\n            parent, newTreeMap, oldTreeMap, previouslyIterated, false, // Never recompute shouldExpandNode since it may override the collapsing of this node\n            recursionOpts);\n            if (!nodeWithUpdatedChildren)\n                return;\n            parent.children = parent.children.map(c => c.id === nodeWithUpdatedChildren.id ? nodeWithUpdatedChildren : c);\n            newTreeMap.set(nodeWithUpdatedChildren.id, nodeWithUpdatedChildren);\n            newTreeMap.set(parent.id, parent);\n            treeMap.set(newTreeMap);\n            iteratedValues.set(previouslyIterated);\n        },\n        expandAllNodesToNode(id) {\n            function recurseNodeUpwards(updated, node) {\n                if (!node)\n                    return;\n                updated.set(node.id, { ...node, collapsed: false });\n                if (node.parentId) {\n                    recurseNodeUpwards(updated, updated.get(node.parentId));\n                }\n            }\n            const updated = new Map(get(treeMap));\n            recurseNodeUpwards(updated, updated.get(id));\n            treeMap.set(updated);\n        }\n    };\n};\n","<script >import { getContext } from 'svelte';\nexport let id;\nconst { treeStore, propsStore, rootElementStore } = getContext('svelte-tree-view');\nlet node;\n$: {\n    let found = treeStore.getNode(id);\n    // Should explode rather than have logic written around undefinedness\n    // as this component should be unmounted if it's undefined.\n    if (!found) {\n        throw Error('[svelte-tree-view] TreeViewNode.svelte received undefined node from treeMapStore whereas it should be already unmounted!');\n    }\n    node = found;\n}\n$: hasChildren = node && node.children.length > 0;\n$: props = propsStore.props;\n$: valueComponent = $props.valueComponent;\ntreeStore.treeMap.subscribe(value => {\n    const n = value.get(id);\n    if (n && node !== n) {\n        node = n;\n    }\n});\nfunction handleLogNode() {\n    // eslint-disable-next-line no-console\n    console.info('%c [svelte-tree-view]: Property added to window._node', 'color: #b8e248');\n    // eslint-disable-next-line no-console\n    console.log(node.value);\n    try {\n        if (typeof window !== 'undefined')\n            window._node = node.value;\n    }\n    catch (err) {\n        console.error('Failed to set _node, window was undefined');\n    }\n}\nfunction handleCopyNodeToClipboard() {\n    try {\n        navigator.clipboard.writeText(JSON.stringify(node.value));\n    }\n    catch (err) {\n        console.error('Copying node to clipboard failed: ', err);\n    }\n}\nfunction handleToggleCollapse() {\n    var _a;\n    if (hasChildren) {\n        treeStore.toggleCollapse(node.id);\n    }\n    else if (node.circularOfId) {\n        treeStore.expandAllNodesToNode(node.circularOfId);\n        (_a = $rootElementStore.querySelector(`li[data-tree-id=\"${node.circularOfId}\"]`)) === null || _a === void 0 ? void 0 : _a.scrollIntoView();\n    }\n}\nfunction valueComponentDefaultFormatter(val) {\n    return propsStore.formatValue(val, node);\n}\n</script>\n\n<li class=\"row\" class:collapsed={node.collapsed && hasChildren} data-tree-id={node.id}>\n  {#if hasChildren}\n    <button\n      class={`arrow-btn ${node.collapsed ? 'collapsed' : ''}`}\n      on:click={handleToggleCollapse}\n    >\n      ▶\n    </button>\n  {/if}\n  <div\n    class=\"node-key\"\n    class:has-children={hasChildren}\n    class:p-left={!hasChildren}\n    on:click={handleToggleCollapse}\n  >\n    {node.key}:\n  </div>\n  <div\n    class=\"node-value\"\n    data-type={node.type}\n    class:expanded={!node.collapsed && hasChildren}\n    class:has-children={hasChildren}\n    on:click={handleToggleCollapse}\n  >\n    {#if valueComponent}\n      <svelte:component\n        this={valueComponent}\n        value={node.value}\n        {node}\n        defaultFormatter={valueComponentDefaultFormatter}\n      />\n    {:else}\n      {propsStore.formatValue(node.value, node)}\n    {/if}\n  </div>\n  <div class=\"buttons\">\n    {#if $props.showLogButton}\n      <button class=\"log-copy-button\" on:click={handleLogNode}>log</button>\n    {/if}\n    {#if $props.showCopyButton}\n      <button class=\"log-copy-button\" on:click={handleCopyNodeToClipboard}>copy</button>\n    {/if}\n  </div>\n</li>\n{#if !node.collapsed && hasChildren}\n  <li class=\"row\">\n    <ul>\n      {#each node.children as child}\n        <svelte:self id={child.id} />\n      {/each}\n    </ul>\n  </li>\n{/if}\n\n<style >ul {\n  display: flex;\n  flex-direction: column;\n  height: max-content;\n  list-style: none;\n  padding: 0;\n  padding-left: var(--tree-view-left-indent);\n  margin: 0;\n  width: 100%;\n}\n\nli {\n  align-items: baseline;\n  display: flex;\n  height: max-content;\n  line-height: var(--tree-view-line-height);\n  list-style: none;\n  width: 100%;\n}\n\nli + li {\n  margin-top: 0.25em;\n}\n\n.empty-block {\n  visibility: hidden;\n}\n\n.node-key {\n  color: var(--tree-view-base0D);\n  margin-right: var(--tree-view-key-margin-right);\n}\n.node-key.has-children {\n  cursor: pointer;\n}\n.node-key.p-left {\n  padding-left: 1.1em;\n}\n\n.node-value {\n  color: var(--tree-view-base0B);\n  margin-right: 0.5em;\n  word-break: break-all;\n}\n.node-value[data-type=number], .node-value[data-type=boolean] {\n  color: var(--tree-view-base09);\n}\n.node-value[data-type=null], .node-value[data-type=undefined] {\n  color: var(--tree-view-base08);\n}\n.node-value.expanded {\n  color: var(--tree-view-base03);\n}\n.node-value.has-children {\n  cursor: pointer;\n}\n\n.arrow-btn {\n  background: transparent;\n  border: 0;\n  color: var(--tree-view-base0D);\n  cursor: pointer;\n  margin-right: 0.7em;\n  padding: 0;\n  transition: all 150ms ease 0s;\n  transform: rotateZ(90deg);\n  transform-origin: 47% 43%;\n  position: relative;\n  line-height: 1.1em;\n  font-size: 0.75em;\n}\n.arrow-btn.collapsed {\n  transform: rotateZ(0deg);\n}\n\n.buttons {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.log-copy-button {\n  background: transparent;\n  border: 0;\n  color: var(--tree-view-base0D);\n  cursor: pointer;\n  margin: 0;\n  padding: 0 0.5em;\n}\n.log-copy-button:hover {\n  background: rgba(255, 162, 177, 0.4);\n  border-radius: 2px;\n  color: var(--tree-view-base07);\n}</style>\n","<script >var _a;\nimport { setContext, onMount } from 'svelte';\nimport { get } from 'svelte/store';\nimport { recomputeTree } from './tree-utils';\nimport { createPropsStore, createRootElementStore, createTreeStore } from './stores';\nimport TreeViewNode from './TreeViewNode.svelte';\nexport let data, theme = undefined, showLogButton = false, showCopyButton = false, valueComponent = undefined, recursionOpts = {}, valueFormatter = undefined;\nlet rootElement = null;\nconst defaultRecursionOpts = {\n    maxDepth: 16,\n    omitKeys: [],\n    stopCircularRecursion: false,\n    shouldExpandNode: () => false\n};\nlet props = {\n    showLogButton,\n    showCopyButton,\n    valueComponent,\n    recursionOpts: {\n        ...defaultRecursionOpts,\n        ...recursionOpts\n    },\n    valueFormatter\n};\n$: rootNode = treeStore.tree;\n$: {\n    // To keep things less messy all props are joined to one object _except_ the recursionOpts\n    // which is picked from the old props. This is to allow checking between the old and new recursionOpts\n    // in the recomputeTree.\n    props = {\n        showLogButton,\n        showCopyButton,\n        valueComponent,\n        valueFormatter,\n        recursionOpts: props.recursionOpts\n    };\n}\n$: {\n    // Combine the defaultProps with the possible new recursion opts\n    const newRecursionOpts = {\n        ...defaultRecursionOpts,\n        ...recursionOpts\n    };\n    // Compare the old shouldExpandNode option with the possible new shouldExpandNode\n    // to know whether to whole tree should be recomputed.\n    const recomputeExpandNode = ((_a = props === null || props === void 0 ? void 0 : props.recursionOpts) === null || _a === void 0 ? void 0 : _a.shouldExpandNode) !== newRecursionOpts.shouldExpandNode;\n    const oldTreeMap = get(treeStore.treeMap);\n    const { treeMap, tree, iteratedValues } = recomputeTree(data, oldTreeMap, newRecursionOpts, recomputeExpandNode);\n    treeStore.init(tree, treeMap, iteratedValues);\n    props.recursionOpts = newRecursionOpts;\n    propsStore.setProps(props);\n}\n$: {\n    if (theme && rootElement) {\n        let key;\n        for (key in theme) {\n            // This ridiculous thing is for TypeScript type inference. Yey..?\n            const value = theme[key];\n            if (rootElement && key.includes('base') && value) {\n                rootElement.style.setProperty(`--tree-view-${key}`, value);\n            }\n        }\n    }\n}\nconst propsStore = createPropsStore(props);\nconst rootElementStore = createRootElementStore();\nconst treeStore = createTreeStore(propsStore);\nsetContext('svelte-tree-view', {\n    propsStore,\n    rootElementStore,\n    treeStore\n});\nonMount(() => {\n    rootElementStore.set(rootElement);\n});\n</script>\n\n<ul class={`${$$props.class || ''} svelte-tree-view`} bind:this={rootElement}>\n  {#each $rootNode.children as child}\n    <TreeViewNode id={child.id} />\n  {/each}\n</ul>\n\n<style>\n  * {\n    box-sizing: border-box;\n  }\n  .svelte-tree-view {\n    --tree-view-font-family: 'Helvetica Neue', 'Calibri Light', Roboto, sans-serif;\n    --tree-view-font-size: 13px;\n    --tree-view-left-indent: 0.875em;\n    --tree-view-line-height: 1.1;\n    --tree-view-key-margin-right: 0.5em;\n  }\n  ul {\n    background: var(--tree-view-base00);\n    font-family: var(--tree-view-font-family);\n    font-size: var(--tree-view-font-size);\n    height: max-content;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: max-content;\n  }\n</style>\n","<section class=\"split-view\">\n  <slot class=\"left-panel\" name=\"left\" />\n  <slot class=\"right-panel\" name=\"right\" />\n</section>\n\n<style lang=\"scss\">\n  section {\n    border-top: 1px solid rgba($color-red-light, 0.2);\n    color: $color-white;\n    display: flex;\n    height: calc(100% - var(--height-tabs-menu));\n    width: 100%;\n  }\n  :global(.split-view h2) {\n    color: $color-red-gray;\n    font-family: var(--font-sans);\n    font-size: var(--font-medium);\n    font-weight: 400;\n    letter-spacing: 1px;\n    margin: 0;\n    text-transform: uppercase;\n  }\n  :global(.split-view > .left-panel) {\n    display: flex;\n    flex-direction: column;\n    flex-grow: 1;\n    overflow: scroll;\n    padding: 1em;\n  }\n  :global(.split-view > .right-panel) {\n    border-left: 1px solid rgba($color-red-light, 0.2);\n    display: flex;\n    flex-direction: column;\n    flex-grow: 1;\n    overflow: scroll;\n    padding: 1em;\n  }\n  :global(.split-view .hidden) {\n    visibility: hidden;\n  }\n</style>\n","<script lang=\"ts\">\n  export let selected = false\n</script>\n\n<button\n  on:click\n  on:mouseover\n  on:mouseenter\n  on:mouseleave\n  on:focus\n  class={`${$$props.class || ''}`}\n  class:selected><slot /></button\n>\n\n<style lang=\"scss\">\n  button {\n    background: transparent;\n    border: 0;\n    border-radius: 2px;\n    color: $color-gray-light;\n    cursor: pointer;\n    font-size: var(--font-small);\n    padding: 6px 10px;\n    text-transform: uppercase;\n    &:hover {\n      background: rgba($color-red-light, 0.4);\n      color: $color-white;\n    }\n    &.selected {\n      background: rgba($color-red-light, 0.4);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from '$context'\n  import { latestEntry } from '$stores/stateHistory'\n  import { getActiveMarks } from './getActiveMarks'\n  import { createSelection, createFullSelection } from './selection'\n\n  import TreeView from 'svelte-tree-view'\n  import type { TreeNode } from 'svelte-tree-view'\n  import SplitView from '../SplitView.svelte'\n  import Button from '$components/Button.svelte'\n\n  const { view } = getContext('editor-view')\n  let doc = view.state.doc.toJSON()\n  let selection = createSelection(view.state.selection)\n  let currentState = view.state\n  let activeMarks: string[] = []\n  let nodeSize = view.state.doc.nodeSize\n  let childCount = view.state.doc.childCount\n  let expandedSelection = false\n\n  latestEntry.subscribe(e => {\n    if (!e) return\n    const { state } = e\n    currentState = state\n    doc = state.doc.toJSON()\n    selection = expandedSelection\n      ? createFullSelection(state.selection)\n      : createSelection(state.selection)\n    activeMarks = getActiveMarks(state)\n    nodeSize = state.doc.nodeSize\n    childCount = state.doc.childCount\n  })\n\n  function handleClickLogDoc() {\n    console.log(doc)\n    window._doc = doc\n  }\n  function handleExpandSelection() {\n    expandedSelection = !expandedSelection\n    if (expandedSelection) {\n      selection = createFullSelection(currentState.selection)\n    } else {\n      selection = createSelection(currentState.selection)\n    }\n  }\n  function formatDocNodeValue(val: any, n: TreeNode) {\n    if (n.type === 'object' && val.type) {\n      return `{} ${val.type}`\n    }\n  }\n</script>\n\n<SplitView>\n  <div slot=\"left\" class=\"left-panel\">\n    <div class=\"top-row\">\n      <h2>Current doc</h2>\n      <Button on:click={handleClickLogDoc}>log</Button>\n    </div>\n    <TreeView\n      class=\"tree-view\"\n      data={doc}\n      showLogButton\n      showCopyButton\n      valueFormatter={formatDocNodeValue}\n    />\n  </div>\n  <div slot=\"right\" class=\"right-panel\">\n    <div class=\"top-row\">\n      <h2>Selection</h2>\n      <Button class=\"selection-btn\" on:click={handleExpandSelection}\n        ><span class=\"caret-icon\" class:expanded={expandedSelection} /></Button\n      >\n    </div>\n    <TreeView class=\"tree-view\" data={selection} />\n    <div>\n      <h2>Active marks</h2>\n      {#if activeMarks.length === 0}\n        <div class=\"no-marks\">No active marks</div>\n      {:else}\n        <TreeView class=\"tree-view\" data={activeMarks} />\n      {/if}\n    </div>\n    <div>\n      <h2>Document stats</h2>\n      <TreeView\n        class=\"tree-view\"\n        data={{\n          nodeSize,\n          childCount\n        }}\n      />\n    </div>\n  </div>\n</SplitView>\n\n<style lang=\"scss\">\n  .top-row {\n    align-items: center;\n    display: flex;\n    justify-content: space-between;\n  }\n  .left-panel {\n    overflow: scroll;\n  }\n  .right-panel {\n    border-left: 1px solid rgba($color-red-light, 0.2);\n    flex-grow: 0;\n    min-width: 200px;\n    width: 200px;\n  }\n  :global(.split-view .selection-btn) {\n    height: 24px;\n    width: 35px;\n  }\n  .caret-icon::before {\n    content: '▶';\n  }\n  .caret-icon.expanded::before {\n    content: '▼';\n  }\n  .no-marks {\n    color: $color-blue-light;\n    margin: 0.5em 0 1em 1em;\n  }\n  :global(.split-view .tree-view) {\n    margin: 0.5em 0 1em 0;\n  }\n</style>\n","import type { Delta } from 'jsondiffpatch'\nimport type { TreeNode, ValueType } from 'svelte-tree-view'\n\n// function postprocessValue(value: any) {\n//   if (value && value._t === 'a') {\n//     const res: { [key: string]: string | string[] } = {}\n//     for (const key in value) {\n//       if (key !== '_t') {\n//         if (key[0] === '_' && !value[key.substr(1)]) {\n//           res[key.substr(1)] = value[key]\n//         } else if (value['_' + key]) {\n//           res[key] = [value['_' + key][0], value[key][0]]\n//         } else if (!value['_' + key] && key[0] !== '_') {\n//           res[key] = value[key]\n//         }\n//       }\n//     }\n//     return res\n//   }\n//   return value\n// }\n\nexport function mapSelectionDeltaChildren(\n  _val: any,\n  type: ValueType,\n  _parent: TreeNode\n): [string, any][] | undefined {\n  if (type !== 'array') return\n  return []\n}\n\n/**\n * Magic function to transform jsondiffpatch array deltas\n * https://github.com/benjamine/jsondiffpatch/blob/master/docs/deltas.md\n * https://benjamine.github.io/jsondiffpatch/demo/index.html\n */\nexport function mapDocDeltaChildren(delta: Delta, type: ValueType) {\n  // So due to the way the tree-view works, it will automatically map the children of an array\n  // to their own nodes. For diff deltas, however, we want to omit those children and just show\n  // a value wrapped with <span> to show either deleted or inserted content\n  if (type === 'array' && delta[1] === 0 && delta[2] === 0) {\n    // Remove operation is defined by two 0s in its delta [{ <deleted> }, 0, 0]\n    return []\n    // } else if (type === 'array' && typeof delta[0] === 'string' && typeof delta[1] === 'number' && delta[2] === 3) {\n    // Move operation is almost the same as remove, except its value is empty and the second number\n    // points to the moved index eg [\"\", 6, 3] AND the third value is always '3'\n    // But since these seem to never occur (and they weren't handled in the previous version) we are not doing anything\n    // with them for now.\n  } else if (type === 'array' && typeof delta[0] === 'string' && delta[1] === 0 && delta[2] === 2) {\n    // If a diff between two strings gets too long, a text diff algorithm is used which produces an array\n    // with unidiff as the first value, 0 as the second and 2 as third.\n    // Eg [\"@@ -1,4 +1,9 @@\\n-text\\n+paragraph\\n\", 0, 2]\n    return []\n  } else if (type === 'array' && delta.length === 1 && typeof delta[0] === 'object') {\n    // Insert operations do not have indexes (it's already indexed in the array) and carry\n    // only an object payload eg [{ <inserted> }]\n    return []\n  }\n\n  // The main delta objects are objects denoted by key '_t' with 'a' value which we shall omit.\n  // DiffValue component handles the text diffs otherwise.\n  if (type !== 'object' || delta._t !== 'a') return\n\n  // We shall remap the values to omit '_t' and remove underscores from the keys\n  const transformed: [string, any][] = []\n  for (const key in delta) {\n    if (key === '_t') continue\n    // Remove or move operation is indicated by an underscore before the index eg '_2'\n    if (key.charAt(0) === '_') {\n      transformed.push([key.substr(1), delta[key]])\n    } else {\n      transformed.push([key, delta[key]])\n    }\n  }\n  return transformed\n}\n","<script lang=\"ts\">\n  import { createEventDispatcher } from 'svelte'\n  import type { HistoryEntry } from '$typings/history'\n\n  export let listItems: {\n      isGroup: boolean\n      topEntry: HistoryEntry | undefined\n      entries: (HistoryEntry | undefined)[]\n      expanded: boolean\n    }[] = [],\n    selectedId: string\n\n  const dispatchClick = createEventDispatcher<{\n    'click-item': { id: string | undefined; groupIdx: number; wasTopNode: boolean }\n  }>()\n  const dispatchDblClick = createEventDispatcher<{ 'dblclick-item': { id?: string } }>()\n</script>\n\n<ul>\n  {#each listItems as group, groupIdx}\n    <li class:selected={!group.expanded && selectedId === group?.topEntry?.id}>\n      <button\n        class:is-group={group.isGroup}\n        on:click={() =>\n          dispatchClick('click-item', { id: group?.topEntry?.id, groupIdx, wasTopNode: true })}\n        on:dblclick={() => dispatchDblClick('dblclick-item', { id: group?.topEntry?.id })}\n      >\n        <span>\n          {group?.topEntry?.timeStr}\n          {#if group.isGroup}\n            [{group.entries.length}]\n          {/if}\n        </span>\n        {#if group.isGroup && group.entries.length > 1}\n          <span class=\"caret-icon\" class:expanded={group.expanded} />\n        {/if}\n      </button>\n    </li>\n    {#if group.isGroup && group.expanded}\n      {#each group.entries as subEntry}\n        <li class:selected={selectedId === subEntry?.id}>\n          <button\n            class=\"p-left\"\n            on:click={() =>\n              dispatchClick('click-item', { id: subEntry?.id, groupIdx, wasTopNode: false })}\n          >\n            {subEntry?.timeStr}\n          </button>\n        </li>\n      {/each}\n    {/if}\n  {/each}\n</ul>\n\n<style lang=\"scss\">\n  ul {\n    color: $color-white;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    height: 100%;\n    width: 100%;\n  }\n  li {\n    transition: background 0.1s;\n    &:hover {\n      background: rgba($color-red-light, 0.4);\n      color: $color-white;\n    }\n    &.selected {\n      background: rgba($color-red-light, 0.4);\n    }\n  }\n  li + li {\n    border-top: 1px solid $color-purple;\n  }\n  button {\n    background: transparent;\n    border: 0;\n    color: $color-gray-light;\n    cursor: pointer;\n    display: flex;\n    font-family: monospace;\n    font-size: var(--font-small);\n    justify-content: space-between;\n    padding: 6px 18px;\n    text-transform: uppercase;\n    width: 100%;\n\n    &.p-left {\n      margin-left: 1em;\n    }\n  }\n  .caret-icon::before {\n    content: '▶';\n  }\n  .caret-icon.expanded::before {\n    content: '▼';\n  }\n</style>\n","<script lang=\"ts\">\n  import type { TreeNode } from 'svelte-tree-view'\n\n  export let node: TreeNode, defaultFormatter: (val: any) => string\n\n  $: value = node.value\n\n  function replaceSpacesWithNonBreakingSpace(str: string) {\n    return str.replace(/\\s/gm, ' ')\n  }\n  function parseTextDiff(textDiff: string) {\n    const diffByLines = textDiff.split(/\\n/gm).slice(1)\n    return diffByLines.map(line => {\n      const type = line.startsWith('-') ? 'delete' : line.startsWith('+') ? 'add' : 'raw'\n\n      return { [type]: replaceSpacesWithNonBreakingSpace(line.substr(1)) }\n    })\n  }\n  function stringifyAndShrink(v: any) {\n    if (v === null) {\n      return 'null'\n    }\n    const str = JSON.stringify(v)\n    if (typeof str === 'undefined') {\n      return 'undefined'\n    }\n    return str.length > 22 ? `${str.substr(0, 15)}…${str.substr(-5)}` : str\n  }\n\n  function getValueString(raw: any) {\n    if (typeof raw === 'string') {\n      return raw\n    }\n    return stringifyAndShrink(raw)\n  }\n</script>\n\n{#if Array.isArray(value)}\n  <!-- The why https://github.com/benjamine/jsondiffpatch/blob/master/docs/deltas.md -->\n  {#if value.length === 1}\n    <span class=\"added\">{getValueString(value[0])}</span>\n  {:else if value.length === 2}\n    <span class=\"updated\">\n      <span class=\"deleted\">{getValueString(value[0])}</span>\n      <span class=\"arrow\"> =&gt;</span>\n      <span class=\"added\">{getValueString(value[1])}</span>\n    </span>\n  {:else if value.length === 3 && value[1] === 0 && value[2] === 0}\n    <span class=\"deleted\">{getValueString(value[0])}</span>\n  {:else if value.length === 3 && value[2] === 2}\n    <span class=\"updated\">\n      {#each parseTextDiff(value[0]) as item}\n        {#if item.delete}\n          <span class=\"deleted\">{item.delete}</span>\n        {:else if item.add}\n          <span class=\"added\">{item.add}</span>\n        {:else}\n          <span>{item.raw}</span>\n        {/if}\n      {/each}\n    </span>\n  {/if}\n{:else}\n  {defaultFormatter(value)}\n{/if}\n\n<style lang=\"scss\">\n  .added {\n    display: inline-block;\n    background: $color-green-light;\n    border-radius: 1px;\n    color: $color-green;\n    padding: 1px 2px;\n    text-indent: 0;\n    min-height: 1ex;\n  }\n  .deleted {\n    display: inline-block;\n    background: $color-red;\n    border-radius: 1px;\n    color: $color-gray-light;\n    padding: 1px 2px;\n    text-decoration: line-through;\n    text-indent: 0;\n    min-height: 1ex;\n  }\n  .updated {\n    word-break: break-all;\n  }\n  .updated .added {\n    background: $color-yellow;\n  }\n  .arrow {\n    color: $color-green-light;\n  }\n</style>\n","<script lang=\"ts\">\n  import { stateHistory, shownHistoryGroups, latestEntry } from '$stores/stateHistory'\n  import type { HistoryEntry, HistoryGroup } from '$typings/history'\n  import { mapDocDeltaChildren, mapSelectionDeltaChildren } from './mapDeltas'\n  import TreeView from 'svelte-tree-view'\n\n  import SplitView from '../SplitView.svelte'\n  import HistoryList from './HistoryList.svelte'\n  import DiffValue from './DiffValue.svelte'\n  import Button from '$components/Button.svelte'\n\n  import { getContext } from '$context'\n\n  let selectedEntry: HistoryEntry | undefined = undefined,\n    showTr = false\n\n  const { replaceEditorContent } = getContext('editor-view')\n\n  let expandTrTreeView = false\n  let transactionRecursionOpts = {\n    maxDepth: 24,\n    stopCircularRecursion: true,\n    omitKeys: ['schema'],\n    shouldExpandNode: () => expandTrTreeView\n  }\n  $: listItems = $shownHistoryGroups.map((g: HistoryGroup) => ({\n    isGroup: g.isGroup,\n    topEntry: $stateHistory.get(g.topEntryId),\n    entries: g.entryIds.map(id => $stateHistory.get(id)),\n    expanded: g.expanded\n  }))\n\n  latestEntry.subscribe(v => {\n    if (v) selectedEntry = v\n  })\n\n  function toggleShowTr() {\n    showTr = !showTr\n  }\n  function handleLogTr() {\n    console.info('%c [prosemirror-dev-toolkit]: Property added to window._trs', 'color: #b8e248')\n    console.log(selectedEntry?.trs)\n    window._trs = selectedEntry?.trs\n  }\n  /**\n   * Handles the clicks of the history entries.\n   *\n   * Sets the clicked entry as the selectedEntry but in the case of topNode, meaning\n   * in a selection group (shown with [x] number) the entry has a sublist of entries\n   * where the previous is duplicated as the first entry. Therefore on expanding the group\n   * selecting the first sub-entry, otherwise collapsing but still keeping the topNode selected.\n   * Kinda confusing but eh.\n   */\n  function handleEntrySelect(\n    e: CustomEvent<{ id: string | undefined; groupIdx: number; wasTopNode: boolean }>\n  ) {\n    const { id = '', groupIdx, wasTopNode } = e.detail\n    selectedEntry = $stateHistory.get(id)\n    if (!selectedEntry) return\n    const group = listItems[groupIdx]\n    if (group.isGroup && group.entries.length > 1 && wasTopNode) {\n      shownHistoryGroups.update(val =>\n        val.map((g, idx) => (idx !== groupIdx ? g : { ...g, expanded: !g.expanded }))\n      )\n    }\n  }\n  function handleEntryDblClick(e: CustomEvent<{ id?: string }>) {\n    selectedEntry = $stateHistory.get(e.detail.id || '')\n    selectedEntry && replaceEditorContent(selectedEntry.state)\n  }\n  function handleToggleExpandTrTreeView() {\n    expandTrTreeView = !expandTrTreeView\n    transactionRecursionOpts = {\n      ...transactionRecursionOpts,\n      shouldExpandNode: () => expandTrTreeView\n    }\n  }\n</script>\n\n<SplitView>\n  <div slot=\"left\" class=\"left-panel\">\n    <HistoryList\n      {listItems}\n      selectedId={selectedEntry?.id || ''}\n      on:click-item={handleEntrySelect}\n      on:dblclick-item={handleEntryDblClick}\n    />\n  </div>\n  <div slot=\"right\" class=\"right-panel\">\n    {#if selectedEntry}\n      <div>\n        {#if selectedEntry.contentDiff}\n          <div class=\"entry-row\">\n            <div class=\"title-container\">\n              <h2>Doc diff</h2>\n              <Button class=\"hidden\">log</Button>\n            </div>\n            <TreeView\n              class=\"tree-view\"\n              data={selectedEntry.contentDiff}\n              showLogButton\n              showCopyButton\n              valueComponent={DiffValue}\n              recursionOpts={{\n                maxDepth: 12,\n                mapChildren: mapDocDeltaChildren,\n                shouldExpandNode: () => true\n              }}\n            />\n          </div>\n        {/if}\n        {#if selectedEntry.selectionDiff}\n          <div class=\"entry-row\">\n            <div class=\"title-container\">\n              <h2>Selection diff</h2>\n              <Button class=\"hidden\">log</Button>\n            </div>\n            <TreeView\n              class=\"tree-view\"\n              data={selectedEntry.selectionDiff}\n              valueComponent={DiffValue}\n              recursionOpts={{\n                mapChildren: mapSelectionDeltaChildren,\n                shouldExpandNode: () => true\n              }}\n            />\n          </div>\n        {/if}\n        {#if selectedEntry.selectionHtml.length > 0}\n          <div class=\"entry-row\">\n            <div class=\"title-container\">\n              <h2>Selection content</h2>\n              <Button class=\"hidden\">log</Button>\n            </div>\n            <pre class=\"selection-html\"><code>{@html selectedEntry.selectionHtml}</code></pre>\n          </div>\n        {/if}\n        <div class=\"entry-row\">\n          <div class=\"title-container\">\n            <h2>Transaction</h2>\n            <div class=\"transaction-buttons\">\n              {#if showTr}\n                <Button on:click={handleToggleExpandTrTreeView}>\n                  {expandTrTreeView ? 'collapse' : 'expand'}\n                </Button>\n                <Button on:click={handleLogTr}>log</Button>\n              {/if}\n              <Button on:click={toggleShowTr}>\n                {showTr ? 'hide' : 'show'}\n              </Button>\n            </div>\n          </div>\n          {#if showTr}\n            <TreeView\n              class=\"tree-view\"\n              data={selectedEntry.trs[0]}\n              showLogButton\n              showCopyButton\n              recursionOpts={transactionRecursionOpts}\n            />\n          {/if}\n        </div>\n      </div>\n    {:else}\n      <div class=\"equal-diff\">Docs are equal.</div>\n    {/if}\n  </div>\n</SplitView>\n\n<style lang=\"scss\">\n  :global(.hidden) {\n    display: none;\n    visibility: hidden;\n  }\n  .left-panel {\n    flex-grow: 0;\n    padding: 0;\n    min-width: 190px;\n    width: 190px;\n  }\n  .title-container {\n    align-items: center;\n    display: flex;\n  }\n  .transaction-buttons {\n    margin-left: 2rem;\n  }\n  .entry-row + .entry-row {\n    margin-top: 1em;\n  }\n  .selection-html {\n    font-weight: 100;\n    margin: 0.5em 0 0 0;\n    padding: 0;\n  }\n  .equal-diff {\n    align-items: center;\n    color: $color-red-light;\n    display: flex;\n    font-size: 14px;\n    height: 100%;\n    justify-content: center;\n    width: 100%;\n  }\n</style>\n","<script lang=\"ts\">\n  export let listItems: { key: string; value: string; empty?: boolean }[] = [],\n    selectedKey: string | undefined,\n    onSelect: (item: { key: string; value: string }) => void\n</script>\n\n<ul>\n  {#each listItems as item}\n    <li>\n      <button\n        class:selected={selectedKey === item.key}\n        class:empty={item.empty}\n        on:click={() => onSelect(item)}>{item.value}</button\n      >\n    </li>\n  {/each}\n</ul>\n\n<style lang=\"scss\">\n  ul {\n    color: $color-white;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    height: 100%;\n    width: 100%;\n  }\n  li + li {\n    border-top: 1px solid $color-purple;\n  }\n  button {\n    background: transparent;\n    border: 0;\n    color: $color-gray-light;\n    cursor: pointer;\n    display: flex;\n    font-family: monospace;\n    font-size: var(--font-small);\n    font-weight: 100;\n    padding: 6px 18px;\n    text-transform: uppercase;\n    width: 100%;\n    &:hover {\n      background: rgba($color-red-light, 0.4);\n      color: $color-white;\n      &.empty {\n        background: $color-purple-dark;\n      }\n    }\n    &.selected {\n      background: rgba($color-red-light, 0.4);\n      &.empty {\n        background: $color-purple-dark;\n      }\n    }\n    &.empty {\n      color: $color-dim-text;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from '$context'\n  import type { EditorState } from 'prosemirror-state'\n  import { latestEntry } from '$stores/stateHistory'\n\n  import SplitView from './SplitView.svelte'\n  import TreeView from 'svelte-tree-view'\n  import List from './List.svelte'\n  import Button from '$components/Button.svelte'\n\n  import type { Plugin } from '$typings/pm'\n\n  const { view } = getContext('editor-view')\n  let expandPluginState = false\n  let recursionOpts = {\n    maxDepth: 10,\n    stopCircularRecursion: true,\n    shouldExpandNode: () => expandPluginState\n  }\n  let editorState: EditorState = view.state\n  let plugins = editorState.plugins as Plugin[]\n  let selectedPlugin = plugins[0] as Plugin | undefined\n  // I don't know how, but I've found in one editor plugin did not have getState method\n  $: pluginState = selectedPlugin?.getState\n    ? selectedPlugin.getState(editorState)\n    : (undefined as any)\n  $: listItems = plugins.map((p: Plugin) => ({\n    key: p.key,\n    value: p.key.toUpperCase(),\n    empty: !(p.getState && p.getState(editorState))\n  }))\n\n  latestEntry.subscribe(e => {\n    if (!e) return\n    editorState = e.state\n    plugins = editorState.plugins as Plugin[]\n    selectedPlugin = plugins.find(p => p.key === selectedPlugin?.key) as Plugin\n  })\n\n  function handlePluginSelect(item: { key: string; value: string }) {\n    selectedPlugin = plugins.find(p => p.key === item.key) as Plugin\n  }\n  function handleToggleExpand() {\n    expandPluginState = !expandPluginState\n    recursionOpts = { ...recursionOpts, shouldExpandNode: () => expandPluginState }\n  }\n  function handleLogState() {\n    window._plugin = [selectedPlugin, pluginState]\n    console.info('%c [prosemirror-dev-toolkit]: Property added to window._plugin', 'color: #b8e248')\n    console.log(selectedPlugin)\n    console.log(pluginState)\n  }\n</script>\n\n<SplitView>\n  <div slot=\"left\" class=\"left-panel\">\n    <List {listItems} selectedKey={selectedPlugin?.key} onSelect={handlePluginSelect} />\n  </div>\n  <div slot=\"right\" class=\"right-panel\">\n    {#if pluginState}\n      <div class=\"top-row\">\n        <h2>Plugin state</h2>\n        <div>\n          <Button on:click={handleToggleExpand}>\n            {expandPluginState ? 'collapse' : 'expand'}\n          </Button>\n          <Button on:click={handleLogState}>log</Button>\n        </div>\n      </div>\n    {/if}\n    {#if pluginState}\n      <TreeView data={pluginState} showLogButton showCopyButton {recursionOpts} />\n    {:else}\n      <div class=\"empty-state\">Plugin has no state</div>\n    {/if}\n  </div>\n</SplitView>\n\n<style lang=\"scss\">\n  .top-row {\n    align-items: center;\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 0.5em;\n  }\n  .left-panel {\n    flex-grow: 0;\n    overflow: scroll;\n    padding: 0;\n    min-width: 190px;\n    width: 190px;\n  }\n  .right-panel {\n    border-left: 1px solid rgba($color-red-light, 0.2);\n  }\n  .empty-state {\n    align-items: center;\n    color: $color-red-light;\n    display: flex;\n    font-size: 14px;\n    height: 100%;\n    justify-content: center;\n    width: 100%;\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from '$context'\n\n  import TreeView from 'svelte-tree-view'\n  import SplitView from './SplitView.svelte'\n  import Button from '$components/Button.svelte'\n\n  const { view } = getContext('editor-view')\n\n  let nodes = view.state.schema.nodes\n  let marks = view.state.schema.marks\n</script>\n\n<SplitView>\n  <div slot=\"left\" class=\"left-panel\">\n    <div class=\"top-row\">\n      <h2>Nodes</h2>\n      <Button class=\"hidden\">log</Button>\n    </div>\n    <TreeView\n      class=\"tree-view\"\n      data={nodes}\n      showLogButton\n      showCopyButton\n      recursionOpts={{\n        stopCircularRecursion: true\n      }}\n    />\n  </div>\n  <div slot=\"right\" class=\"right-panel\">\n    <div class=\"top-row\">\n      <h2>Marks</h2>\n      <Button class=\"hidden\">log</Button>\n    </div>\n    <TreeView\n      class=\"tree-view\"\n      data={marks}\n      showLogButton\n      showCopyButton\n      recursionOpts={{\n        stopCircularRecursion: true\n      }}\n    />\n  </div>\n</SplitView>\n\n<style lang=\"scss\">\n  :global(.hidden) {\n    display: none;\n    visibility: hidden;\n  }\n  .top-row {\n    align-items: center;\n    display: flex;\n    justify-content: space-between;\n  }\n  .left-panel {\n    overflow: scroll;\n    padding: 1em;\n  }\n  .right-panel {\n    border-left: 1px solid rgba($color-red-light, 0.2);\n    overflow: scroll;\n    padding: 1em;\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from '$context'\n  import type { Node as PMNode } from 'prosemirror-model'\n  import type { Fragment } from '$typings/pm'\n\n  const { colors, handleNodeClick } = getContext('doc-view')\n\n  export let node: PMNode,\n    startPos: number,\n    isRoot = false\n\n  $: fragment = node.content as Fragment\n  $: color = colors[node.type.name]\n  $: name =\n    node.isText && node.marks.length > 0\n      ? `${node.type.name} - [${node.marks.map(m => m.type.name).join(', ')}]`\n      : node.type.name\n\n  $: startPositions = Array(node.childCount)\n    .fill(undefined)\n    .reduce((acc, _, idx) => {\n      if (idx === 0) {\n        return [isRoot ? 0 : startPos + 1]\n      }\n      let prev = acc[idx - 1]\n      let cur = node.child(idx - 1)\n      return [...acc, prev + cur.nodeSize]\n    }, [])\n\n  $: endPos = startPos + node.nodeSize\n  $: inlineChildren = fragment.content.every(n => n.isInline)\n\n  function handleNameClick() {\n    handleNodeClick(node, startPos)\n  }\n  function handleNameDblClick() {\n    handleNodeClick(node, startPos, true)\n  }\n</script>\n\n<li class={`${$$props.class || ''} doc-node`} class:root={isRoot}>\n  <div class=\"doc-node-body\" style={`background: ${color}`}>\n    <div class=\"number-box\">{startPos}</div>\n    <button\n      class:selected={false}\n      aria-label=\"Show node info button\"\n      on:click={handleNameClick}\n      on:dblclick={handleNameDblClick}>{name}</button\n    >\n    <div class=\"number-box\">{endPos}</div>\n  </div>\n  <ul class:inline-children={inlineChildren}>\n    {#each fragment.content as child, i}\n      <svelte:self node={child} startPos={startPositions[i]} />\n    {/each}\n  </ul>\n</li>\n\n<style lang=\"scss\">\n  .doc-node {\n    border-left: 1px solid $color-blue-bg;\n    border-right: 1px solid $color-blue-bg;\n    display: flex;\n    flex-direction: column;\n    padding: 0 12px;\n    &.root {\n      border: 0;\n      padding: 0;\n    }\n  }\n  .doc-node-body {\n    background: $color-blue-bg;\n    color: $color-black;\n    display: flex;\n    font-size: 13px;\n    margin-top: 3px;\n  }\n  .number-box {\n    padding: 3px 6px;\n    background: rgba($color-white, 0.3);\n  }\n  button {\n    background: transparent;\n    border: 0;\n    color: $color-black;\n    cursor: pointer;\n    display: flex;\n    height: 100%;\n    padding: 3px 9px;\n    white-space: pre;\n    width: 100%;\n    &:hover {\n      background: rgba($color-red-light, 0.4);\n      color: $color-white;\n    }\n    &.selected {\n      background: rgba($color-red-light, 0.4);\n    }\n  }\n  ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n  .inline-children {\n    border-left: 1px solid $color-purple;\n    border-right: 1px solid $color-purple;\n    display: flex;\n    flex-wrap: wrap;\n    padding: 0 12px;\n    /* TODO this hurts my soul */\n    & > :global(.doc-node) {\n      flex-grow: 1;\n      padding: 0;\n    }\n  }\n</style>\n","import { Schema } from 'prosemirror-model'\n\nconst nodeColors = <const>[\n  '#EA7C7F', // red\n  '#67B0C6', // cyan 400\n  '#94BB7F', // green\n  '#CA9EDB', // deep purple\n  '#DCDC5D', // lime\n  '#B9CC7C', // light green\n  '#DD97D8', // purple\n  '#FFB761', // orange\n  '#4D8FD1', // light blue\n  '#F36E98', // pink\n  '#E45F44', // deep orange\n  '#A6A4AE', // blue grey\n  '#FCC047', // yellow\n  '#FFC129', // amber\n  '#D3929C', // can can\n  '#4CBCD4', // cyan\n  '#8D7BC0' // indigo\n]\n\nexport function calculateSafeIndex(index: number, total: number) {\n  const quotient = index / total\n  return Math.round(total * (quotient - Math.floor(quotient)))\n}\n\nexport function buildColors(schema: Schema) {\n  return Object.keys(schema.nodes).reduce((acc, node, index) => {\n    const safeIndex =\n      index >= nodeColors.length ? calculateSafeIndex(index, nodeColors.length) : index\n\n    acc[node] = nodeColors[safeIndex]\n    return acc\n  }, {} as { [key: string]: typeof nodeColors[number] })\n}\n","<script lang=\"ts\">\n  import { setContext } from '$context'\n  import type { Node as PMNode, Schema } from 'prosemirror-model'\n\n  import DocNode from './DocNode.svelte'\n  import { buildColors } from './colors'\n\n  export let doc: PMNode,\n    schema: Schema,\n    selected = { type: '', start: 0, end: 0 },\n    handleNodeSelect: (n: PMNode, startPos: number, scroll?: boolean) => void\n\n  setContext('doc-view', {\n    selected,\n    colors: buildColors(schema),\n    handleNodeClick: handleNodeSelect,\n  })\n</script>\n\n<ul>\n  <DocNode class={$$props.class} node={doc} startPos={0} depth={0} isRoot />\n</ul>\n\n<style>\n  ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n</style>\n","<script lang=\"ts\">\n  import type { Node as PMNode, Schema } from 'prosemirror-model'\n  import { getContext } from '$context'\n  import { latestEntry } from '$stores/stateHistory'\n\n  import TreeView from 'svelte-tree-view'\n  import SplitView from '../SplitView.svelte'\n  import DocView from './DocView.svelte'\n  import Button from '$components/Button.svelte'\n\n  const { view } = getContext('editor-view')\n  let doc: PMNode = view.state.doc\n  let selected = { node: view.state.doc, pos: 0 }\n  $: jsonNode = selected.node.toJSON()\n  let schema: Schema = view.state.schema\n  let timer: ReturnType<typeof setTimeout>\n\n  latestEntry.subscribe(e => {\n    if (!e) return\n    e.trs.forEach(tr => {\n      selected.pos = tr.mapping.map(selected.pos)\n    })\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      doc = e.state.doc\n      const pos = selected.pos\n      try {\n        // Must try-catch incase dev-tools is unmounted and editorView destroyed\n        const node = doc.nodeAt(pos)\n        selected = { node: node || doc, pos: node ? pos : 0 }\n      } catch (err) {}\n    }, 100)\n  })\n\n  /**\n   * Finds first parent that is scrollable\n   *\n   * Could use getComputedStyle(el).overflowY !== 'visible' but this seems to work ok as well.\n   * @param el\n   */\n  function getScrollableParent(el: HTMLElement | null | undefined): HTMLElement | undefined {\n    if (!el || el === document.body) return undefined\n    else if (el.scrollHeight !== el.clientHeight) return el\n    return getScrollableParent(el.parentElement)\n  }\n  function handleNodeSelect(node: PMNode, startPos: number, scroll = false) {\n    selected = { node, pos: startPos }\n    if (!scroll) return \n    /**\n     * Some high order black magic right here for scrolling the node into view.\n     * \n     * First, we need to ensure the node is visible within a scrollable element.\n     * Meaning that if there's a parent element with overflow: scroll/auto we have to\n     * scroll the element into view.\n     */\n    let nodeDom = view.nodeDOM(startPos)\n    // Text nodes don't have offsetTop property so we have to find a parent which has\n    while (nodeDom && !(nodeDom instanceof HTMLElement)) {\n      nodeDom = nodeDom.parentElement\n    }\n    // We'll omit hidden nodes since it might be more obvious that there's nothing to scroll into\n    if (!nodeDom || getComputedStyle(nodeDom).display === 'none') return\n    const parentWithScrollbar = getScrollableParent(view.dom as HTMLElement)\n    if (parentWithScrollbar) {\n      const alreadyScrolled = parentWithScrollbar.scrollTop\n      // So this is probably the most magic part. Basically if the parent has been scrolled over\n      // in the viewport (meaning it's below the absolute position of the current viewport top),\n      // we must offset the boundingRect's top as they are calculated from the viewport's top,\n      // not where the parent element actually is. Otherwise we would scroll downwards even though\n      // the node's top would already be enough to be shown. Real PITA to wrap your head around.\n      // Hopefully nobody has to ever fix this 😅\n      const parentOffset = parentWithScrollbar.offsetTop - window.scrollY\n      const parentTop = parentWithScrollbar.getBoundingClientRect().top - parentOffset\n      const nodeTop = nodeDom.getBoundingClientRect().top - parentOffset\n      // clientHeight / 2 seems to work as a carefully crafted heurestic..\n      const halfwayParent = parentWithScrollbar.clientHeight / 2\n      parentWithScrollbar.scroll(0, alreadyScrolled + parentTop + nodeTop - halfwayParent)\n    }\n    /**\n     * After that, incase the window has a scrollbar as well we want to scroll the\n     * element just above the dock\n     */\n    const nodeTop = view.coordsAtPos(startPos).top\n    const dockHeight = document.querySelector('.floating-dock')?.clientHeight || 0\n    window.scroll(0, nodeTop - dockHeight + nodeDom.clientHeight + window.scrollY)\n  }\n  function handleClickLogNode() {\n    console.log(selected)\n    window._node = selected\n    console.info('%c [prosemirror-dev-toolkit]: Property added to window._node', 'color: #b8e248')\n  }\n</script>\n\n<SplitView>\n  <div slot=\"left\" class=\"left-panel\">\n    <div class=\"top-row\">\n      <h2>Current doc</h2>\n      <Button class=\"hidden\">log</Button>\n    </div>\n    <DocView class=\"m-top\" {doc} {schema} {handleNodeSelect} />\n  </div>\n  <div slot=\"right\" class=\"right-panel\">\n    <div class=\"top-row\">\n      <h2>Node info</h2>\n      <Button on:click={handleClickLogNode}>log</Button>\n    </div>\n    <TreeView class=\"m-top\" data={jsonNode} recursionOpts={{\n      shouldExpandNode: (n) => n.type !== 'array' || n.value.length <= 50\n    }}/>\n  </div>\n</SplitView>\n\n<style lang=\"scss\">\n  :global(.hidden) {\n    display: none;\n    visibility: hidden;\n  }\n  .top-row {\n    align-items: center;\n    display: flex;\n    justify-content: space-between;\n  }\n  .right-panel {\n    border-left: 1px solid rgba($color-red-light, 0.2);\n    flex-grow: 0;\n    min-width: 220px;\n    width: 220px;\n  }\n  :global(.split-view .m-top) {\n    margin-top: 0.5em;\n  }\n</style>\n","<script lang=\"ts\">\n  import type { Snapshot } from '$typings/snapshots'\n\n  export let snapshots: Snapshot[] = [],\n    selectedSnapshot: Snapshot | undefined = undefined,\n    onUpdate: (snap: Snapshot) => void,\n    onView: (snap?: Snapshot) => void,\n    onRestore: (snap: Snapshot) => void,\n    onExport: (snap: Snapshot) => void,\n    onDelete: (snap: Snapshot) => void\n\n  let editedSnap: Snapshot | undefined\n  let deleteSnap: Snapshot | undefined\n  let timer: number | undefined\n\n  const debounceUpdate = () => {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      onUpdate(editedSnap as Snapshot)\n    }, 150)\n  }\n\n  function handleSnapDoubleclick(snap: Snapshot) {\n    editedSnap = snap\n    deleteSnap = undefined\n  }\n  function handleNameChange(evt: any) {\n    if (editedSnap) {\n      editedSnap.name = evt.target.value\n      debounceUpdate()\n    }\n  }\n  function handleNameKeyPress(evt: any) {\n    if (evt.key === 'Enter' && editedSnap) {\n      onUpdate(editedSnap)\n      clearTimeout(timer)\n      editedSnap = undefined\n      deleteSnap = undefined\n    }\n  }\n  function handleClickView(snap: Snapshot) {\n    if (selectedSnapshot?.timestamp === snap.timestamp) {\n      onView()\n    } else {\n      onView(snap)\n    }\n    deleteSnap = undefined\n  }\n  function handleRestoreClick(snap: Snapshot) {\n    onRestore(snap)\n    deleteSnap = undefined\n  }\n  function handleExportClick(snap: Snapshot) {\n    onExport(snap)\n    deleteSnap = undefined\n  }\n  function handleClickDelete(snap: Snapshot) {\n    if (!deleteSnap || deleteSnap.timestamp !== snap.timestamp) {\n      deleteSnap = snap\n    } else {\n      onDelete(snap)\n      deleteSnap = undefined\n    }\n  }\n</script>\n\n<ul>\n  {#each snapshots as snap}\n    <li>\n      {#if editedSnap && editedSnap.timestamp === snap.timestamp}\n        <input\n          value={editedSnap.name}\n          on:input={handleNameChange}\n          on:keypress={handleNameKeyPress}\n        />\n      {:else}\n        <button\n          class=\"unstyled-btn\"\n          aria-label=\"Edit snapshot name button\"\n          on:dblclick={() => handleSnapDoubleclick(snap)}>{snap.name}</button\n        >\n      {/if}\n      <button class=\"snapshot-btn ml-2\" on:click={() => handleClickView(snap)}>\n        {#if selectedSnapshot?.timestamp === snap.timestamp}\n          Hide\n        {:else}\n          Show\n        {/if}\n      </button>\n      <button class=\"snapshot-btn\" on:click={() => handleRestoreClick(snap)}>Restore</button>\n      <button class=\"snapshot-btn\" on:click={() => handleExportClick(snap)}>Export</button>\n      <button class=\"snapshot-btn\" on:click={() => handleClickDelete(snap)}>\n        {#if deleteSnap?.timestamp === snap.timestamp}\n          Confirm Delete\n        {:else}\n          Delete\n        {/if}\n      </button>\n    </li>\n  {/each}\n</ul>\n\n<style lang=\"scss\">\n  ul {\n    color: $color-white;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    height: 100%;\n    width: 100%;\n  }\n  li + li {\n    border-top: 1px solid $color-purple;\n  }\n  li {\n    align-items: center;\n    display: flex;\n    font-family: monospace;\n    padding: 6px 18px;\n  }\n  input {\n    background: transparent;\n    border: 0;\n    color: $color-white;\n    height: 100%;\n    margin: 0;\n    padding: 2px;\n    width: 100%;\n  }\n  .unstyled-btn {\n    background: transparent;\n    border: 0;\n    color: $color-white;\n    cursor: pointer;\n    display: block;\n    font-family: monospace;\n    margin: 0;\n    padding: 0;\n    text-align: start;\n    width: 100%;\n  }\n  .snapshot-btn {\n    background: transparent;\n    border: 0;\n    border-radius: 3px;\n    color: $color-gray-light;\n    cursor: pointer;\n    display: flex;\n    font-size: 11px;\n    padding: 6px 18px;\n    text-transform: uppercase;\n    &:hover {\n      background: rgba($color-red-light, 0.4);\n      color: $color-white;\n    }\n  }\n  .ml-2 {\n    margin-left: 1rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from '$context'\n\n  import SplitView from '$tabs/SplitView.svelte'\n  import SnapshotsList from './SnapshotsList.svelte'\n  import {\n    snapshots,\n    selectedSnapshot,\n    updateSnapshot,\n    toggleViewSnapshot,\n    restoreSnapshot,\n    exportSnapshot,\n    deleteSnapshot\n  } from '$stores/snapshots'\n  import { resetHistory } from '$stores/stateHistory'\n  import type { Snapshot } from '$typings/snapshots'\n\n  const { view } = getContext('editor-view')\n\n  function handleRestoreSnapshot(snapshot: Snapshot) {\n    restoreSnapshot(view, snapshot)\n    resetHistory()\n  }\n</script>\n\n<SplitView>\n  <div slot=\"right\" class=\"right-panel\">\n    {#if $snapshots.length === 0}\n      <div class=\"no-snapshots\">Save snapshots by clicking \"Save snapshot\" button.</div>\n    {:else}\n      <SnapshotsList\n        snapshots={$snapshots}\n        selectedSnapshot={$selectedSnapshot}\n        onUpdate={updateSnapshot}\n        onView={snap => toggleViewSnapshot(view, snap)}\n        onRestore={handleRestoreSnapshot}\n        onExport={exportSnapshot}\n        onDelete={deleteSnapshot}\n      />\n    {/if}\n  </div>\n</SplitView>\n\n<style lang=\"scss\">\n  .right-panel {\n    padding: 0;\n  }\n  .no-snapshots {\n    align-items: center;\n    color: $color-red-light;\n    display: flex;\n    font-size: 14px;\n    height: 100%;\n    justify-content: center;\n    width: 100%;\n  }\n</style>\n","<script lang=\"ts\">\n  import { onDestroy } from 'svelte'\n  import { getContext } from '$context'\n\n  import { saveSnapshot, importSnapshot } from '$stores/snapshots'\n\n  import TabsMenu from '$tabs/TabsMenu.svelte'\n  import StateTab from '$tabs/state/StateTab.svelte'\n  import HistoryTab from '$tabs/history/HistoryTab.svelte'\n  import PluginsTab from '$tabs/PluginsTab.svelte'\n  import SchemaTab from '$tabs/SchemaTab.svelte'\n  import StructureTab from '$tabs/structure/StructureTab.svelte'\n  import SnapshotsTab from '$tabs/snapshots/SnapshotsTab.svelte'\n\n  export let onClose: () => void\n\n  const { view } = getContext('editor-view')\n  let openTab = 'state',\n    dockTop = 50,\n    dockHeight = 50,\n    fileinput: HTMLInputElement\n\n  onDestroy(() => {\n    document.removeEventListener('mousemove', dragMove)\n    document.removeEventListener('mouseup', dragEnd)\n  })\n\n  function handleResizeMouseDown() {\n    document.addEventListener('mousemove', dragMove)\n    document.addEventListener('mouseup', dragEnd)\n  }\n  function dragMove(evt: MouseEvent) {\n    evt.preventDefault()\n    dockTop = (100 * evt.clientY) / window.innerHeight\n    dockHeight = 100 * (1 - evt.clientY / window.innerHeight)\n  }\n  function dragEnd(evt: MouseEvent) {\n    evt.preventDefault()\n    document.removeEventListener('mousemove', dragMove)\n    document.removeEventListener('mouseup', dragEnd)\n  }\n  function handleSaveSnapshot() {\n    const defaultName = new Date().toLocaleString('sv')\n    const snapshotName = prompt('Enter snapshot name', defaultName)\n    if (snapshotName) {\n      saveSnapshot(snapshotName, view.state.doc.toJSON())\n    }\n  }\n  function handleImportSnapshot() {\n    fileinput.click()\n  }\n  function handleFileSelected(\n    e: Event & {\n      currentTarget: EventTarget & HTMLInputElement\n    }\n  ) {\n    const target = <HTMLInputElement>e.target\n    Array.from(target.files || []).forEach(file => {\n      const reader = new FileReader()\n      reader.readAsText(file)\n      reader.onload = e => {\n        const data = typeof e.target?.result === 'string' ? e.target?.result : ''\n        try {\n          const json = JSON.parse(data)\n          if (!json || typeof json !== 'object') {\n            throw Error('Imported snapshot was not a JSON object' + json)\n          }\n          const name = file.name.slice(0, file.name.lastIndexOf('.'))\n          importSnapshot(name, json, view.state.schema)\n        } catch (err) {\n          console.error('Failed to import snapshot: ' + err)\n        }\n      }\n    })\n  }\n  function handleClickTab(tab: string) {\n    openTab = tab\n  }\n</script>\n\n<div class=\"floating-dock-wrapper\">\n  <div class=\"floating-dock\" style={`top: ${dockTop}%; height: ${dockHeight}%;`}>\n    <div class=\"resizing-div\" on:mousedown={handleResizeMouseDown} />\n    <div class=\"container\">\n      <div>\n        <button class=\"snap-save-btn\" on:click={handleSaveSnapshot}>Save snapshot</button>\n        <button class=\"snap-import-btn\" on:click={handleImportSnapshot}>Import snapshot</button>\n        <button class=\"close-btn\" aria-label=\"Close dev-toolkit button\" on:click={onClose}>X</button\n        >\n      </div>\n      <input\n        style=\"display:none\"\n        type=\"file\"\n        accept=\".json\"\n        multiple\n        on:change={handleFileSelected}\n        bind:this={fileinput}\n      />\n      <TabsMenu onClickTab={handleClickTab} active={openTab} />\n      {#if openTab === 'state'}\n        <StateTab />\n      {:else if openTab === 'history'}\n        <HistoryTab />\n      {:else if openTab === 'plugins'}\n        <PluginsTab />\n      {:else if openTab === 'schema'}\n        <SchemaTab />\n      {:else if openTab === 'structure'}\n        <StructureTab />\n      {:else if openTab === 'snapshots'}\n        <SnapshotsTab />\n      {:else}\n        <p>nuting here</p>\n      {/if}\n    </div>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .floating-dock-wrapper {\n    position: fixed;\n    width: 0px;\n    height: 0px;\n    top: 0px;\n    left: 0px;\n    z-index: 99999999;\n  }\n  .floating-dock {\n    background-color: $color-blue-bg;\n    position: fixed;\n    z-index: 1;\n    box-shadow: rgba($color-black, 0.3) 0px 0px 4px 0px;\n    left: 0px;\n    top: 50%;\n    width: 100%;\n    height: 50%;\n  }\n  .resizing-div {\n    position: absolute;\n    z-index: 2;\n    opacity: 0;\n    top: -5px;\n    height: 10px;\n    left: 0px;\n    width: 100%;\n    cursor: row-resize;\n  }\n  .container {\n    height: 100%;\n  }\n  .snap-save-btn {\n    background: rgba($color-red-light, 0.6);\n    border: 0;\n    border-radius: 3px;\n    color: $color-white;\n    cursor: pointer;\n    font-size: 12px;\n    height: 24px;\n    line-height: 25px;\n    padding: 0 6px;\n    position: absolute;\n    right: 134px;\n    top: -28px;\n    &:hover {\n      background: rgba($color-red-light, 0.8);\n    }\n  }\n  .snap-import-btn {\n    background: rgba($color-red-light, 0.6);\n    border: 0;\n    border-radius: 3px;\n    color: $color-white;\n    cursor: pointer;\n    font-size: 12px;\n    height: 24px;\n    line-height: 25px;\n    padding: 0 6px;\n    position: absolute;\n    right: 32px;\n    top: -28px;\n    &:hover {\n      background: rgba($color-red-light, 0.8);\n    }\n  }\n  .close-btn {\n    background: rgba($color-red-light, 0.6);\n    border: 0;\n    border-radius: 3px;\n    color: $color-white;\n    cursor: pointer;\n    height: 24px;\n    position: absolute;\n    right: 4px;\n    top: -28px;\n    width: 24px;\n    &:hover {\n      background: rgba($color-red-light, 0.8);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { onMount } from 'svelte'\n  import type { EditorView } from 'prosemirror-view'\n  import type { EditorState, Transaction } from 'prosemirror-state'\n  import { setContext } from '$context'\n\n  import FloatingBtn from './FloatingBtn.svelte'\n  import FloatingDock from './FloatingDock.svelte'\n\n  import type { ButtonPosition } from '../types'\n\n  export let view: EditorView,\n    devToolsExpanded = false,\n    buttonPosition: ButtonPosition = 'bottom-right'\n\n  setContext('editor-view', {\n    view,\n    execCmd(cmd: (\n      state: EditorState,\n      dispatch?: (tr: Transaction) => void\n    ) => void) {\n      cmd(view.state, view.dispatch)\n    },\n    replaceEditorContent(state: EditorState) {\n      const tr = view.state.tr\n      tr.replaceWith(0, view.state.doc.nodeSize - 2, state.doc.content)\n      view.dispatch(tr)\n    }\n  })\n\n  onMount(() => {\n    const html = document && document.querySelector('html')\n    if (devToolsExpanded && html) {\n      html.style.paddingBottom = '341px'\n    }\n  })\n\n  function handleFloatingBtnClick() {\n    devToolsExpanded = true\n    const html = document && document.querySelector('html')\n    if (html) {\n      html.style.paddingBottom = '341px'\n    }\n  }\n  function handleFloatingDockClose() {\n    devToolsExpanded = false\n    const html = document && document.querySelector('html')\n    if (html) {\n      html.style.paddingBottom = ''\n    }\n  }\n</script>\n\n<section class=\"dev-tools\">\n  {#if devToolsExpanded}\n    <FloatingDock onClose={handleFloatingDockClose} />\n  {:else}\n    <FloatingBtn on:click={handleFloatingBtnClick} {buttonPosition} />\n  {/if}\n</section>\n\n<style lang=\"scss\">\n  * {\n    --font-sans: Helvetica Neue, Calibri Light, Roboto, sans-serif;\n    --font-small: 11px;\n    --font-medium: 13px;\n    --font-large: 16px;\n    --height-tabs-menu: 48px;\n  }\n  .dev-tools {\n    font-family: var(--font-sans);\n    font-size: var(--font-medium);\n\n    --tree-view-base00: #363755;\n    --tree-view-base01: #604d49;\n    --tree-view-base02: #6d5a55;\n    --tree-view-base03: #d1929b;\n    --tree-view-base04: #b79f8d;\n    --tree-view-base05: #f9f8f2;\n    --tree-view-base06: #f7f4f1;\n    --tree-view-base07: #faf8f5;\n    --tree-view-base08: #fa3e7e;\n    --tree-view-base09: #fd993c;\n    --tree-view-base0A: #f6bf81;\n    --tree-view-base0B: #b8e248;\n    --tree-view-base0C: #b4efe4;\n    --tree-view-base0D: #85d9ef;\n    --tree-view-base0E: #be87ff;\n    --tree-view-base0F: #d6724c;\n  }\n</style>\n","import type { EditorView } from 'prosemirror-view'\nimport type { Transaction } from 'prosemirror-state'\n\nimport { appendNewHistoryEntry } from '$stores/stateHistory'\n\nlet active = false,\n  resetDispatch: (() => void) | undefined = undefined\n\nexport function subscribeToDispatchTransaction(view: EditorView) {\n  active = true\n  const oldDispatchFn = view.someProp('dispatchTransaction')?.bind(view)\n  view.setProps({\n    dispatchTransaction(tr: Transaction) {\n      const stateBeforeDispatch = view.state\n      const { state, transactions } = this.state.applyTransaction(tr)\n      if (oldDispatchFn) {\n        oldDispatchFn(tr)\n      } else {\n        this.updateState(state)\n      }\n      if (active) {\n        appendNewHistoryEntry(transactions, view.state, stateBeforeDispatch)\n      }\n    }\n  })\n  resetDispatch = () => view.setProps({ dispatchTransaction: oldDispatchFn })\n}\n\nexport function unsubscribeDispatchTransaction() {\n  active = false\n  resetDispatch && resetDispatch()\n  resetDispatch = undefined\n}\n","import type { EditorView } from 'prosemirror-view'\nimport DevTools from './components/DevTools.svelte'\nimport {\n  subscribeToDispatchTransaction,\n  unsubscribeDispatchTransaction\n} from './history-and-diff/subscribeToTransactions'\nimport { resetHistory } from './stores/stateHistory'\n\nimport { DevToolsOpts } from './types'\n\nconst DEVTOOLS_CSS_CLASS = '__prosemirror-dev-toolkit__'\n\n// Make the dev tools available globally for testing and other use\nif (typeof window !== 'undefined') window.applyDevTools = applyDevTools\n\nfunction createOrFindPlace() {\n  let place: HTMLElement | null = document.querySelector(`.${DEVTOOLS_CSS_CLASS}`)\n\n  if (!place) {\n    place = document.createElement('div')\n    place.className = DEVTOOLS_CSS_CLASS\n    document.body.appendChild(place)\n  }\n\n  return place\n}\n\nlet removeCallback: (() => void) | undefined\n\n/**\n * Applies devTools to the given EditorView.\n * \n * Will remove previous devTools instance first, then subscribes to the view's\n * transactions by adding a dispatchTransaction prop. If previous dispatchTransaction\n * prop exists, passes the transaction to it. Otherwise updates the state as normal.\n * Will destroy itself whenever view is destroyed or removeDevTools() is called.\n * @param view\n * @param opts\n */\nexport function applyDevTools(view: EditorView, opts: DevToolsOpts = {}) {\n  const place = createOrFindPlace()\n\n  removeDevTools()\n\n  const comp = new DevTools({\n    target: place,\n    props: {\n      view,\n      ...opts\n    }\n  })\n  // Also add view to the window for testing and other debugging\n  if (typeof window !== 'undefined') window.editorView = view\n\n  // Bind the component's life-cycle to the editorView to automatically unmount the devTools\n  const oldDestroyFn = view.destroy.bind(view)\n  view.destroy = () => {\n    // DevTools must always be removed before view as the resetDispatch requires view to be still present\n    removeDevTools()\n    oldDestroyFn()\n  }\n\n  subscribeToDispatchTransaction(view)\n\n  removeCallback = () => {\n    resetHistory()\n    unsubscribeDispatchTransaction()\n    // TODO add test to check no \"Component already destroyed\" warnings appear\n    comp.$destroy()\n  }\n}\n\nexport function removeDevTools() {\n  removeCallback && removeCallback()\n  removeCallback = undefined\n}\n"],"names":["_classCallCheck","instance","Constructor","TypeError","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","Object","setPrototypeOf","__proto__","_inherits","subClass","superClass","prototype","create","constructor","value","writable","configurable","_typeof","obj","Symbol","iterator","_possibleConstructorReturn","call","assertThisInitialized","_getPrototypeOf","getPrototypeOf","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","_i","_arr","_n","_d","_s","_e","next","done","push","length","err","_arrayLikeToArray","len","arr2","_unsupportedIterableToArray","minLen","arrayLikeToArray","n","toString","slice","name","from","test","_nonIterableRest","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","_arrayWithoutHoles","_iterableToArray","iter","_nonIterableSpread","_toConsumableArray","arrayWithoutHoles","iterableToArray","nonIterableSpread","_defineProperties","target","props","descriptor","enumerable","defineProperty","key","_createClass","protoProps","staticProps","noop","assign","tar","src","k","run","fn","blank_object","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","is_empty","keys","subscribe","store","callbacks","unsub","unsubscribe","get_store_value","_","component_subscribe","component","callback","$$","on_destroy","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","get_slot_changes","dirty","lets","undefined","merged","Math","max","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","get_all_dirty_from_scope","exclude_internal_props","result","null_to_empty","append","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","removeAttribute","getAttribute","setAttribute","xlink_attr","setAttributeNS","children","childNodes","set_data","wholeText","set_style","important","style","setProperty","toggle_class","toggle","classList","custom_event","type","detail","bubbles","e","createEvent","initCustomEvent","current_component","set_current_component","get_current_component","Error","onMount","on_mount","onDestroy","createEventDispatcher","setContext","context","set","getContext","get","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","add_render_callback","flushing","seen_callbacks","Set","update","pop","has","add","clear","fragment","before_update","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","create_component","mount_component","customElement","m","new_on_destroy","map","filter","destroy_component","make_dirty","fill","init","create_fragment","not_equal","append_styles","parent_component","bound","on_disconnect","Map","skip_bound","root","ready","ret","hydrate","nodes","l","intro","SvelteComponent","$destroy","index","indexOf","splice","$$props","$$set","setCtx","getCtx","styleInject","css","ref","insertAt","head","getElementsByTagName","firstChild","styleSheet","cssText","buttonPosition","subscriber_queue","readable","start","stop","subscribers","new_value","run_queue","subscriber","invalidate","size","derived","stores","initial_value","single","stores_array","auto","inited","values","pending","cleanup","sync","unsubscribers","active","onClickTab","diff_match_patch","Diff_Timeout","Diff_EditCost","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","Match_MaxBits","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","Diff","op","diff_main","text1","text2","opt_checklines","opt_deadline","Number","MAX_VALUE","Date","getTime","deadline","checklines","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","diff_compute_","unshift","diff_cleanupMerge","longtext","shorttext","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","concat","diff_lineMode_","diff_bisect_","diff_linesToChars_","chars1","chars2","linearray","lineArray","diff_charsToLines_","diff_cleanupSemantic","pointer","count_delete","count_insert","text_delete","text_insert","subDiff","j","text1_length","text2_length","max_d","ceil","v_offset","v_length","v1","v2","x","delta","front","k1start","k1end","k2start","k2end","k1","k1_offset","x1","y1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","y","text1a","text2a","text1b","text2b","diffsb","lineHash","diff_linesToCharsMunge_","chars","lineStart","lineEnd","lineArrayLength","line","hasOwnProperty","String","fromCharCode","maxLines","charCodeAt","join","pointermin","pointermax","min","pointermid","pointerstart","floor","pointerend","diff_commonOverlap_","text_length","best","pattern","found","dmp","diff_halfMatchI_","seed","best_common","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastEquality","length_insertions1","length_deletions1","length_insertions2","length_deletions2","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","match","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","loc","last_chars1","last_chars2","diff_prettyHtml","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","replace","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","diff_toDelta","encodeURI","diff_fromDelta","diffsLength","tokens","split","param","decodeURI","ex","parseInt","isNaN","match_main","match_bitap_","s","match_alphabet_","match_bitapScore_","accuracy","proximity","abs","score_threshold","best_loc","lastIndexOf","matchmask","bin_min","bin_mid","bin_max","last_rd","finish","rd","charMatch","patch_addContext_","patch","start2","length1","padding","prefix","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","results","expected_loc","start_loc","end_loc","index1","index2","mod","paddingLength","extraLength","patch_size","bigpatch","precontext","shift","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","sign","coords1","coords2","module","exports","_typeof2","classCallCheck","createClass","defineProperties","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getter","inherits","possibleConstructorReturn","slicedToArray","sliceIterator","toConsumableArray","Processor","selfOptions","pipes","_options","pipe","pipeArg","processor","process","input","nextPipe","lastPipe","lastContext","nextAfterChildren","hasResult","Pipe","filters","debug","log","filterName","exiting","resultCheck","msg","console","_filters","apply","arguments","prepend","_filters2","list","f","after","params","before","remove","shouldHaveResult","should","error","noResult","Context","setResult","exit","switchTo","child","childName","cloneRegExp","re","regexMatch","exec","RegExp","clone","arg","cloned","DiffContext","_Context","left","right","_this","cloneDiffValues","clone$$1","PatchContext","ReverseContext","isArray$1","diffFilter","trivialMatchesDiffFilter","leftType","rightType","leftIsArray","rightIsArray","patchFilter","trivialMatchesPatchFilter","nested","regexArgs","reverseFilter","trivialReferseFilter","collectChildrenDiffFilter","_t","objectsDiffFilter","propertyFilter","patchFilter$1","nestedPatchFilter","collectChildrenPatchFilter","reverseFilter$1","nestedReverseFilter","collectChildrenReverseFilter","defaultMatch","array1","array2","lengthMatrix","len1","len2","matrix","backtrack","subsequence","sequence","indices1","indices2","sameLetter","valueAtMatrixAbove","valueAtMatrixLeft","get$1","innerContext","lcs","ARRAY_MOVE","isArray$2","arrayIndexOf","array","item","arraysHaveMatchByRef","val1","val2","matchItems","value1","value2","objectHash","matchByPosition","hash1","hash2","hashCache1","hashCache2","diffFilter$1","arraysDiffFilter","matchContext","commonHead","commonTail","trimmed1","trimmed2","seq","removedItems","detectMove","arrays","includeValueOnMove","removedItemsLength","indexOnArray2","isMove","removeItemIndex1","compare","numerically","numericallyBy","patchFilter$2","toRemove","toInsert","toModify","sort","indexDiff","removedValue","toInsertLength","toModifyLength","modification","collectChildrenPatchFilter$1","reverseFilter$2","arraysReverseFilter","newName","substr","reverseArrayDeltaIndex","itemDelta","reverseIndex","deltaIndex","deltaItem","moveFromIndex","moveToIndex","deleteIndex","collectChildrenReverseFilter$1","diffFilter$2","datesDiffFilter","TEXT_DIFF","DEFAULT_MIN_LENGTH","cachedDiffPatch","getDiffMatchPatch","required","diff_match_patch_not_found","diff","txt1","txt2","_patch","_error","textPatchFailed","diffFilter$3","textsDiffFilter","minLength","textDiff","diffMatchPatch","patchFilter$3","textsPatchFilter","textDeltaReverse","lines","lineTmp","header","headerRegex","lineHeader","reverseFilter$3","textsReverseFilter","DiffPatcher","_processor","reverse","unpatch","isArray$3","getObjectKeys","names","trimUnderscore","str","arrayKeyToSortNumber","arrayKeyComparer","key1","key2","BaseFormatter","format","prepareContext","recurse","finalize","buffer","out","_buffer","typeFormattterNotFound","deltaType","typeFormattterErrorFormatter","_ref","leftKey","movedFrom","isLast","useMoveOriginHere","leftValue","getDeltaType","nodeType","nodeBegin","rootBegin","typeFormattter","stack","nodeEnd","rootEnd","formatDeltaChildren","forEachDeltaKey","arrayKeys","moveDestinations","includeMoveDestinations","parseTextDiff","output","lineOutput","pieces","location","chr","pieceIndex","piecesLength","piece","pieceOutput","base","freeze","default","HtmlFormatter","_BaseFormatter","formatValue","htmlEscape","JSON","stringify","formatTextDiffString","nodeClass","hasArrows","adjustArrows","format_unchanged","format_movedestination","format_node","format_added","format_modified","format_deleted","format_moved","format_textdiff","replacements","jsondiffpatchHtmlFormatterAdjustArrows","nodeArg","getElementText","textContent","innerText","eachByQuery","el","query","elems","querySelectorAll","eachChildren","_ref2","_ref3","arrowParent","svg","path","display","destination","querySelector","container","destinationElem","distance","offsetTop","top","curve","round","showUnchanged","show","delay","body","classes","showing","hiding","visible","hidden","setTimeout","intervalId","setInterval","clearInterval","hideUnchanged","defaultInstance","AnnotatedFormatter","indent","levels","indentLevel","indentPad","row","json","htmlNote","wrapPropertyName","deltaAnnotations","added","formatLegend","modified","deleted","moved","textdiff","formatAnyChange","annotator","defaultInstance$1","format$1","annotated","OPERATIONS","move","JSONFormatter","pushCurrentOp","val","currentPath","pushMoveOp","to","toPath","last","sortBy","pred","compareByIndexDesc","indexA","indexB","lastA","lastB","opsByDescendingOrder","removeOps","splitA","splitB","partitionOps","initArr","position","reduce","acc","isMoveOp","isRemoveOp","_ref4","reorderOps","_partitionOps","_partitionOps2","moveOps","removedOps","restOps","removeOpsReverse","defaultInstance$2","format$2","jsonpatch","chalkColor","chalk","_len","args","_key","colors","movedestination","unchanged","textDiffLine","ConsoleFormatter","outLine","_len2","_key2","color","pushColor","popColor","defaultInstance$3","format$3","log$1","console$1","_defineProperty","createNode","depth","id","collapsed","getValueType","parentId","circularOfId","getChildren","v","entries","shouldRecurseChildren","iteratedValues","opts","stopCircularRecursion","isCircularNode","existingNodeWithValue","recurseObjectProperties","ensureNotCollapsed","treeMap","oldTreeMap","recomputeExpandNode","_a","omitKeys","includes","maxDepth","oldNode","shouldExpandNode","mappedChildren","mapChildren","idx","recomputeTree","recursionOpts","newTree","tree","createPropsStore","initialProps","setProps","newProps","valueFormatter","customFormat","toISOString","createRootElementStore","rootElementStore","createTreeStore","propsStore","defaultRootNode","newTreeMap","iterated","getNode","toggleCollapse","warn","updatedNode","expandNodeChildren","previouslyIterated","nodeWithUpdatedChildren","expandAllNodesToNode","recurseNodeUpwards","updated","showLogButton","showCopyButton","treeStore","handleLogNode","info","window","_node","handleCopyNodeToClipboard","navigator","clipboard","writeText","handleToggleCollapse","hasChildren","$rootElementStore","scrollIntoView","valueComponentDefaultFormatter","$","valueComponent","$props","class","theme","rootElement","defaultRecursionOpts","newRecursionOpts","rootNode","selected","formatDocNodeValue","nodeSize","childCount","expanded","timeStr","topEntry","isGroup","dispatchClick","group","groupIdx","wasTopNode","dispatchDblClick","subEntry","getValueString","raw","defaultFormatter","contentDiff","selectionDiff","selectionHtml","DiffValue","mapDocDeltaChildren","mapSelectionDeltaChildren","trs","listItems","selectedKey","onSelect","content","timestamp","snapshots","selectedSnapshot","onUpdate","onView","onRestore","onExport","onDelete","handleSnapDoubleclick","snap","handleClickView","handleRestoreClick","handleExportClick","handleClickDelete","updateSnapshot","exportSnapshot","deleteSnapshot","toggleViewSnapshot","view","fileinput"],"mappings":"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"}